"use strict";(self.webpackChunkblog_source_2025=self.webpackChunkblog_source_2025||[]).push([[3765],{23764:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>a,contentTitle:()=>c,default:()=>h,frontMatter:()=>d,metadata:()=>l,toc:()=>o});const l=JSON.parse('{"id":"\u6e17\u900f\u6d4b\u8bd5/\u5185\u7f51\u6e17\u900f/\u4fe1\u606f\u6536\u96c6/\u4fe1\u606f\u6536\u96c6","title":"\u4fe1\u606f\u6536\u96c6","description":"\u4fe1\u606f\u6536\u96c6","source":"@site/docs/01.\u6e17\u900f\u6d4b\u8bd5/12.\u5185\u7f51\u6e17\u900f/02.\u4fe1\u606f\u6536\u96c6/01.\u4fe1\u606f\u6536\u96c6.md","sourceDirName":"01.\u6e17\u900f\u6d4b\u8bd5/12.\u5185\u7f51\u6e17\u900f/02.\u4fe1\u606f\u6536\u96c6","slug":"/\u6e17\u900f\u6d4b\u8bd5/\u5185\u7f51\u6e17\u900f/\u4fe1\u606f\u6536\u96c6/\u4fe1\u606f\u6536\u96c6","permalink":"/docs/\u6e17\u900f\u6d4b\u8bd5/\u5185\u7f51\u6e17\u900f/\u4fe1\u606f\u6536\u96c6/\u4fe1\u606f\u6536\u96c6","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedBy":"d4m1ts","lastUpdatedAt":1748784450000,"sidebarPosition":1,"frontMatter":{},"sidebar":"knowledgeBaseSidebar","previous":{"title":"\u4fe1\u606f\u6536\u96c6","permalink":"/docs/category/\u4fe1\u606f\u6536\u96c6"},"next":{"title":"\u5185\u7f51\u7a7f\u900f","permalink":"/docs/category/\u5185\u7f51\u7a7f\u900f"}}');var r=s(74848),i=s(28453);const d={},c=void 0,a={},o=[{value:"\u4fe1\u606f\u6536\u96c6",id:"\u4fe1\u606f\u6536\u96c6",level:2},{value:"\u4e3b\u673a\u4fe1\u606f",id:"\u4e3b\u673a\u4fe1\u606f",level:3},{value:"\u662f\u5426\u51fa\u7f51",id:"\u662f\u5426\u51fa\u7f51",level:4},{value:"\u662f\u5426\u6709\u57df",id:"\u662f\u5426\u6709\u57df",level:4},{value:"\u7f51\u6bb5\u4fe1\u606f",id:"\u7f51\u6bb5\u4fe1\u606f",level:4},{value:"\u5404\u79cd\u5bc6\u7801",id:"\u5404\u79cd\u5bc6\u7801",level:4},{value:"\u654f\u611f\u6587\u4ef6",id:"\u654f\u611f\u6587\u4ef6",level:4},{value:"\u8fdb\u7a0b\u5217\u8868",id:"\u8fdb\u7a0b\u5217\u8868",level:4},{value:"\u5176\u4ed6",id:"\u5176\u4ed6",level:4},{value:"\u5f53\u524dSID",id:"\u5f53\u524dsid",level:5},{value:"\u5f53\u524d\u7528\u6237/\u7ec4\u548c\u6743\u9650",id:"\u5f53\u524d\u7528\u6237\u7ec4\u548c\u6743\u9650",level:5},{value:"\u5b89\u88c5\u8f6f\u4ef6\u5217\u8868",id:"\u5b89\u88c5\u8f6f\u4ef6\u5217\u8868",level:5},{value:"\u5f00\u673a\u542f\u52a8\u9879",id:"\u5f00\u673a\u542f\u52a8\u9879",level:5},{value:"\u8ba1\u5212\u4efb\u52a1",id:"\u8ba1\u5212\u4efb\u52a1",level:5},{value:"\u670d\u52a1\u5217\u8868",id:"\u670d\u52a1\u5217\u8868",level:5},{value:"RDP",id:"rdp",level:5},{value:"\u73af\u5883\u53d8\u91cf",id:"\u73af\u5883\u53d8\u91cf",level:5},{value:"\u5728\u7ebf\u7528\u6237",id:"\u5728\u7ebf\u7528\u6237",level:5},{value:"\u64cd\u4f5c\u7cfb\u7edf\u7248\u672c",id:"\u64cd\u4f5c\u7cfb\u7edf\u7248\u672c",level:5},{value:"\u662f\u5426\u4e3a\u865a\u62df\u673a",id:"\u662f\u5426\u4e3a\u865a\u62df\u673a",level:5},{value:"\u8865\u4e01\u4fe1\u606f",id:"\u8865\u4e01\u4fe1\u606f",level:5},{value:"\u5171\u4eab\u4fe1\u606f",id:"\u5171\u4eab\u4fe1\u606f",level:5},{value:"DNS\u7f13\u5b58\u8bb0\u5f55",id:"dns\u7f13\u5b58\u8bb0\u5f55",level:5},{value:"\u9632\u706b\u5899\u914d\u7f6e",id:"\u9632\u706b\u5899\u914d\u7f6e",level:5},{value:"\u4ee3\u7406\u4fe1\u606f",id:"\u4ee3\u7406\u4fe1\u606f",level:5},{value:"\u57df\u5185\u4fe1\u606f",id:"\u57df\u5185\u4fe1\u606f",level:3},{value:"\u57df\u5185\u7ec4",id:"\u57df\u5185\u7ec4",level:4},{value:"\u5b9a\u4f4d\u57df\u63a7",id:"\u5b9a\u4f4d\u57df\u63a7",level:4},{value:"\u5b9a\u4f4d\u57df\u7ba1",id:"\u5b9a\u4f4d\u57df\u7ba1",level:4},{value:"SPN\u626b\u63cf",id:"spn\u626b\u63cf",level:4},{value:"\u57df\u4fe1\u4efb\u5173\u7cfb",id:"\u57df\u4fe1\u4efb\u5173\u7cfb",level:4},{value:"dsquery",id:"dsquery",level:4},{value:"\u5176\u4ed6",id:"\u5176\u4ed6-1",level:4},{value:"\u5185\u7f51\u63a2\u6d4b",id:"\u5185\u7f51\u63a2\u6d4b",level:3},{value:"\u7279\u5b9a\u670d\u52a1\u63a2\u6d4b",id:"\u7279\u5b9a\u670d\u52a1\u63a2\u6d4b",level:4},{value:"\u591a\u7f51\u5361\u673a\u5668\u63a2\u6d4b",id:"\u591a\u7f51\u5361\u673a\u5668\u63a2\u6d4b",level:4},{value:"NetBIOS\u63a2\u6d4b",id:"netbios\u63a2\u6d4b",level:4},{value:"ARP\u63a2\u6d4b",id:"arp\u63a2\u6d4b",level:4},{value:"ICMP\u63a2\u6d4b",id:"icmp\u63a2\u6d4b",level:4},{value:"\u7aef\u53e3\u63a2\u6d4b",id:"\u7aef\u53e3\u63a2\u6d4b",level:4},{value:"\u7efc\u5408\u5de5\u5177",id:"\u7efc\u5408\u5de5\u5177",level:4}];function t(n){const e={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",h4:"h4",h5:"h5",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.h2,{id:"\u4fe1\u606f\u6536\u96c6",children:"\u4fe1\u606f\u6536\u96c6"}),"\n",(0,r.jsxs)(e.p,{children:["\u5f53\u6211\u4eec\u62ff\u5230\u4e00\u53f0\u6216\u591a\u53f0\u53ef\u63a7\u7684\u4e3b\u673a\u65f6\uff0c\u9700\u8981\u5bf9\u5f53\u524d\u4e3b\u673a\u8fdb\u884c\u4fe1\u606f\u6536\u96c6\uff0c\u6838\u5fc3\u5c31\u662f",(0,r.jsx)(e.strong,{children:"\u53d1\u73b0\u66f4\u591a\u7684\u76ee\u6807"}),"\u548c",(0,r.jsx)(e.strong,{children:"\u6536\u96c6\u5404\u79cd\u5bc6\u7801"}),"\u3002"]}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u603b\u7ed3\uff1a"})," \u62ff\u5230\u4e00\u53f0\u673a\u5668\u540e\uff0c\u5c1d\u8bd5\u4e0a\u7ebf\u5230C2\uff0c\u8fd9\u91cc\u5224\u65ad\u4e00\u4e0b\u662f\u5426\u51fa\u7f51\uff0c\u7136\u540e\u770b\u4e00\u4e0b\u662f\u5426\u6709\u57df\uff0c\u518d\u67e5\u4e00\u4e0b\u7f51\u6bb5\u4fe1\u606f\uff0c\u5c3d\u91cf\u6269\u5927\u540e\u7eed\u76ee\u6807\u8303\u56f4\uff0c\u6700\u540e\u518d\u53bb\u673a\u5668\u4e0a\u7ffb\u6587\u4ef6\u3001\u627e\u5bc6\u7801\uff08\u672c\u673a\u5bc6\u7801\u3001\u6d4f\u89c8\u5668\u5bc6\u7801\u3001\u5404\u79cd\u670d\u52a1\u5bc6\u7801\uff09\u3001\u627e\u654f\u611f\u8fdb\u7a0b\u7b49\u3002"]}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"\u4e3b\u673a\u4fe1\u606f",children:"\u4e3b\u673a\u4fe1\u606f"}),"\n",(0,r.jsx)(e.p,{children:"\u5f53\u524dshell\u4e3b\u673a\u7684\u4fe1\u606f\u3002"}),"\n",(0,r.jsx)(e.h4,{id:"\u662f\u5426\u51fa\u7f51",children:"\u662f\u5426\u51fa\u7f51"}),"\n",(0,r.jsx)(e.p,{children:"\u5728\u51fa\u7f51\u7684\u60c5\u51b5\u4e0b\uff0c\u65b9\u4fbf\u4e0a\u7ebf\u5230C2\uff0c\u4e5f\u65b9\u4fbf\u505a\u5185\u7f51\u7a7f\u900f\uff0c\u66f4\u5bb9\u6613\u8fdb\u884c\u540e\u7eed\u64cd\u4f5c\u3002"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"TCP/HTTP\u51fa\u7f51\uff1a"})," ",(0,r.jsx)(e.code,{children:"powershell curl http://baidu.com"})]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"DNS\u51fa\u7f51\uff1a"})," ",(0,r.jsx)(e.code,{children:"nslookup baidu.com"})]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"ICMP\u51fa\u7f51\uff1a"})," ",(0,r.jsx)(e.code,{children:"ping baidu.com"}),"\u3001",(0,r.jsx)(e.code,{children:"tracert baidu.com"})]}),"\n"]}),"\n",(0,r.jsx)(e.h4,{id:"\u662f\u5426\u6709\u57df",children:"\u662f\u5426\u6709\u57df"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.code,{children:"ipconfig"}),"\u53ef\u4ee5\u67e5\u770b\u5f53\u524d\u673a\u5668\u662f\u5426\u5904\u4e8e\u5185\u7f51\u3001\u662f\u5426\u6709\u57df\u3001\u5f53\u524d\u5185\u7f51\u7f51\u6bb5\u3001DNS\u5730\u5740\u7b49\u7b49\uff1b\u5982\u679c\u4e3bDNS\u540e\u7f00\u6709\u5185\u5bb9\uff0c\u5c31\u8bf4\u660e\u5728\u57df\u5185\u3002"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"ipconfig /all # \u770b\u4e3bDNS\u540e\u7f00\nnslookup <\u4e3bDNS\u540e\u7f00> # \u83b7\u53d6DNS\u670d\u52a1\u5668\u7684IP\u5730\u5740\uff0c\u4e00\u822c\u662fDC\n"})}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.code,{children:"systeminfo"}),"\u67e5\u770b\u7cfb\u7edf\u8be6\u7ec6\u4fe1\u606f\u7684\u65f6\u5019\uff0c\u53ef\u901a\u8fc7\u201c\u57df\u201d\u5b57\u6bb5\u6765\u5224\u65ad\u662f\u5426\u5728\u57df\u5185\uff0c\u5982\u679c\u662fWORKGROUP\u5219\u8bf4\u660e\u662f\u5de5\u4f5c\u7ec4\u3002"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-shell",children:'systeminfo | findstr "\u57df:"\nsysteminfo | findstr "Domain:"\n'})}),"\n",(0,r.jsx)(e.p,{children:"\u67e5\u8be2\u5de5\u4f5c\u7ad9\u65f6\uff0c\u5982\u679c\u201d\u5de5\u4f5c\u7ad9\u57df\u201c\u663e\u793aWORKGROUP\u5219\u8bf4\u660e\u662f\u5de5\u4f5c\u7ec4\u3002"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-shell",children:"net config workstation\n"})}),"\n",(0,r.jsx)(e.h4,{id:"\u7f51\u6bb5\u4fe1\u606f",children:"\u7f51\u6bb5\u4fe1\u606f"}),"\n",(0,r.jsx)(e.p,{children:"\u4e3a\u4e86\u5bfb\u627e\u66f4\u591a\u7684\u76ee\u6807\uff0c\u6bd4\u5982\u5f53\u524d\u662f10.0.0.0\u7684\u7f51\u6bb5\uff0c\u4e0d\u77e5\u9053\u5176\u4ed6\u7684\u7f51\u6bb5\uff0c\u5982\u679c\u76f4\u63a5\u53bb\u5168\u5c40\u626b\u7684\u8bdd\uff0c\u5f71\u54cd\u592a\u5927\u3002"}),"\n",(0,r.jsx)(e.p,{children:"\u6b64\u5916\u901a\u8fc7\u7f51\u6bb5\u4fe1\u606f\u4e5f\u53ef\u4ee5\u627e\u5230\u8de8\u7f51\u6bb5\u7684\u673a\u5668\uff0c\u8fd9\u6837\u53ef\u4ee5\u6269\u5927\u653b\u51fb\u8303\u56f4\uff0c\u5982\u4eceDMZ\u8fdb\u5165\u6838\u5fc3\u5185\u7f51\u7b49\u3002"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Windows:"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-shell",children:'ipconfig /all\nnetstat -ano\narp /a\ntracert -d -h 10 ip\n\nroute print\ntype C: \\Windows\\System32\\drivers\\etc\\hosts\nwevtutil qe Security /q:"*[System[(EventID=4624)]]" /rd:true /f:text | findstr /C:"\u6e90\u7f51\u7edc\u5730\u5740:" | findstr /V /C:"127.0.0.1" /C:"-" /C:"::1" # windows\u65e5\u5fd7\u67e5\u770b\u767b\u9646\u8bb0\u5f55\n'})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Linux\uff1a"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-shell",children:"ifconfig\nnetstat -antlp\narp\ntraceroute\n\nlast\nip addr\ncat /etc/hosts\nroute\n"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u5176\u4ed6\uff1a"})}),"\n",(0,r.jsx)(e.p,{children:"\u6bd4\u8f83\u7b28\u7684\u529e\u6cd5\uff0c\u5168\u5c40ping\u7f51\u5173"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-shell",children:'# linux\nfor i in 192.168.{1..254}.1; do if ping -c 1 -w 1 $i &>/dev/null; then echo $i is alived; fi; done\n\n# windows\nfor /L %I in (1,1,254) DO @ping -w 1 -n 1 192.168.%I.1 | findstr "TTL="\n'})}),"\n",(0,r.jsx)(e.h4,{id:"\u5404\u79cd\u5bc6\u7801",children:"\u5404\u79cd\u5bc6\u7801"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\u672c\u673ahash\uff08",(0,r.jsx)(e.a,{href:"https://github.com/gentilkiwi/mimikatz",children:"mimikatz"}),"\uff09"]}),"\n",(0,r.jsxs)(e.li,{children:["\u6d4f\u89c8\u5668\u5bc6\u7801\uff08",(0,r.jsx)(e.a,{href:"https://github.com/AlessandroZ/LaZagne",children:"LaZagne"}),"\uff09"]}),"\n",(0,r.jsx)(e.li,{children:"\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684\u5404\u79cd\u5bc6\u7801\uff0c\u5982mysql\u3001sqlserver\u3001redis\u3001VPN\u7b49\u670d\u52a1\u7684\u5bc6\u7801"}),"\n",(0,r.jsx)(e.li,{children:"\u5e94\u7528\u4e2d\u7684\u5404\u79cd\u5bc6\u7801\uff0c\u5982xshell\u3001navicat\u7b49"}),"\n",(0,r.jsxs)(e.li,{children:["Wi-Fi\u5bc6\u7801\uff08",(0,r.jsx)(e.code,{children:"for /f  \"skip=9 tokens=1,2 delims=:\" %i in ('netsh wlan show profiles')  do  @echo %j | findstr -i -v echo |  netsh wlan show profiles %j key=clear"}),"\uff09"]}),"\n"]}),"\n",(0,r.jsx)(e.h4,{id:"\u654f\u611f\u6587\u4ef6",children:"\u654f\u611f\u6587\u4ef6"}),"\n",(0,r.jsx)(e.p,{children:"\u591a\u7ffb\u4e00\u7ffb\u673a\u5668\u4e0a\u7684\u6587\u4ef6\uff0c\u9664\u4e86\u5bc6\u7801\u5916\uff0c\u4e07\u4e00\u6709\u5176\u4ed6\u91cd\u8981\u7684\u654f\u611f\u4fe1\u606f\uff0c\u5982\u62d3\u6251\u56fe\u3001\u901a\u8baf\u5f55\u3001\u96c6\u7fa4\u7b49\u7b49\u3002"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"Windows"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-shell",children:'dir /a /s /b D:\\"*conf*"\ndir /s /b "*\u5bc6\u7801*" "*\u767b\u5f55*" "*\u8d44\u4ea7*" "*VPN*" "*Svn*" "*Git*" "*\u4ea4\u63a5*" "*\u79bb\u804c*" "*\u7f51\u7edc*" "*\u540e\u53f0*" "*\u62d3\u6251*" "*\u90ae\u7bb1*" "*\u5de5\u8d44*" "*\u7ba1\u7406\u5458*" "*\u5de1\u68c0*"\nfindstr /I /c:"user=" /c:"pass=" /c:"login=" /c:"uid=" /c:"pwd="  /si *.conf *.asp *.php *.jsp *.aspx *.cgi *.xml *.ini *.inf *.txt *.cgi\n'})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"Linux"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-shell",children:'find / -name "*.properties" | xargs egrep -i "user|pass|pwd|uname|login|db_"\ngrep -rli "user|pass|pwd|uname|login|db_" ./\n'})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.h4,{id:"\u8fdb\u7a0b\u5217\u8868",children:"\u8fdb\u7a0b\u5217\u8868"}),"\n",(0,r.jsx)(e.p,{children:"\u901a\u8fc7\u8fdb\u7a0b\u5217\u8868\uff0c\u53ef\u4ee5\u770b\u5230\u8fd0\u884c\u7684\u8f6f\u4ef6\u548c\u670d\u52a1\uff0c\u5982\u90ae\u4ef6\u5ba2\u6237\u7aef\u3001VPN\u5ba2\u6237\u7aef\u7b49\uff0c\u4ece\u800c\u83b7\u53d6\u5230\u654f\u611f\u4fe1\u606f\uff0c\u751a\u81f3\u5229\u7528\u7b2c\u4e09\u65b9\u5e94\u7528\u8fdb\u884c\u63d0\u6743\u3002"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-shell",children:"tasklist /svc\nwmic process list brief\n"})}),"\n",(0,r.jsxs)(e.p,{children:["\u5f53\u7136\u4e5f\u53ef\u4ee5\u770b\u770b\u6740\u8f6f\uff0c\u53ef\u901a\u8fc7\u5728\u7ebf\u7f51\u7ad9\u3010",(0,r.jsx)(e.a,{href:"https://www.ddosi.org/av/1.php",children:"Windows\u6740\u8f6f\u5728\u7ebf\u67e5\u8be2"}),"\u3011\u8fdb\u884c\u5bf9\u6bd4\u5339\u914d\u3002"]}),"\n",(0,r.jsx)(e.h4,{id:"\u5176\u4ed6",children:"\u5176\u4ed6"}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"\u8fd9\u4e00\u5757\u611f\u89c9\u90fd\u4e0d\u662f\u7279\u522b\u91cd\u8981\u4e86\uff0c\u4e5f\u4e0d\u662f\u521a\u9700\uff0c\u53ef\u4ee5\u6839\u636e\u9700\u6c42\u67e5\u5bf9\u5e94\u7684\u4fe1\u606f\u3002"}),"\n"]}),"\n",(0,r.jsx)(e.h5,{id:"\u5f53\u524dsid",children:"\u5f53\u524dSID"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-shell",children:"whoami /user\nwhoami /all\n"})}),"\n",(0,r.jsx)(e.h5,{id:"\u5f53\u524d\u7528\u6237\u7ec4\u548c\u6743\u9650",children:"\u5f53\u524d\u7528\u6237/\u7ec4\u548c\u6743\u9650"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-shell",children:"net user\nnet user xxx\nnet user xxx /domain # \u57df\u5185\nnet localgroup administrators\n"})}),"\n",(0,r.jsx)(e.h5,{id:"\u5b89\u88c5\u8f6f\u4ef6\u5217\u8868",children:"\u5b89\u88c5\u8f6f\u4ef6\u5217\u8868"}),"\n",(0,r.jsx)(e.p,{children:"\u67e5\u770b\u76ee\u6807\u4e3b\u673a\u4e0a\u5b89\u88c5\u7684\u7b2c\u4e09\u65b9\u5e94\u7528\u6709\u54ea\u4e9b\uff0c\u662f\u5426\u53ef\u4ee5\u7528\u6765\u7559\u540e\u95e8\u7b49\u3002"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-shell",children:'wmic product get name,version\npowershell "Get-WmiObject -class Win32_Product |Select-Object -Property name\n'})}),"\n",(0,r.jsx)(e.h5,{id:"\u5f00\u673a\u542f\u52a8\u9879",children:"\u5f00\u673a\u542f\u52a8\u9879"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"wmic startup get command,caption\n"})}),"\n",(0,r.jsx)(e.h5,{id:"\u8ba1\u5212\u4efb\u52a1",children:"\u8ba1\u5212\u4efb\u52a1"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-shell",children:"schtasks  /query  /fo  LIST /v\n"})}),"\n",(0,r.jsx)(e.h5,{id:"\u670d\u52a1\u5217\u8868",children:"\u670d\u52a1\u5217\u8868"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-shell",children:"wmic service list brief\nnet start\npost/windows/gather/enum_applications    # msf\n"})}),"\n",(0,r.jsx)(e.h5,{id:"rdp",children:"RDP"}),"\n",(0,r.jsxs)(e.p,{children:["\u67e5\u770bRDP\u7684\u7aef\u53e3\uff08 ",(0,r.jsx)(e.code,{children:"0xd3d"})," \u8868\u793a3389"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-shell",children:'REG QUERY "HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\Terminal Server\\WinStations\\RDP-Tcp" /V PortNumber\n'})}),"\n",(0,r.jsx)(e.h5,{id:"\u73af\u5883\u53d8\u91cf",children:"\u73af\u5883\u53d8\u91cf"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"set\n"})}),"\n",(0,r.jsx)(e.h5,{id:"\u5728\u7ebf\u7528\u6237",children:"\u5728\u7ebf\u7528\u6237"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-shell",children:"query user\nqwinsta\nquser\n"})}),"\n",(0,r.jsx)(e.h5,{id:"\u64cd\u4f5c\u7cfb\u7edf\u7248\u672c",children:"\u64cd\u4f5c\u7cfb\u7edf\u7248\u672c"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-shell",children:'systeminfo | findstr /B /C:"OS \u540d\u79f0" /C:"OS \u7248\u672c"\nsysteminfo | findstr /B /C:"OS Name" /C:"OS Version"\necho %PROCESSOR_ARCHITECTURE% # \u67b6\u6784\n'})}),"\n",(0,r.jsx)(e.h5,{id:"\u662f\u5426\u4e3a\u865a\u62df\u673a",children:"\u662f\u5426\u4e3a\u865a\u62df\u673a"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-shell",children:"# msf\npost/windows/gather/checkvm\n"})}),"\n",(0,r.jsx)(e.h5,{id:"\u8865\u4e01\u4fe1\u606f",children:"\u8865\u4e01\u4fe1\u606f"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-shell",children:"systeminfo\nwmic qfe get Caption,Description,HotFixID,InstalledOn\n"})}),"\n",(0,r.jsxs)(e.p,{children:["\u53ef\u4ee5\u53bb",(0,r.jsx)(e.a,{href:"https://i.hacking8.com/tiquan/",children:"Windows\u63d0\u6743\u8f85\u52a9\u5de5\u51771"}),"\u6216\u8005",(0,r.jsx)(e.a,{href:"https://tools.zjun.info/getmskb/",children:"Windows\u63d0\u6743\u8f85\u52a9\u5de5\u51772"}),"\u6765\u67e5\u8be2\u53ef\u7528\u7684\u63d0\u6743\u8865\u4e01\u3002"]}),"\n",(0,r.jsx)(e.h5,{id:"\u5171\u4eab\u4fe1\u606f",children:"\u5171\u4eab\u4fe1\u606f"}),"\n",(0,r.jsx)(e.p,{children:"\u67e5\u770b\u672c\u673a\u5171\u4eab\u5217\u8868\u548c\u53ef\u8bbf\u95ee\u7684\u57df\u5171\u4eab\u5217\u8868"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-shell",children:"net share\nwmic share get name,path,status\nwmic share get /format:list\n\n# List shares on a remote PC\nwmic /node: COMPUTER_NAME share get\n"})}),"\n",(0,r.jsx)(e.h5,{id:"dns\u7f13\u5b58\u8bb0\u5f55",children:"DNS\u7f13\u5b58\u8bb0\u5f55"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-shell",children:"ipconfig /displaydns\n"})}),"\n",(0,r.jsx)(e.h5,{id:"\u9632\u706b\u5899\u914d\u7f6e",children:"\u9632\u706b\u5899\u914d\u7f6e"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-shell",children:"netsh firewall show config\nnetsh firewall show state    # \u9632\u706b\u5899\u72b6\u6001\n"})}),"\n",(0,r.jsx)(e.h5,{id:"\u4ee3\u7406\u4fe1\u606f",children:"\u4ee3\u7406\u4fe1\u606f"}),"\n",(0,r.jsxs)(e.p,{children:["\u5982\u679c\u6709\u4ee3\u7406\u53ef\u4ee5\u770b\u5230 ",(0,r.jsx)(e.code,{children:"ProxyServer"})," \u5b57\u6bb5"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-shell",children:'reg query "HKEY_CURRENT_USER\\Software\\Microsoft\\Windows\\CurrentVersion\\Internet Settings"\n'})}),"\n",(0,r.jsx)(e.h3,{id:"\u57df\u5185\u4fe1\u606f",children:"\u57df\u5185\u4fe1\u606f"}),"\n",(0,r.jsx)(e.p,{children:"\u57df\u5185\u7684\u6240\u6709\u67e5\u8be2\u90fd\u662f\u901a\u8fc7LDAP\u534f\u8bae\u53bbAD\u8fdb\u884c\u67e5\u8be2\u7684\uff0c\u800c\u8fd9\u4e2a\u67e5\u8be2\u9700\u8981\u7ecf\u8fc7\u6743\u9650\u8ba4\u8bc1\uff0c\u6240\u4ee5\u53ea\u6709\u57df\u7528\u6237\u624d\u62e5\u6709\u8fd9\u4e2a\u6743\u9650\uff0c\u5f53\u57df\u7528\u6237\u8fd0\u884c\u67e5\u8be2\u547d\u4ee4\u65f6\uff0c\u4f1a\u81ea\u52a8\u4f7f\u7528Kerberos\u534f\u8bae\u8fdb\u884c\u8ba4\u8bc1\uff0c\u65e0\u987b\u989d\u5916\u8f93\u5165\u8d26\u53f7\u548c\u5bc6\u7801\u3002"}),"\n",(0,r.jsx)(e.h4,{id:"\u57df\u5185\u7ec4",children:"\u57df\u5185\u7ec4"}),"\n",(0,r.jsx)(e.p,{children:"\u901a\u8fc7\u57df\u5185\u7ec4\u53ef\u4ee5\u67e5\u5230\u5f88\u591a\u7684\u4fe1\u606f\uff0c\u5982\u57df\u5185\u4e3b\u673a\u3001\u57df\u5185\u7528\u6237\u3001\u57df\u63a7\u7b49\u3002"}),"\n",(0,r.jsx)(e.p,{children:"\u67e5\u770b\u57df\u5185\u7ec4"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-shell",children:"net group /domain\n"})}),"\n",(0,r.jsx)(e.p,{children:"\u5176\u4e2d\u7cfb\u7edf\u81ea\u5e26\u7684\u5e38\u89c1\u7ec4\u5982\u4e0b:"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"Domain Admins"}),"\uff1a\u57df\u7ba1\u7406\u5458\u7ec4\u3002"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"Domain Computers"}),"\uff1a\u57df\u5185\u673a\u5668\u3002"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"Domain Controllers"}),"\uff1a\u57df\u63a7\u5236\u5668\u3002"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"Domain Guest"}),"\uff1a\u57df\u8bbf\u5ba2\u7ec4\uff0c\u6743\u9650\u8f83\u4f4e\u3002"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"Domain Users"}),"\uff1a\u57df\u7528\u6237\u3002"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"Enterprise Admins"}),"\uff1a\u4f01\u4e1a\u7cfb\u7edf\u7ba1\u7406\u5458\u7528\u6237\u3002"]}),"\n"]}),"\n",(0,r.jsxs)(e.p,{children:["\u5728\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c",(0,r.jsx)(e.code,{children:"Domain Admins"}),"\u548c",(0,r.jsx)(e.code,{children:"Enterprise Admins"}),"\u5bf9\u57df\u5185\u6240\u6709\u57df\u63a7\u5236\u5668\u6709\u5b8c\u5168 \u63a7\u5236\u6743\u9650"]}),"\n",(0,r.jsx)(e.p,{children:"\u67e5\u8be2\u7ec4\u5185\u7684\u5bf9\u8c61"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-shell",children:'net group "Domain Admins" /domain\t\t# \u57df\u7ba1\u5217\u8868\nnet group "Domain Controllers" /domain\t# \u57df\u63a7\u5217\u8868\nnet group "Domain Users" /domain \t\t# \u57df\u5185\u7528\u6237\u5217\u8868, net user /domain \u5e73\u66ff\nnet group "Domain Computers" /domain \t# \u57df\u5185\u4e3b\u673a\u5217\u8868\n'})}),"\n",(0,r.jsx)(e.h4,{id:"\u5b9a\u4f4d\u57df\u63a7",children:"\u5b9a\u4f4d\u57df\u63a7"}),"\n",(0,r.jsx)(e.p,{children:"\u5728\u771f\u5b9e\u73af\u5883\u4e2d\uff0c\u4e00\u822c\u5b58\u5728\u4e24\u53f0\u6216\u4e24\u53f0\u4ee5\u4e0a\u7684\u57df\u63a7\u5236\u5668\uff0c1\u53f0\u4f5c\u4e3a\u4e3b\u57df\u63a7\uff0c1\u53f0\u4f5c\u4e3a\u5907\u4efd\u57df\u63a7\uff1b\u5907\u4efd\u57df\u63a7\u4e3b\u8981\u662f\u5728\u4e3b\u57df\u63a7\u762b\u75ea\u65f6\uff0c\u4e3a\u6574\u4e2a\u57df\u7ee7\u7eed\u63d0\u4f9b\u6b63\u5e38\u7684\u670d\u52a1\u3002"}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"nltest"})," \u547d\u4ee4\u7528\u4e8e\u5728 Windows \u7cfb\u7edf\u4e0a\u6267\u884c\u5404\u79cd\u4e0e\u57df\u76f8\u5173\u7684\u6d4b\u8bd5\u548c\u64cd\u4f5c\uff0c\u5305\u62ec\u83b7\u53d6\u5f53\u524d\u8ba1\u7b97\u673a\u7684\u57df\u63a7\u5236\u5668\u4fe1\u606f\u3002"]}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-shell",children:"nltest /DCLIST:org.gm7\nnltest /DSGETDC:org.gm7\nnltest /DNSGETDC:org.gm7\n"})}),"\n",(0,r.jsxs)(e.ol,{start:"2",children:["\n",(0,r.jsxs)(e.li,{children:["\u4f7f\u7528 ",(0,r.jsx)(e.code,{children:"nslookup"})," \u547d\u4ee4\u67e5\u8be2 SRV \u8bb0\u5f55\u7684\u8bed\u6cd5\uff0c\u5176\u76ee\u7684\u662f\u67e5\u627e\u4e0e LDAP \u670d\u52a1\u76f8\u5173\u7684 SRV \u8bb0\u5f55\u3002"]}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-shell",children:"nslookup -type=SRV _ldap._tcp\n"})}),"\n",(0,r.jsxs)(e.ol,{start:"3",children:["\n",(0,r.jsx)(e.li,{children:"\u67e5\u8be2\u57df\u63a7\u7684\u65f6\u95f4"}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-shell",children:"net time /domain\n"})}),"\n",(0,r.jsxs)(e.ol,{start:"4",children:["\n",(0,r.jsx)(e.li,{children:"\u4e00\u822c\u60c5\u51b5\u4e0bDNS\u670d\u52a1\u4f1a\u642d\u5efa\u5728DC\u4e0a\uff0c\u6240\u4ee5DNS\u670d\u52a1\u5668\u5c31\u662fDC"}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-shell",children:'ipconfig /all | findstr /R "DNS Servers"\nipconfig /all | findstr /R "DNS \u670d\u52a1\u5668"\n'})}),"\n",(0,r.jsxs)(e.ol,{start:"5",children:["\n",(0,r.jsxs)(e.li,{children:["\u57df\u5185\u7528\u6237\u7ec4",(0,r.jsx)(e.code,{children:"Domain Controllers"}),"\u4e2d\u7684\u5bf9\u8c61\u5c31\u662fDC"]}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-shell",children:'net group "Domain Controllers" /domain\n'})}),"\n",(0,r.jsxs)(e.ol,{start:"6",children:["\n",(0,r.jsx)(e.li,{children:"\u901a\u8fc7SPN\u5b9a\u4f4d\u5230\u5f00\u653e\u4e86\u7279\u5b9a\u670d\u52a1\u7684\u673a\u5668\uff0c\u4e00\u822c\u5c31\u4f1a\u662fDC"}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-shell",children:'setspn -T org.gm7 -Q */* | findstr "DNS"\nsetspn -T org.gm7 -Q */* | findstr "ldap"\n'})}),"\n",(0,r.jsxs)(e.ol,{start:"7",children:["\n",(0,r.jsx)(e.li,{children:"\u5982\u679c\u4e0a\u8ff0\u7684\u90fd\u5b9a\u4f4d\u4e0d\u5230DC\uff0c\u90a3\u4e48\u53ef\u4ee5\u5c1d\u8bd5\u5bfb\u627e\u5f00\u653e\u4e8688\uff08Kerberos\uff09,389\uff08LDAP\uff09,53\uff08DNS\uff09\u7aef\u53e3\u7684\u670d\u52a1\u5668\u3002"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:"\u5b9a\u4f4d\u5230DC\u540e\uff0c\u5982\u679c\u62ff\u5230\u7684\u662f\u673a\u5668\u540d\uff0c\u53ef\u4ee5\u4f7f\u7528ping\u83b7\u53d6\u5230\u5177\u4f53\u7684IP\u5730\u5740\u3002"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-shell",children:"ping -n 1 PDC\n"})}),"\n",(0,r.jsx)(e.h4,{id:"\u5b9a\u4f4d\u57df\u7ba1",children:"\u5b9a\u4f4d\u57df\u7ba1"}),"\n",(0,r.jsx)(e.p,{children:"\u57df\u7ba1\u7406\u5458\u53ef\u4ee5\u4e0a\u57df\u5185\u7684\u4efb\u610f\u673a\u5668\uff0c\u5305\u62ec\u57df\u63a7\uff0c\u6362\u53e5\u8bdd\u8bf4\uff0c\u62ff\u5230\u4e86\u57df\u7ba1\u8d26\u53f7\u5c31\u76f8\u5f53\u4e8e\u62ff\u4e0b\u4e86\u6574\u4e2a\u57df\u3002"}),"\n",(0,r.jsx)(e.p,{children:"\u6709\u7684\u57df\u6210\u5458\u673a\u5668\u4e0a\u767b\u5f55\u8fc7\u57df\u7ba1\u8d26\u53f7\uff0c\u5f53\u62ff\u4e0b\u8fd9\u4e00\u53f0\u673a\u5668\u540e \uff0c\u5c31\u53ef\u4ee5\u5c1d\u8bd5\u4ece\u5185\u5b58\u4e2d\u8bfb\u53d6\u660e\u6587\u5bc6\u7801\u6216\u8005hash\uff0c\u8fd9\u4e2a\u65f6\u5019\u65e2\u6709\u57df\u63a7\u7684\u5730\u5740\uff0c\u4e5f\u6709\u57df\u7ba1\u8eab\u4efd\u51ed\u8bc1\uff0c\u5c31\u53ef\u4ee5\u5185\u7f51\u6f2b\u6e38\u4e86\u3002"}),"\n",(0,r.jsxs)(e.p,{children:["\u6240\u4ee5\u6211\u4eec\u8981\u5b9a\u4f4d\u57df\u7ba1\u5728\u54ea\u4e9b\u673a\u5668\u4e0a\u767b\u9646\u8fc7\u3002",(0,r.jsx)(e.strong,{children:"\u5e38\u7528\u6765\u5b9a\u4f4d\u57df\u5185\u7ba1\u7406\u5458\u7684\u6e20\u9053\u6709\u4e24\u4e2a\uff0c\u4e00\u662f\u65e5\u5fd7\uff0c\u4e8c\u662f\u4f1a\u8bdd\uff1a"})]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\u65e5\u5fd7\u662f\u6307\u672c\u5730\u673a\u5668\u7684\u7ba1\u7406\u5458\u65e5\u5fd7\uff0c\u53ef\u4ee5\u4f7f\u7528\u811a\u672c\u6216",(0,r.jsx)(e.code,{children:"wevtutil"}),"\u5bfc\u51fa\u67e5\u770b\u3002"]}),"\n",(0,r.jsxs)(e.li,{children:["\u4f1a\u8bdd\u662f\u6307\u57df\u5185\u6bcf\u4e2a\u673a\u5668\u7684\u767b\u5f55\u4f1a\u8bdd\uff0c\u53ef\u4ee5\u533f\u540d\u67e5\u8be2\uff0c \u65e0\u987b\u6743\u9650\uff0c\u53ef\u4ee5\u4f7f\u7528 ",(0,r.jsx)(e.code,{children:"netsess.exe"})," \u6216 ",(0,r.jsx)(e.code,{children:"PowerView"})," \u7b49\u5de5\u5177\u67e5\u8be2\u3002"]}),"\n"]}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:["\u4f7f\u7528",(0,r.jsx)(e.a,{href:"https://github.com/PowerShellMafia/PowerSploit/tree/master/Recon",children:"powerview"}),"\u7684",(0,r.jsx)(e.code,{children:"Find-DomainUserLocation"}),"\u6a21\u5757\uff08",(0,r.jsx)(e.code,{children:"Invoke-UserHunter"}),"\u5e73\u66ff\uff09\uff0c\u679a\u4e3e\u57df\u5185\u6bcf\u53f0\u673a\u5668\u6765\u5bfb\u627e\u57df\u7ba1\u3002"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-shell",children:"PS C:\\Users\\d4m1ts\\Desktop\\Recon> Import-Module .\\PowerView.ps1                                                     PS C:\\Users\\d4m1ts\\Desktop\\Recon> Find-DomainUserLocation                                                               \n\nUserDomain      : ORG\nUserName        : Administrator\nComputerName    : DESKTOP-9CAT508.org.gm7\nIPAddress       : 172.16.93.2\nSessionFrom     :\nSessionFromName :\nLocalAdmin      :\n"})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:["\u4f7f\u7528",(0,r.jsx)(e.a,{href:"https://docs.microsoft.com/en-us/sysinternals/downloads/psloggedon",children:"psloggedon"}),"\u6765\u679a\u4e3e\u5f53\u524d\u673a\u5668\u6216\u6307\u5b9a\u673a\u5668\u767b\u9646\u4e86\u54ea\u4e9b\u7528\u6237\u3002"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-shell",children:"C:\\Users\\d4m1ts\\Desktop>PsLoggedon64.exe\n\nPsLoggedon v1.35 - See who's logged on\nCopyright (C) 2000-2016 Mark Russinovich\nSysinternals - www.sysinternals.com\n\nUsers logged on locally:\n     2024/4/9 10:01:01          ORG\\d4m1ts\n     <unknown time>             ORG\\Administrator\n\nNo one is logged on via resource shares.\n\nC:\\Users\\d4m1ts\\Desktop>PsLoggedon64.exe \\\\PDC\n\nPsLoggedon v1.35 - See who's logged on\nCopyright (C) 2000-2016 Mark Russinovich\nSysinternals - www.sysinternals.com\n\nUsers logged on locally:\n     <unknown time>             ORG\\Administrator\nUnable to query resource logons\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.h4,{id:"spn\u626b\u63cf",children:"SPN\u626b\u63cf"}),"\n",(0,r.jsx)(e.p,{children:"\u4e4b\u524d\u4ecb\u7ecd\u8fc7\uff0cSPN\uff08Service Principal Name\uff09\u662fKerberos\u8eab\u4efd\u9a8c\u8bc1\u4e2d\u7528\u4e8e\u6807\u8bc6\u7279\u5b9a\u670d\u52a1\u5b9e\u4f8b\uff08\u5982HTTP\u3001SMB\u3001MySQL\uff09\u7684\u552f\u4e00\u540d\u79f0\u3002Kerberos\u8eab\u4efd\u9a8c\u8bc1\u4f7f\u7528SPN\u5c06\u670d\u52a1\u5b9e\u4f8b\u4e0e\u670d\u52a1\u767b\u5f55\u5e10\u6237\u76f8\u5173\u8054\u3002"}),"\n",(0,r.jsx)(e.p,{children:"\u56e0\u6b64\u53ef\u901a\u8fc7SPN\u53d1\u73b0\u4e00\u4e9b\u654f\u611f\u7684\u670d\u52a1\uff0c\u4f46\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0cSPN\u7ed3\u679c\u7684\u670d\u52a1\u4e0d\u4e00\u5b9a\u662f\u5b58\u6d3b\u7684\u3002"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-shell",children:"setspn -Q */*\t\t\t\t# \u67e5\u770b\u5f53\u524d\u57df\u5185\u6240\u6709\u7684SPN\nsetspn -T org.gm7 -Q */*\t# \u6307\u5b9a\u57df\u67e5\u8be2SPN\nsetspn -L d4m1ts\t\t\t# \u67e5\u627e\u6307\u5b9a\u7528\u6237\u7684SPN\n"})}),"\n",(0,r.jsx)(e.p,{children:"\u4e00\u4e9b\u5e38\u7528\u7684\u5b9a\u4f4d\u654f\u611f\u670d\u52a1\u3002"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-shell",children:'# \u5b9a\u4f4d\u6570\u636e\u5e93\u76f8\u5173\u670d\u52a1\nsetspn -T org.gm7 -Q */* | findstr "MSSQLSvc"\nsetspn -T org.gm7 -Q */* | findstr "oracle"\n\n# \u5b9a\u4f4dLDAP\u670d\u52a1\u5668\nsetspn -T org.gm7 -Q */* | findstr "ldap"\n\n# \u5b9a\u4f4d\u90ae\u4ef6\u670d\u52a1\u5668\nsetspn -T org.gm7 -Q */* | findstr "exchangeMDB"\nsetspn -T org.gm7 -Q */* | findstr "SMTPSVC"\nsetspn -T org.gm7 -Q */* | findstr "IMAP"\nsetspn -T org.gm7 -Q */* | findstr "POP3"\n\n# \u5b9a\u4f4dWEB\u670d\u52a1\u5668\nsetspn -T org.gm7 -Q */* | findstr "HTTP"\nsetspn -T org.gm7 -Q */* | findstr "HTTPS"\n\n# \u5b9a\u4f4dDNS\u670d\u52a1\u5668\nsetspn -T org.gm7 -Q */* | findstr "DNS"\n\n# \u5b9a\u4f4d\u6587\u4ef6\u670d\u52a1\u5668\nsetspn -T org.gm7 -Q */* | findstr "ftp"\nsetspn -T org.gm7 -Q */* | findstr "nfs"\n\n# \u5b9a\u4f4d\u5f00\u542f\u8fdc\u7a0b\u8fde\u63a5\u670d\u52a1\u670d\u52a1\u5668\nsetspn -T org.gm7 -Q */* | findstr "TERMSRV" >>> PerfLogs rdp .txt\nsetspn -T org.gm7 -Q */* | findstr "WSMAN" >> C: PerfLogs winrm .txt\nsetspn -T org.gm7 -Q */* | findstr "vnc" >> C: PerfLogs vnc .txt\nsetspn -T org.gm7 -Q */* | findstr "vpn" >> C: PerfLogs vpn .txt\nsetspn -T org.gm7 -Q */* | findstr "tnetdgines" >> C: PerfLogs tnetdgines .txt\n'})}),"\n",(0,r.jsx)(e.h4,{id:"\u57df\u4fe1\u4efb\u5173\u7cfb",children:"\u57df\u4fe1\u4efb\u5173\u7cfb"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-shell",children:"nltest /domain_trusts\n"})}),"\n",(0,r.jsx)(e.h4,{id:"dsquery",children:"dsquery"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.a,{href:"https://learn.microsoft.com/en-us/previous-versions/windows/it-pro/windows-server-2012-r2-and-2012/cc732952(v=ws.11)",children:"dsquery"}),"\u662f\u4e00\u4e2a\u5185\u7f6e\u5728Windows Server 2008\u4e2d\u7684\u547d\u4ee4\u884c\u5de5\u5177\uff0c\u5728\u5b89\u88c5\u4e86\u6d3b\u52a8\u76ee\u5f55\u57df\u670d\u52a1\uff08AD DS\uff09\u670d\u52a1\u5668\uff08\u57df\u63a7\uff09\u4e0a\u53ef\u7528\uff0c\u53ef\u4ee5\u7528\u6765\u67e5\u8be2AD\u4e2d\u5404\u79cd\u5bf9\u8c61\u3002"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"dsquery computer       ----- \u5bfb\u627eAD\u4e2d\u7684\u8ba1\u7b97\u673a\ndsquery server         ----- \u5bfb\u627eAD\u4e2d\u7684\u57df\u63a7\u5236\u5668\ndsquery user           ----- \u5bfb\u627eAD\u4e2d\u7684\u7528\u6237\ndsquery contact        ----- \u5728AD\u4e2d\u67e5\u627e\u4e0e\u6307\u5b9a\u7684\u641c\u7d22\u6761\u4ef6\u76f8\u5339\u914d\u7684\u8054\u7cfb\u4eba\ndsquery subnet         ----- \u5bfb\u627eAD\u4e2d\u7684\u5b50\u7f51\ndsquery group          ----- \u5bfb\u627eAD\u4e2d\u7684\u7fa4\u7ec4\ndsquery ou             ----- \u5bfb\u627eAD\u4e2d\u7684\u7ec4\u7ec7\u5355\u4f4d\ndsquery site           ----- \u5bfb\u627eAD\u4e2d\u7684\u7ad9\u70b9\ndsquery quota          ----- \u5bfb\u627eAD\u4e2d\u7684\u914d\u989d\u89c4\u683c\ndsquery partition      ----- \u5bfb\u627eAD\u4e2d\u7684\u78c1\u76d8\u5206\u533a\ndsquery *              ----- \u4f7f\u7528\u6807\u51c6\u7684LDAP\u67e5\u8be2\u5728AD\u4e2d\u5bfb\u627e\u4efb\u4f55\u5bf9\u8c61\n\ndsquery server \u2013domain Yahoo.com | dsget server\u2013dnsname \u2013site   ---\u641c\u7d22\u57df\u5185\u57df\u63a7\u5236\u5668\u7684DNS\u4e3b\u673a\u540d\u548c\u7ad9\u70b9\u540d\ndsquery computer domainroot \u2013name *-xp \u2013limit 10                ----- \u641c\u7d22\u57df\u5185\u4ee5-xp\u7ed3\u5c3e\u7684\u673a\u566810\u53f0\ndsquery user domainroot \u2013name admin* -limit 10                  ---- \u641c\u7d22\u57df\u5185\u4ee5admin\u5f00\u5934\u7684\u7528\u623710\u4e2a\n"})}),"\n",(0,r.jsx)(e.h4,{id:"\u5176\u4ed6-1",children:"\u5176\u4ed6"}),"\n",(0,r.jsx)(e.p,{children:"\u4e00\u822c\u62ff\u5230\u57df\u63a7\u6743\u9650\u540e\uff0c\u9700\u8981\u7edf\u8ba1\u4e3b\u673a\u6570\u91cf\u6765\u8bc1\u660e\u6570\u636e\u91cf\uff0c\u53ef\u5728DC\u4e2d\u4f7f\u7528\u5982\u4e0b\u547d\u4ee4\u7edf\u8ba1\uff1a"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-shell",children:'dsquery computer -limit 0 | find /c /v ""\npowershell.exe -Command "(Get-ADComputer -Filter *).Count"\n'})}),"\n",(0,r.jsx)(e.h3,{id:"\u5185\u7f51\u63a2\u6d4b",children:"\u5185\u7f51\u63a2\u6d4b"}),"\n",(0,r.jsxs)(e.p,{children:["\u5185\u7f51\u63a2\u6d4b\u662f\u5185\u7f51\u6e17\u900f\u4e2d\u4e0d\u53ef\u6216\u7f3a\u7684\u4e00\u4e2a\u73af\u8282\uff0c\u5728\u626b\u63cf\u7684\u65f6\u5019\uff0c\u5e94",(0,r.jsx)(e.strong,{children:"\u5c3d\u91cf\u907f\u514d\u4f7f\u7528Namp\u7b49\u5de5\u5177"}),"\u8fdb\u884c\u66b4\u529b\u626b\u63cf\uff0c\u4e5f\u4e0d\u8981\u5728\u76ee\u6807\u673a\u5668\u4e0a\u4f7f\u7528\u56fe\u5f62\u5316\u7684\u5de5\u5177\uff0c \u800c\u8981",(0,r.jsx)(e.strong,{children:"\u5c3d\u91cf\u4f7f\u7528\u76ee\u6807\u7cfb\u7edf\u81ea\u5e26\u7684\u5404\u79cd\u5de5\u5177\uff0c\u63a8\u8350\u4f7f\u7528PowerShell\u811a\u672c"}),"\u3002"]}),"\n",(0,r.jsx)(e.h4,{id:"\u7279\u5b9a\u670d\u52a1\u63a2\u6d4b",children:"\u7279\u5b9a\u670d\u52a1\u63a2\u6d4b"}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:["\u4f7f\u7528 ",(0,r.jsx)(e.a,{href:"https://github.com/byt3bl33d3r/CrackMapExec",children:"CrackMapExec"})," \u63a2\u6d4b\u5e38\u7528\u7684\u670d\u52a1\u3002\u3010\u63a8\u8350\u3011"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-shell",children:"cme smb 172.16.93.2/24   # \u6839\u636e SMB \u63a2\u6d4b\u670d\u52a1\u5668\ncme ssh 172.16.93.2/24   # \u6839\u636e SSH \u63a2\u6d4b\u670d\u52a1\u5668\ncme ldap 172.16.93.2/24  # \u6839\u636e LDAP \u63a2\u6d4b\u670d\u52a1\u5668\ncme mssql 172.16.93.2/24 # \u6839\u636e MSSQL \u63a2\u6d4b\u670d\u52a1\u5668\ncme winrm 172.16.93.2/24  # \u6839\u636e WINRM \u63a2\u6d4b\u670d\u52a1\u5668\n"})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"\u4f7f\u7528MSF\u63a2\u6d4b\u5e38\u7528\u7684\u670d\u52a1\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7\u7aef\u53e3\u63a2\u6d4b\u3002"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-shell",children:"# module\u5217\u8868\nauxiliary/scanner/http/http_version\nauxiliary/scanner/smb/smb_version\nauxiliary/scanner/ftp/ftp_version\nauxiliary/scanner/ssh/ssh_version\nauxiliary/scanner/telnet/telnet_version\nauxiliary/scanner/mysql/mysql_version\nauxiliary/scanner/db2/db2_version\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.h4,{id:"\u591a\u7f51\u5361\u673a\u5668\u63a2\u6d4b",children:"\u591a\u7f51\u5361\u673a\u5668\u63a2\u6d4b"}),"\n",(0,r.jsx)(e.p,{children:"\u5728\u5185\u7f51\u6e17\u900f\u8fc7\u7a0b\u4e2d\uff0c\u76ee\u6807\u7f51\u7edc\u4e2d\u4e00\u822c\u662f\u5212\u5206\u4e0d\u540c\u533a\u57df\u4f7f\u7528\u9632\u706b\u5899\u8fdb\u884c\u9694\u79bb\u7684\u3002\u5728\u65e5\u5e38\u8fd0\u7ef4\u8fc7\u7a0b\u4e2d\uff0c\u8fd0\u7ef4\u4eba\u5458\u4e3a\u4e86\u65b9\u4fbf\u64cd\u4f5c\uff0c\u4f1a\u5c06\u7279\u5b9a\u4e3b\u673a\u914d\u7f6e\u591a\u7f51\u5361\u4ee5\u8bbf\u95ee\u4e0d\u540c\u7f51\u7edc\u533a\u57df\u7684\u673a\u5668\u3002"}),"\n",(0,r.jsx)(e.p,{children:"\u5047\u5982\u673a\u5668A\u901a10.1.0.1/24\u6bb5\uff0c\u4f46\u662f\u4e0d\u901a10.1.1.1/24\u6bb5\uff0c\u800c\u673a\u5668B\u53ef\u4ee5\u540c\u65f6\u901a10.1.0.1/24\u6bb5\u548c10.1.1.1/24\u6bb5\uff0c\u90a3\u4e48\u5bfb\u627e\u5e76\u62ff\u4e0b\u673a\u5668B\u5c31\u53ef\u4ee5\u5b9e\u73b0\u8de8\u7f51\u6bb5\uff0c\u4e5f\u5c31\u53ef\u4ee5\u53d1\u73b0\u66f4\u591a\u7684\u653b\u51fb\u76ee\u6807\uff0c\u6216\u8005\u8bf4\u66f4\u654f\u611f\u7684\u6570\u636e\u3002\uff08\u5982\u4eceDMZ\u8fdb\u5165\u5230\u5185\u7f51\uff09"}),"\n",(0,r.jsxs)(e.p,{children:["\u53ef\u4f7f\u7528\u5de5\u5177 ",(0,r.jsx)(e.a,{href:"https://github.com/uknowsec/SharpOXID-Find/blob/master/bin/Release/SharpOXID-Find.exe",children:"SharpOXID-Find"})," \u8fdb\u884c\u63a2\u6d4b\u3002"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-shell",children:"C:\\Users\\d4m1ts\\Desktop>SharpOXID-Find.exe -c 172.16.93.1/24\n\n[+] ip range 172.16.93.1 - 172.16.93.254\n\n[*] Retrieving network interfaces of  172.16.93.2\n  [>] Address:DESKTOP-9CAT508\n  [>] Address:172.16.93.2\n  [>] Address:fd15:4ba5:5a2b:1008:4446:59a:f9a4:2af8\n  [>] Address:fd15:4ba5:5a2b:1008:44a4:e53c:8e4:d1dd\n\n[*] Retrieving network interfaces of  172.16.93.15\n  [>] Address:PDC\n  [>] Address:172.16.93.15\n  [>] Address:fd15:4ba5:5a2b:1008:dcd:73da:d2f0:3ba1\nFinish!\n"})}),"\n",(0,r.jsx)(e.h4,{id:"netbios\u63a2\u6d4b",children:"NetBIOS\u63a2\u6d4b"}),"\n",(0,r.jsx)(e.p,{children:"\u901a\u8fc7NetBIOS\u534f\u8bae\uff0c\u53ef\u4ee5\u83b7\u53d6\u5185\u7f51\u4e2d\u7684\u4e3b\u673a\u540d\u3001IP\u5730\u5740\u4ee5\u53ca\u5176\u4ed6\u76f8\u5173\u4fe1\u606f\u3002"}),"\n",(0,r.jsxs)(e.p,{children:["\u53ef\u4f7f\u7528\u547d\u4ee4\u884c\u5de5\u5177 ",(0,r.jsx)(e.strong,{children:(0,r.jsx)(e.a,{href:"http://www.unixwiz.net/tools/nbtscan.html",children:"nbtscan"})})," \u8fdb\u884c\u63a2\u6d4b\u3002"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-shell",children:"C:\\Users\\d4m1ts\\Desktop>nbtscan.exe 172.16.93.1/24\nDoing NBT name scan for addresses from 172.16.93.1/24\n\nIP address       NetBIOS Name     Server    User             MAC address\n------------------------------------------------------------------------------\n172.16.93.15     PDC              <server>  <unknown>        00-0c-29-f1-fc-2a\n"})}),"\n",(0,r.jsx)(e.h4,{id:"arp\u63a2\u6d4b",children:"ARP\u63a2\u6d4b"}),"\n",(0,r.jsx)(e.p,{children:"\u4f7f\u7528MSF\u7684arp_sweep\u6a21\u5757\u3002"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-shell",children:"auxiliary/scanner/discovery/arp_sweep\n"})}),"\n",(0,r.jsx)(e.h4,{id:"icmp\u63a2\u6d4b",children:"ICMP\u63a2\u6d4b"}),"\n",(0,r.jsx)(e.p,{children:"\u4f9d\u6b21\u5bf9\u5185\u7f51\u4e2d\u7684\u6bcf\u4e2aIP\u5730\u5740\u6267\u884c ping\u547d\u4ee4\uff0c\u53ef\u4ee5\u5feb\u901f\u6709\u6548\u5730\u627e\u51fa\u5185\u7f51\u4e2d\u6240\u6709\u5b58\u6d3b\u7684\u4e3b\u673a\u3002"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-shell",children:'# windows\nfor /L %I in (1,1,254) DO @ping -w 1 -n 1 192.168.174.%I | findstr "TTL="\nfor /l %i in (1,1,255) do @ping 192.168.100.%i -w 1 -n 1 | find /i "ttl"\n\n# linux\nfor i in 10.28.98.{1..254}; do if ping -c 1 -w 1 $i &>/dev/null; then echo $i is alived; fi; done\n'})}),"\n",(0,r.jsx)(e.h4,{id:"\u7aef\u53e3\u63a2\u6d4b",children:"\u7aef\u53e3\u63a2\u6d4b"}),"\n",(0,r.jsx)(e.p,{children:"\u4e0a\u9762\u7684NetBIOS\u3001ARP\u3001ICMP\u63a2\u6d4b\u5927\u591a\u6570\u60c5\u51b5\u4e0b\u53ea\u80fd\u63a2\u6d4b\u4e3b\u673a\u7684\u5b58\u6d3b\uff0c\u5e76\u65e0\u6cd5\u63a2\u6d4b\u5230\u4e3b\u673a\u4e0a\u6709\u54ea\u4e9b\u670d\u52a1\uff0c\u800c\u6211\u4eec\u77e5\u9053\u8981\u8fdb\u884c\u6a2a\u5411\u80af\u5b9a\u662f\u5bf9\u7279\u5b9a\u670d\u52a1\u8fdb\u884c\u653b\u51fb\uff0c\u5982NTLM\u8ba4\u8bc1\u3001SMB\u3001SqlServer\u3001WEB\u7b49\uff0c\u56e0\u6b64\u8981\u60f3\u5168\u9762\u7684\u83b7\u53d6\u5230\u653b\u51fb\u9762\u5c31\u9700\u8981\u8fdb\u884c\u7aef\u53e3\u626b\u63cf\u3002"}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"\u4f7f\u7528MSF"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-shell",children:"search portscan\n\nauxiliary/scanner/portscan/ack                                     normal  No     TCP ACK Firewall Scanner\nauxiliary/scanner/portscan/tcp                                     normal  No     TCP Port Scanner\nauxiliary/scanner/portscan/syn                                     normal  No     TCP SYN Port Scanner\n"})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:["\u4f7f\u7528PowerSploit\u4e2d\u7684",(0,r.jsx)(e.a,{href:"https://github.com/PowerShellMafia/PowerSploit/blob/master/Recon/Invoke-Portscan.ps1",children:(0,r.jsx)(e.code,{children:"Invoke-Portscan.ps1"})}),"\u811a\u672c"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-shell",children:"Import-Module .\\Invoke-Portscan.ps1\n\nInvoke-Portscan -Hosts 172.16.93.1/24 -T 4 -TopPorts 25 -oA c:\\windows\\temp\\res.txt\nInvoke-Portscan -Hosts 172.16.93.1/24 -T 4 -ports '445,1433,8080,3389,80,22' -oA c:\\windows\\temp\\res.txt\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.h4,{id:"\u7efc\u5408\u5de5\u5177",children:"\u7efc\u5408\u5de5\u5177"}),"\n",(0,r.jsx)(e.p,{children:"\u5982\u679c\u5185\u7f51\u73af\u5883\u4e2d\u6ca1\u6709\u9632\u62a4\uff0c\u6216\u8005\u5728\u5ba2\u6237\u6388\u6743\u52a0\u767d\u7684\u60c5\u51b5\u4e0b\u8fdb\u884c\u6d4b\u8bd5\uff0c\u90a3\u4e48\u53ef\u4ee5\u4f7f\u7528\u4e00\u4e9b\u73b0\u6210\u7684\u5de5\u5177\u8fdb\u884c\u5927\u8303\u56f4\u626b\u63cf\u3002"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"https://github.com/shadow1ng/fscan",children:"fscan"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"https://github.com/k8gege/Ladon",children:"ladon"})}),"\n",(0,r.jsx)(e.li,{children:"..."}),"\n"]})]})}function h(n={}){const{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(t,{...n})}):t(n)}},28453:(n,e,s)=>{s.d(e,{R:()=>d,x:()=>c});var l=s(96540);const r={},i=l.createContext(r);function d(n){const e=l.useContext(i);return l.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:d(n.components),l.createElement(i.Provider,{value:e},n.children)}}}]);