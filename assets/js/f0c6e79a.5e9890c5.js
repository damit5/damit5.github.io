"use strict";(self.webpackChunkblog_source_2025=self.webpackChunkblog_source_2025||[]).push([[8228],{5139:(e,r,n)=>{n.d(r,{A:()=>s});const s=n.p+"assets/images/image-20250718141846169-12ccd2abc24a2f96047db5c4824a5bd1.png"},5486:(e,r,n)=>{n.d(r,{A:()=>s});const s=n.p+"assets/images/image-20250718143133385-3bcd661936827e940e3e2b6124d7e1c6.png"},9780:(e,r,n)=>{n.d(r,{A:()=>s});const s=n.p+"assets/images/image-20250718141927977-2d585929a4b6b4a5ef2e348dfb023485.png"},24895:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>d,contentTitle:()=>t,default:()=>h,frontMatter:()=>l,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"\u6682\u672a\u5206\u7c7b/docker/harbor\u642d\u5efa\u548c\u57fa\u7840\u4f7f\u7528","title":"harbor\u642d\u5efa\u548c\u57fa\u7840\u4f7f\u7528","description":"\u7b80\u4ecb","source":"@site/docs/99.\u6682\u672a\u5206\u7c7b/04.docker/02.harbor\u642d\u5efa\u548c\u57fa\u7840\u4f7f\u7528.md","sourceDirName":"99.\u6682\u672a\u5206\u7c7b/04.docker","slug":"/\u6682\u672a\u5206\u7c7b/docker/harbor\u642d\u5efa\u548c\u57fa\u7840\u4f7f\u7528","permalink":"/docs/\u6682\u672a\u5206\u7c7b/docker/harbor\u642d\u5efa\u548c\u57fa\u7840\u4f7f\u7528","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedBy":"d4m1ts_mini","lastUpdatedAt":1761469028000,"sidebarPosition":2,"frontMatter":{},"sidebar":"knowledgeBaseSidebar","previous":{"title":"docker compose\u6a21\u677f\u6587\u4ef6","permalink":"/docs/\u6682\u672a\u5206\u7c7b/docker/docker compose\u6a21\u677f\u6587\u4ef6"},"next":{"title":"docker\u4f7f\u7528\u6280\u5de7","permalink":"/docs/\u6682\u672a\u5206\u7c7b/docker/docker\u4f7f\u7528\u6280\u5de7"}}');var i=n(74848),c=n(28453);const l={},t=void 0,d={},a=[{value:"\u7b80\u4ecb",id:"\u7b80\u4ecb",level:2},{value:"Docker\u642d\u5efa",id:"docker\u642d\u5efa",level:2},{value:"\u4e0a\u4f20/\u4e0b\u8f7d\u955c\u50cf",id:"\u4e0a\u4f20\u4e0b\u8f7d\u955c\u50cf",level:2},{value:"\u5176\u4ed6",id:"\u5176\u4ed6",level:2}];function o(e){const r={a:"a",admonition:"admonition",code:"code",h2:"h2",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,c.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.h2,{id:"\u7b80\u4ecb",children:"\u7b80\u4ecb"}),"\n",(0,i.jsx)(r.admonition,{type:"info",children:(0,i.jsx)(r.p,{children:"\u5185\u5bb9\u6765\u81eaAI\u603b\u7ed3"})}),"\n",(0,i.jsx)(r.p,{children:"Harbor \u662f\u4e00\u4e2a\u5f00\u6e90\u7684\u4f01\u4e1a\u7ea7\u955c\u50cf\u4ed3\u5e93\uff0c\u5b83\u4e3a\u5bb9\u5668\u955c\u50cf\u548c\u5176\u4ed6\u4e91\u539f\u751f\u5236\u54c1\u63d0\u4f9b\u5b58\u50a8\u3001\u5b89\u5168\u626b\u63cf\u548c\u7ba1\u7406\u529f\u80fd\u3002"}),"\n",(0,i.jsx)(r.p,{children:"Harbor \u6700\u521d\u7531VMware \u5f00\u6e90\uff0c\u73b0\u5728\u662fCNCF \u6258\u7ba1\u9879\u76ee\uff0c\u5176\u4e3b\u8981\u76ee\u6807\u662f\u4e3a\u4f01\u4e1a\u63d0\u4f9b\u4e00\u4e2a\u5b89\u5168\u3001\u53ef\u4fe1\u3001\u9ad8\u6548\u7684\u955c\u50cf\u7ba1\u7406\u5e73\u53f0\u3002"}),"\n",(0,i.jsx)(r.p,{children:"\u4ee5\u4e0b\u662fHarbor \u7684\u4e00\u4e9b\u4e3b\u8981\u7279\u70b9\u548c\u529f\u80fd\uff1a"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:["\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"\u955c\u50cf\u5b58\u50a8\u548c\u7ba1\u7406:"})}),"\n",(0,i.jsx)(r.p,{children:"Harbor \u80fd\u591f\u5b89\u5168\u5730\u5b58\u50a8Docker \u955c\u50cf\u3001Helm charts\u3001CNAB \u5305\u7b49\u4e91\u539f\u751f\u5236\u54c1\uff0c\u5e76\u63d0\u4f9b\u65b9\u4fbf\u7684\u8bbf\u95ee\u548c\u7ba1\u7406\u63a5\u53e3\u3002"}),"\n"]}),"\n",(0,i.jsxs)(r.li,{children:["\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"\u6743\u9650\u63a7\u5236\u548c\u8bbf\u95ee\u7ba1\u7406:"})}),"\n",(0,i.jsx)(r.p,{children:"Harbor \u652f\u6301\u57fa\u4e8e\u89d2\u8272\u7684\u8bbf\u95ee\u63a7\u5236\uff08RBAC\uff09\uff0c\u53ef\u4ee5\u7cbe\u7ec6\u5730\u7ba1\u7406\u7528\u6237\u5bf9\u955c\u50cf\u4ed3\u5e93\u7684\u8bbf\u95ee\u6743\u9650\uff0c\u786e\u4fdd\u955c\u50cf\u7684\u5b89\u5168\u6027\u3002"}),"\n"]}),"\n",(0,i.jsxs)(r.li,{children:["\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"\u955c\u50cf\u590d\u5236\u548c\u5206\u53d1:"})}),"\n",(0,i.jsx)(r.p,{children:"Harbor \u5141\u8bb8\u7528\u6237\u5728\u4e0d\u540c\u7684Harbor \u5b9e\u4f8b\u4e4b\u95f4\u590d\u5236\u955c\u50cf\uff0c\u65b9\u4fbf\u591a\u5730\u90e8\u7f72\u548c\u955c\u50cf\u5206\u53d1\u3002"}),"\n"]}),"\n",(0,i.jsxs)(r.li,{children:["\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"\u955c\u50cf\u626b\u63cf\u548c\u5b89\u5168\u7b56\u7565:"})}),"\n",(0,i.jsx)(r.p,{children:"Harbor \u96c6\u6210\u4e86\u955c\u50cf\u626b\u63cf\u5de5\u5177\uff08\u5982Clair \u6216Trivy\uff09\uff0c\u53ef\u4ee5\u5bf9\u955c\u50cf\u8fdb\u884c\u5b89\u5168\u6f0f\u6d1e\u626b\u63cf\uff0c\u5e2e\u52a9\u7528\u6237\u53d1\u73b0\u548c\u89e3\u51b3\u6f5c\u5728\u7684\u5b89\u5168\u95ee\u9898\u3002"}),"\n"]}),"\n",(0,i.jsxs)(r.li,{children:["\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"\u7528\u6237\u8ba4\u8bc1\u548c\u6388\u6743:"})}),"\n",(0,i.jsx)(r.p,{children:"Harbor \u652f\u6301\u591a\u79cd\u7528\u6237\u8ba4\u8bc1\u65b9\u5f0f\uff0c\u5982LDAP\u3001OIDC \u7b49\uff0c\u53ef\u4ee5\u4e0e\u4f01\u4e1a\u7684\u7528\u6237\u7ba1\u7406\u7cfb\u7edf\u96c6\u6210\u3002"}),"\n"]}),"\n",(0,i.jsxs)(r.li,{children:["\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"\u4e30\u5bcc\u7684UI \u754c\u9762:"})}),"\n",(0,i.jsx)(r.p,{children:"Harbor \u63d0\u4f9b\u76f4\u89c2\u7684Web UI \u754c\u9762\uff0c\u65b9\u4fbf\u7528\u6237\u7ba1\u7406\u548c\u64cd\u4f5c\u955c\u50cf\u4ed3\u5e93\u3002"}),"\n"]}),"\n",(0,i.jsxs)(r.li,{children:["\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"\u591a\u79df\u6237\u652f\u6301:"})}),"\n",(0,i.jsx)(r.p,{children:"Harbor \u901a\u8fc7\u9879\u76ee\u9694\u79bb\uff0c\u652f\u6301\u591a\u79df\u6237\u73af\u5883\uff0c\u65b9\u4fbf\u4e0d\u540c\u56e2\u961f\u6216\u7ec4\u7ec7\u72ec\u7acb\u7ba1\u7406\u5404\u81ea\u7684\u955c\u50cf\u4ed3\u5e93\u3002"}),"\n"]}),"\n",(0,i.jsxs)(r.li,{children:["\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"\u65e5\u5fd7\u5ba1\u8ba1:"})}),"\n",(0,i.jsx)(r.p,{children:"Harbor \u63d0\u4f9b\u8be6\u7ec6\u7684\u64cd\u4f5c\u65e5\u5fd7\u548c\u5ba1\u8ba1\u529f\u80fd\uff0c\u65b9\u4fbf\u7ba1\u7406\u5458\u8ffd\u8e2a\u548c\u5ba1\u8ba1\u7528\u6237\u64cd\u4f5c\u3002"}),"\n"]}),"\n",(0,i.jsxs)(r.li,{children:["\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"Helm Chart \u4ed3\u5e93\u652f\u6301:"})}),"\n",(0,i.jsx)(r.p,{children:"Harbor \u652f\u6301Helm Chart \u4ed3\u5e93\uff0c\u65b9\u4fbf\u7528\u6237\u7ba1\u7406\u548c\u5206\u53d1Helm \u5305\u3002"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(r.p,{children:"\u603b\u800c\u8a00\u4e4b\uff0cHarbor \u662f\u4e00\u4e2a\u529f\u80fd\u5f3a\u5927\u3001\u5b89\u5168\u53ef\u9760\u7684\u4f01\u4e1a\u7ea7\u955c\u50cf\u4ed3\u5e93\uff0c\u5b83\u4e3a\u5bb9\u5668\u5316\u5e94\u7528\u63d0\u4f9b\u4e86\u5168\u9762\u7684\u955c\u50cf\u7ba1\u7406\u548c\u5206\u53d1\u89e3\u51b3\u65b9\u6848"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.a,{href:"https://github.com/goharbor/harbor",children:"Github"})}),"\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.a,{href:"https://goharbor.io/",children:"\u5b98\u7f51"})}),"\n"]}),"\n",(0,i.jsx)(r.h2,{id:"docker\u642d\u5efa",children:"Docker\u642d\u5efa"}),"\n",(0,i.jsxs)(r.p,{children:["\u524d\u5f80 ",(0,i.jsx)(r.a,{href:"https://github.com/goharbor/harbor/releases/latest",children:"https://github.com/goharbor/harbor/releases/latest"})," \u4e0b\u8f7d\u6700\u65b0\u7248\uff0c\u8bb0\u5f97\u9009",(0,i.jsx)(r.code,{children:"offline"}),"\u79bb\u7ebf\u7248\u7684"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-shell",children:"wget https://github.com/goharbor/harbor/releases/download/v2.13.1/harbor-offline-installer-v2.13.1.tgz\n"})}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.img,{alt:"image-20250718140734162",src:n(58457).A+"",width:"3584",height:"2370"})}),"\n",(0,i.jsx)(r.p,{children:"\u4e0b\u8f7d\u540e\u89e3\u538b"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-shell",children:"tar -zxvf harbor-offline-installer-v2.13.1.tgz\n"})}),"\n",(0,i.jsx)(r.p,{children:"\u89e3\u538b\u540e\u4fee\u6539\u914d\u7f6e\u6587\u4ef6\uff1a"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-shell",children:"cd harbor\ncp harbor.yml.tmpl harbor.yml\nvim harbor.yml\n"})}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.code,{children:"harbor.yml"})," \u5185\u5bb9\u4fee\u6539\u5982\u4e0b\uff1a"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-yaml",children:"# \u4fee\u6539hostname\u7684\u503c\uff0c\u5982\u679c\u6ca1\u6709\u57df\u540d\u5c31\u4f7f\u7528\u672c\u673aIP\u5730\u5740\nhostname: 172.20.1.2\n\n# \u914d\u7f6e\u542f\u52a8\u7aef\u53e3\u53f7\n# http related config \nhttp:\n  # port for http, default is 80. If https enabled, this port will redirect to https port\n  port: 9000\n\n# \u5982\u679c\u6ca1\u6709\u7533\u8bf7\u8bc1\u4e66\uff0c\u9700\u8981\u9690\u85cfhttps\n# https:\n  # https port for harbor, default is 443\n#  port: 443\n  # The path of cert and key files for nginx\n#  certificate: /your/certificate/path\n#  private_key: /your/private/key/path\n\n#\u542f\u52a8\u6210\u529f\u540e\uff0cadmin\u7528\u6237\u7684\u767b\u5f55\u5bc6\u7801\nharbor_admin_password: Harbor12345!\n\ndatabase:\n  # \u6570\u636e\u5e93\u5bc6\u7801\n  password: root123!\n"})}),"\n",(0,i.jsxs)(r.p,{children:["\u6267\u884c",(0,i.jsx)(r.code,{children:"install.sh"}),"\u751f\u6210docker-compose\u6587\u4ef6\uff0c\u4ee5\u53ca\u542f\u52a8\u5bb9\u5668\uff1a"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-shell",children:"./install.sh \n"})}),"\n",(0,i.jsxs)(r.p,{children:["\u81f3\u6b64\u8bbf\u95ee ",(0,i.jsx)(r.a,{href:"http://172.20.1.2:9000",children:"http://172.20.1.2:9000"})," \u5373\u53ef\u6b63\u5e38\u8bbf\u95ee\u3002"]}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.img,{alt:"image-20250718141707226",src:n(88593).A+"",width:"5120",height:"1512"})}),"\n",(0,i.jsx)(r.h2,{id:"\u4e0a\u4f20\u4e0b\u8f7d\u955c\u50cf",children:"\u4e0a\u4f20/\u4e0b\u8f7d\u955c\u50cf"}),"\n",(0,i.jsx)(r.p,{children:"\u521b\u5efa\u597d\u9879\u76ee"}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.img,{alt:"image-20250718141846169",src:n(5139).A+"",width:"2978",height:"1082"})}),"\n",(0,i.jsx)(r.p,{children:"\u8fdb\u5165\u9879\u76ee\u540e\uff0c\u53f3\u8fb9\u6709\u6bd4\u8f83\u8be6\u7ec6\u7684\u63a8\u9001\u547d\u4ee4"}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.img,{alt:"image-20250718141927977",src:n(9780).A+"",width:"5114",height:"1996"})}),"\n",(0,i.jsx)(r.p,{children:"\u7406\u8bba\u4e0a\u6309\u7167\u63a8\u9001\u5373\u53ef\uff0c\u4f46\u4e00\u822c\u60c5\u51b5\u4e0b\u6ca1\u914d\u7f6e\u57df\u540d\uff0c\u9700\u8981\u914d\u7f6edocker\u5ffd\u7565\u5b89\u5168\u98ce\u9669\uff0c\u5982\u4e0b\uff1a"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-shell",metastring:'title="vim /etc/docker/daemon.json"',children:'{\n  "insecure-registries":["172.20.1.2:9000"]\n}\n'})}),"\n",(0,i.jsx)(r.p,{children:"\u6b64\u65f6\u5373\u53ef\u4f7f\u7528docker\u767b\u5f55harbor\u4ed3\u5e93\uff0c\u5e76\u6309\u7167\u547d\u4ee4\u63a8\u9001/\u4e0b\u8f7d\u3002"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-shell",children:"docker login 172.20.1.2:9000\ndocker tag rustdesk/rustdesk-server:latest 172.20.1.2:9000/scan/rustdesk-server:1.1\ndocker push 172.20.1.2:9000/scan/rustdesk-server:1.1\ndocker pull 172.20.1.2:9000/scan/rustdesk-server@sha256:3960fae20f3af2af671d6800fa6e8a52d70367879716c8b6e53f55044dc4d837\n"})}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.img,{alt:"image-20250718142859819",src:n(31588).A+"",width:"1588",height:"340"})}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.img,{alt:"image-20250718143133385",src:n(5486).A+"",width:"5120",height:"1300"})}),"\n",(0,i.jsx)(r.h2,{id:"\u5176\u4ed6",children:"\u5176\u4ed6"}),"\n",(0,i.jsxs)(r.p,{children:["\u5982\u679c\u9700\u8981\u4f7f\u7528\u7eaf\u547d\u4ee4\u884c\u8fdb\u884charbor\u64cd\u4f5c\uff0c\u53ef\u53c2\u8003\u5b98\u65b9\u63d0\u4f9b\u7684cli\uff1a",(0,i.jsx)(r.a,{href:"https://github.com/goharbor/harbor-cli%EF%BC%8C%E5%A6%82%E4%B8%8B%E5%91%BD%E4%BB%A4%E5%88%97%E5%87%BA",children:"https://github.com/goharbor/harbor-cli\uff0c\u5982\u4e0b\u547d\u4ee4\u5217\u51fa"})," ",(0,i.jsx)(r.code,{children:"scan/rustdesk-server"})," \u7684\u7248\u672c\uff1a"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{children:"harbor artifact list scan/rustdesk-server\n"})})]})}function h(e={}){const{wrapper:r}={...(0,c.R)(),...e.components};return r?(0,i.jsx)(r,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}},28453:(e,r,n)=>{n.d(r,{R:()=>l,x:()=>t});var s=n(96540);const i={},c=s.createContext(i);function l(e){const r=s.useContext(c);return s.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function t(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),s.createElement(c.Provider,{value:r},e.children)}},31588:(e,r,n)=>{n.d(r,{A:()=>s});const s=n.p+"assets/images/image-20250718142859819-d7f7496c288cb0d20bffcff062a2b009.png"},58457:(e,r,n)=>{n.d(r,{A:()=>s});const s=n.p+"assets/images/image-20250718140734162-bb0e938fd2109cb79f1fb3715675a1fb.png"},88593:(e,r,n)=>{n.d(r,{A:()=>s});const s=n.p+"assets/images/image-20250718141707226-79d56fbacf0d490a1bd16a6f4fed17e9.png"}}]);