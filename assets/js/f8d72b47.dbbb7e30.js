"use strict";(self.webpackChunkblog_source_2025=self.webpackChunkblog_source_2025||[]).push([[2389],{8735:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>d,contentTitle:()=>c,default:()=>h,frontMatter:()=>i,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"\u6e17\u900f\u6d4b\u8bd5/C2/CS/\u542f\u52a8","title":"\u542f\u52a8","description":"\u542f\u52a8","source":"@site/docs/01.\u6e17\u900f\u6d4b\u8bd5/10.C2/01.CS/3.\u542f\u52a8.md","sourceDirName":"01.\u6e17\u900f\u6d4b\u8bd5/10.C2/01.CS","slug":"/\u6e17\u900f\u6d4b\u8bd5/C2/CS/\u542f\u52a8","permalink":"/docs/\u6e17\u900f\u6d4b\u8bd5/C2/CS/\u542f\u52a8","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedBy":"d4m1ts","lastUpdatedAt":1748784450000,"sidebarPosition":3,"frontMatter":{},"sidebar":"knowledgeBaseSidebar","previous":{"title":"Malleable-C2-Profiles","permalink":"/docs/\u6e17\u900f\u6d4b\u8bd5/C2/CS/Malleable-C2-Profiles"},"next":{"title":"\u76ee\u5f55\u548c\u83dc\u5355\u4e2d\u6587\u8bf4\u660e","permalink":"/docs/\u6e17\u900f\u6d4b\u8bd5/C2/CS/\u76ee\u5f55\u548c\u83dc\u5355\u4e2d\u6587\u8bf4\u660e"}}');var t=n(74848),l=n(28453);const i={},c=void 0,d={},o=[{value:"\u542f\u52a8",id:"\u542f\u52a8",level:2},{value:"\u542f\u52a8\u51c6\u5907",id:"\u542f\u52a8\u51c6\u5907",level:3},{value:"\u73af\u5883\u9700\u6c42",id:"\u73af\u5883\u9700\u6c42",level:4},{value:"\u6ce8\u610f",id:"\u6ce8\u610f",level:4},{value:"\u542f\u52a8Cobalt Strike",id:"\u542f\u52a8cobalt-strike",level:3},{value:"teamserver",id:"teamserver",level:4},{value:"Cobalt Strike Client",id:"cobalt-strike-client",level:4},{value:"\u7b80\u5355\u7684\u4e0a\u7ebf",id:"\u7b80\u5355\u7684\u4e0a\u7ebf",level:3},{value:"\u751f\u6210\u5e26\u653b\u51fb\u7684\u9493\u9c7c\u7f51\u7ad9",id:"\u751f\u6210\u5e26\u653b\u51fb\u7684\u9493\u9c7c\u7f51\u7ad9",level:3}];function a(e){const s={blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",h4:"h4",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.h2,{id:"\u542f\u52a8",children:"\u542f\u52a8"}),"\n",(0,t.jsx)(s.h3,{id:"\u542f\u52a8\u51c6\u5907",children:"\u542f\u52a8\u51c6\u5907"}),"\n",(0,t.jsx)(s.h4,{id:"\u73af\u5883\u9700\u6c42",children:"\u73af\u5883\u9700\u6c42"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"java\u73af\u5883 ( \u6709jvm.dll\u7684\u624d\u884c )"}),"\n",(0,t.jsxs)(s.li,{children:["\u8bc1\u4e66",(0,t.jsx)(s.code,{children:"cobaltstrike.store "})]}),"\n"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:' # \u751f\u6210\u8bc1\u4e66\uff0c\u6700\u597d\u5185\u5bb9\u4e0d\u8981\u548cCS\u6709\u5173\nkeytool -keystore ./cobaltstrike.store -storepass 123456 -keypass 123456 -genkey -keyalg RSA -alias cobaltstrike -dname "CN=Major Cobalt Strike, OU=AdvancedPenTesting, O=cobaltstrike, L=Somewhere, S=Cyberspac\n\n# \u8f6c\u6362\u6210\u6807\u51c6\u683c\u5f0f\nkeytool -importkeystore -srckeystore ./cobaltstrike.store -destkeystore ./cobaltstrike.store -deststoretype pkcs12\n'})}),"\n",(0,t.jsx)(s.h4,{id:"\u6ce8\u610f",children:"\u6ce8\u610f"}),"\n",(0,t.jsxs)(s.blockquote,{children:["\n",(0,t.jsxs)(s.p,{children:["teamserver.bat \u6700\u540e\u9762\u4e00\u884c\u7684 ssl\u8bc1\u4e66\u5bc6\u7801 \u5fc5\u987b\u8981\u548c\u751f\u6210\u8bc1\u4e66\u7684\u65f6\u5019\u7528\u7684 \u5bc6\u7801 ",(0,t.jsx)(s.strong,{children:"\u4e00\u6837"}),"\uff0c\u6bd4\u5982\u6211\u7528\u7684123456\uff0c\u6700\u540e\u5c31\u8981\u4fee\u6539\u6210 ",(0,t.jsx)(s.code,{children:"ssl.keyStorePassword=123456"})]}),"\n",(0,t.jsx)(s.p,{children:"teamserver.bat \u53ef\u4ee5\u4fee\u6539cs\u7684\u7aef\u53e3"}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"\u542f\u52a8cobalt-strike",children:"\u542f\u52a8Cobalt Strike"}),"\n",(0,t.jsx)(s.h4,{id:"teamserver",children:"teamserver"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.strong,{children:"\u5fc5\u987b\u8981root\u6216\u8005\u7ba1\u7406\u5458\u6743\u9650"})}),"\n"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:"teamserver \u670d\u52a1\u5668IP\u5730\u5740 \u5bc6\u7801 data.profile\n"})}),"\n",(0,t.jsx)(s.p,{children:"\u56e2\u961f\u670d\u52a1\u5668\u6709\u4e24\u4e2a\u5fc5\u8981\u53c2\u6570\u548c\u4e24\u4e2a\u53ef\u9009\u53c2\u6570\u3002"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.strong,{children:"\u7b2c\u4e00\u4e2a\u662f\u56e2\u961f\u670d\u52a1\u5668\u7684 IP \u5730\u5740\u3002Cobalt Strike \u4f7f\u7528\u6b64\u503c\u4f5c\u4e3a\u5176\u9ed8\u8ba4\u7684\u670d\u52a1\u5668\u4e3b\u673a\u3002"})}),"\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.strong,{children:"\u7b2c\u4e8c\u4e2a\u662f\u60a8\u7684\u56e2\u961f\u6210\u5458\u7528\u4e8e\u5c06 Cobalt Strike \u5ba2\u6237\u7aef\u8fde\u63a5\u5230\u56e2\u961f\u670d\u52a1\u5668\u7684\u5bc6\u7801\u3002"})}),"\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.strong,{children:"\u7b2c\u4e09\u4e2a\u53c2\u6570\u662f\u53ef\u9009\u7684\u3002\u6b64\u53c2\u6570\u6307\u5b9a Malleable C2 \u901a\u4fe1\u914d\u7f6e\u6587\u4ef6\u3002"})}),"\n",(0,t.jsx)(s.li,{children:"\u7b2c\u56db\u4e2a\u53c2\u6570\u4e5f\u662f\u53ef\u9009\u7684\u3002\u6b64\u53c2\u6570\u6307\u5b9a\u4ee5 YYYY-MM-DD \u4e3a\u683c\u5f0f\u7684\u7ed3\u675f\u65e5\u671f\u3002\u56e2\u961f\u670d\u52a1\u5668\u4f1a\u5c06\u6b64\u7ed3\u675f\u65e5\u671f\u5d4c\u5165\u5176\u751f\u6210\u7684\u6bcf\u4e2a Beacon \u4e2d\u3002Beacon \u6709\u6548\u8d1f\u8f7d\u5c06\u62d2\u7edd\u5728\u6b64\u7ed3\u675f\u65e5\u671f\u6216\u4e4b\u540e\u8fd0\u884c\u3002\u5982\u679c Beacon \u6709\u6548\u8f7d\u8377\u5728\u6b64\u7ed3\u675f\u65e5\u671f\u6216\u4e4b\u540e\u5524\u9192\uff0c\u5b83\u4e5f\u5c06\u88ab\u8fd0\u884c\u9000\u51fa\u3002"}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:"\u5f53\u56e2\u961f\u670d\u52a1\u5668\u542f\u52a8\u65f6\uff0c\u5b83\u5c06\u53d1\u5e03\u56e2\u961f\u670d\u52a1\u5668 SSL \u8bc1\u4e66\u7684 SHA256 \u54c8\u5e0c\u503c\u3002\u60a8\u5e94\u8be5\u5c06\u6b64\u54c8\u5e0c\u503c\u5206\u53d1\u7ed9\u60a8\u7684\u56e2\u961f\u6210\u5458\u3002\u5f53\u60a8\u7684\u56e2\u961f\u6210\u5458\u8fde\u63a5\u65f6\uff0cCobalt Strike \u5ba2\n\u6237\u7aef\u4f1a\u518d\u5411\u56e2\u961f\u670d\u52a1\u5668\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\u4e4b\u524d\u8be2\u95ee\u662f\u5426\u9a8c\u8bc1\u6b64\u54c8\u5e0c\u3002\u8fd9\u662f\u9632\u6b62\u4e2d\u95f4\u4eba\u653b\u51fb\u7684\u91cd\u8981\u4fdd\u62a4"}),"\n",(0,t.jsx)(s.h4,{id:"cobalt-strike-client",children:"Cobalt Strike Client"}),"\n",(0,t.jsx)(s.p,{children:"\u53cc\u51fb\u542f\u52a8\u7684exe\uff0c\u7136\u540e\u8f93\u5165teamserver\u4e2d\u8bbe\u7f6e\u7684\u7aef\u53e3\uff0c\u548c\u542f\u52a8\u65f6\u8bbe\u7f6e\u7684\u5bc6\u7801\u5373\u53ef"}),"\n",(0,t.jsx)(s.p,{children:"\u5982\u679c\u8fd9\u662f\u60a8\u4e0e\u6b64\u56e2\u961f\u670d\u52a1\u5668\u7684\u7b2c\u4e00\u6b21\u8fde\u63a5\uff0cCobalt Strike\u5c06\u8be2\u95ee\u60a8\u662f\u5426\u8bc6\u522b\u6b64\u56e2\u961f\u670d\u52a1\u5668\u7684 SSL \u8bc1\u4e66\u7684 SHA256 \u54c8\u5e0c\u503c\u3002\u5982\u679c\u9700\u8981\uff0c\u8bf7\u70b9\u51fb OK\uff0cCobalt Strike \u5ba2\u6237\u7aef\u5c06\u8fde\u63a5\u5230\u670d\u52a1\u5668\u3002Cobalt Strike \u8fd8\u4f1a\u8bb0\u4f4f\u8fd9\u4e2aSHA256 \u54c8\u5e0c\uff0c\u4ee5\u4fbf\u4ee5\u540e\u65b9\u4fbf\u8fde\u63a5\u3002"}),"\n",(0,t.jsxs)(s.p,{children:["\u53ef\u4ee5\u901a\u8fc7 ",(0,t.jsx)(s.strong,{children:"Cobalt Strike - > Preferences - > Fingerprints"})," \u7ba1\u7406\u8fd9\u4e9b\u54c8\u5e0c\u503c\u3002"]}),"\n",(0,t.jsxs)(s.p,{children:["Cobalt Strike \u4f1a\u8ddf\u8e2a\u60a8\u8fde\u63a5\u7684\u56e2\u961f\u670d\u52a1\u5668\u5e76\u8bb0\u4f4f\u60a8\u7684\u4fe1\u606f\u3002\u4ece\u8fde\u63a5\u5bf9\u8bdd\u6846\u7684\u5de6\u4fa7\u9009\u62e9\u5176\u4e2d\u4e00\u4e2a\u56e2\u961f\u670d\u52a1\u5668\u914d\u7f6e\u6587\u4ef6\uff0c\u4ee5\u4f7f\u7528\u5176\u4fe1\u606f\u81ea\u52a8\u586b\u5145\u8fde\u63a5\u5bf9\u8bdd\u6846\u3002\u60a8\u4e5f\u53ef\u4ee5\u901a\u8fc7 ",(0,t.jsx)(s.strong,{children:"Cobalt Strike - > Preferences - > Team Servers"})," \u4fee\u6539\u6b64\u8fde\u63a5\u3002"]}),"\n",(0,t.jsx)(s.h3,{id:"\u7b80\u5355\u7684\u4e0a\u7ebf",children:"\u7b80\u5355\u7684\u4e0a\u7ebf"}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["\u5f00\u542f\u76d1\u542c ",(0,t.jsx)(s.code,{children:"Listeners"})]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:"\u751f\u6210exe"}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:"\u8bbf\u95ee\u4e0a\u7ebf"}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"\u751f\u6210\u5e26\u653b\u51fb\u7684\u9493\u9c7c\u7f51\u7ad9",children:"\u751f\u6210\u5e26\u653b\u51fb\u7684\u9493\u9c7c\u7f51\u7ad9"}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"Attacks --\x3e Packages --\x3e HTML Application"})," \u751f\u6210\u6076\u610f\u7684HTML\u5e94\u7528hta"]}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.img,{src:n(34784).A+"",width:"1591",height:"528"})}),"\n",(0,t.jsxs)(s.ol,{start:"2",children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"Attacks --\x3e Web Drive-by --\x3e Host File"})," \u6258\u7ba1\u521a\u624d\u7684\u6076\u610f\u6587\u4ef6"]}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.img,{src:n(15904).A+"",width:"754",height:"506"})}),"\n",(0,t.jsxs)(s.ol,{start:"3",children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"Attacks --\x3e Web Drive-by --\x3e Clone Site"})," \u514b\u9686\u7f51\u7ad9\u9009\u9879"]}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.img,{src:n(73733).A+"",width:"1645",height:"521"})}),"\n",(0,t.jsxs)(s.ol,{start:"4",children:["\n",(0,t.jsx)(s.li,{children:"\u7136\u540e\u5c31\u53ef\u4ee5\u5f00\u59cb\u9493\u9c7c\u4e86"}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.img,{src:n(75841).A+"",width:"590",height:"408"})}),"\n",(0,t.jsxs)(s.ol,{start:"5",children:["\n",(0,t.jsxs)(s.li,{children:["\u8bbf\u95ee\u9493\u9c7c\u94fe\u63a5\uff0c\u5373\u53ef\u770b\u5230\u63d0\u793a\u4e0b\u8f7d\u6076\u610f\u6587\u4ef6\uff0c\u5728 ",(0,t.jsx)(s.code,{children:"View --\x3e Web Log"})," \u91cc\u9762\u53ef\u4ee5\u770b\u5230web\u65e5\u5fd7\u548c\u952e\u76d8\u8bb0\u5f55\u7684\u5185\u5bb9"]}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.img,{src:n(17675).A+"",width:"1351",height:"558"})})]})}function h(e={}){const{wrapper:s}={...(0,l.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}},15904:(e,s,n)=>{n.d(s,{A:()=>r});const r=n.p+"assets/images/15814963700909851367-7ae10e8dff519a60d3a055d81aa3b7bc.png"},17675:(e,s,n)=>{n.d(s,{A:()=>r});const r=n.p+"assets/images/15814963702532787937-56b0caeece1216a53497cf0851d55b83.png"},28453:(e,s,n)=>{n.d(s,{R:()=>i,x:()=>c});var r=n(96540);const t={},l=r.createContext(t);function i(e){const s=r.useContext(l);return r.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function c(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),r.createElement(l.Provider,{value:s},e.children)}},34784:(e,s,n)=>{n.d(s,{A:()=>r});const r=n.p+"assets/images/158149636932403668671-5764a33ae920bba58e357fec4cadadfe.png"},73733:(e,s,n)=>{n.d(s,{A:()=>r});const r=n.p+"assets/images/158149637014484147112-87ea39d0efb8f8a099d0e3bfbee37e4e.png"},75841:(e,s,n)=>{n.d(s,{A:()=>r});const r=n.p+"assets/images/15814963702362925327-35e408513880641aef9fb170caaa972c.png"}}]);