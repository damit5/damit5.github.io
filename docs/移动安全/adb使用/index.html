<!doctype html>
<html lang="zh-Hans" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-移动安全/adb使用/README" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">ADB使用 | d4m1ts 知识库</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://blog.gm7.org/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://blog.gm7.org/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://blog.gm7.org/docs/移动安全/adb使用/"><meta data-rh="true" property="og:locale" content="zh_Hans"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="ADB使用 | d4m1ts 知识库"><meta data-rh="true" name="description" content="ADB介绍"><meta data-rh="true" property="og:description" content="ADB介绍"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://blog.gm7.org/docs/移动安全/adb使用/"><link data-rh="true" rel="alternate" href="https://blog.gm7.org/docs/移动安全/adb使用/" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://blog.gm7.org/docs/移动安全/adb使用/" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://0LMFVYF6KV-dsn.algolia.net" crossorigin="anonymous"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"ADB使用","item":"https://blog.gm7.org/docs/移动安全/adb使用/"}]}</script><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="d4m1ts 知识库 RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="d4m1ts 知识库 Atom Feed">




<link rel="search" type="application/opensearchdescription+xml" title="d4m1ts 知识库" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.933499b4.css">
<script src="/assets/js/runtime~main.188591bd.js" defer="defer"></script>
<script src="/assets/js/main.f3e1b88f.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/logo.svg"><div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate"></b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/intro">知识库</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/damit5/damit5.github.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="切换浅色/暗黑模式（当前为system mode）"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="搜索 (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">搜索</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/渗透测试/">渗透测试</a><button aria-label="展开侧边栏分类 &#x27;渗透测试&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/代码审计/">代码审计</a><button aria-label="展开侧边栏分类 &#x27;代码审计&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/编程开发/GO/GO基础/">编程开发</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/category/前置基础知识">移动安全</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/category/前置基础知识">前置基础知识</a><button aria-label="展开侧边栏分类 &#x27;前置基础知识&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/移动安全/adb使用/">ADB使用</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/移动安全/drozer测试四大组件/">Drozer测试四大组件</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/category/frida-hook">frida-hook</a><button aria-label="展开侧边栏分类 &#x27;frida-hook&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/category/xposed-hook">xposed-hook</a><button aria-label="展开侧边栏分类 &#x27;xposed-hook&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/移动安全/mobsf-漏扫/">Mobsf-漏扫</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/移动安全/移动端各种方式抓包/">移动端各种方式抓包</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/category/高阶技巧">高阶技巧</a><button aria-label="展开侧边栏分类 &#x27;高阶技巧&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/category/游戏安全">游戏安全</a><button aria-label="展开侧边栏分类 &#x27;游戏安全&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/category/常规测试流程">常规测试流程</a><button aria-label="展开侧边栏分类 &#x27;常规测试流程&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/category/杂项-1">杂项</a><button aria-label="展开侧边栏分类 &#x27;杂项&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/应急响应/简介/">应急响应</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/category/日常使用">AI</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/暂未分类/自建网盘/h5ai/">暂未分类</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/致谢">致谢</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/更新日志">更新日志</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_z5aJ"><div class="docItemContainer_c0TR"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="页面路径"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">移动安全</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">ADB使用</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_bxCs"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>ADB使用</h1></header>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="adb介绍">ADB介绍<a href="#adb介绍" class="hash-link" aria-label="ADB介绍的直接链接" title="ADB介绍的直接链接">​</a></h2>
<p>adb（Android Debug Bridge）是一种用于在 Android  设备和计算机之间通信的命令行工具。它可以用于调试应用程序、安装应用程序、备份和恢复设备数据、在设备和计算机之间复制文件等。使用  adb，开发人员可以在连接到设备时运行各种命令来执行各种任务。adb 是 Android SDK（Software Development  Kit）的一部分。</p>
<p>安装：</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">brew cask </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> android-platform-tools</span><br></span></code></pre></div></div>
<p>推荐文档：</p>
<ul>
<li><a href="https://adbshell.com/commands" target="_blank" rel="noopener noreferrer">https://adbshell.com/commands</a></li>
<li><a href="https://github.com/mzlogin/awesome-adb" target="_blank" rel="noopener noreferrer">https://github.com/mzlogin/awesome-adb</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="测试环境">测试环境<a href="#测试环境" class="hash-link" aria-label="测试环境的直接链接" title="测试环境的直接链接">​</a></h2>
<p>网易mumu 1.9.55 (20211206)</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="基础使用">基础使用<a href="#基础使用" class="hash-link" aria-label="基础使用的直接链接" title="基础使用的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="基本语法">基本语法<a href="#基本语法" class="hash-link" aria-label="基本语法的直接链接" title="基本语法的直接链接">​</a></h3>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">adb </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">-d</span><span class="token operator" style="color:#393A34">|</span><span class="token plain">-e</span><span class="token operator" style="color:#393A34">|</span><span class="token plain">-s </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">serialNumber</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">command</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre></div></div>
<p>如果只有一个设备/模拟器连接时，可以省略掉 <code>[-d|-e|-s &lt;serialNumber&gt;]</code> 这一部分，直接使用 <code>adb &lt;command&gt;</code>。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="连接指定设备">连接指定设备<a href="#连接指定设备" class="hash-link" aria-label="连接指定设备的直接链接" title="连接指定设备的直接链接">​</a></h3>
<p>如果有多个设备/模拟器连接，则需要为命令指定目标设备。</p>
<table><thead><tr><th>参数</th><th>含义</th></tr></thead><tbody><tr><td>-d</td><td>指定当前唯一通过 USB 连接的 Android 设备为命令目标（表示连接的是安卓开发者模式的设备）</td></tr><tr><td>-e</td><td>指定当前唯一运行的模拟器为命令目标（表示连接的是模拟器）</td></tr><tr><td><code>-s &lt;serialNumber&gt;</code></td><td>指定相应 serialNumber 号的设备/模拟器为命令目标</td></tr></tbody></table>
<p>一般用<code>-s</code>来指定目标连接</p>
<p>先用如下命令获取设备列表：</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ adb devices</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">List of devices attached</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">emulator-5554	device</span><br></span></code></pre></div></div>
<p>然后<code>-s</code>指定即可</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">adb </span><span class="token parameter variable" style="color:#36acaa">-s</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;emulator-5554&#x27;</span><span class="token plain"> shell </span><span class="token function" style="color:#d73a49">whoami</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="启动停止">启动/停止<a href="#启动停止" class="hash-link" aria-label="启动/停止的直接链接" title="启动/停止的直接链接">​</a></h3>
<blockquote>
<p>一般无需手动执行此命令，在运行 adb 命令时若发现 adb server 没有启动会自动调起。</p>
</blockquote>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">adb kill-server </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> adb start-server</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="版本">版本<a href="#版本" class="hash-link" aria-label="版本的直接链接" title="版本的直接链接">​</a></h3>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">adb version</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="以root权限运行adbd">以root权限运行adbd<a href="#以root权限运行adbd" class="hash-link" aria-label="以root权限运行adbd的直接链接" title="以root权限运行adbd的直接链接">​</a></h3>
<p>adb 的运行原理是 PC 端的 adb server 与手机端的守护进程 adbd 建立连接，然后 PC 端的 adb client 通过 adb server 转发命令，adbd 接收命令后解析运行。</p>
<blockquote>
<p>adbd代表“Android Debug Bridge Daemon”，是运行在Android设备上的后台进程，它与Android Debug Bridge（ADB）客户端通信，允许开发人员以调试模式与设备进行通信。</p>
<p>adbd在Android系统中扮演着非常重要的角色，它允许开发人员访问设备的shell，传输文件，安装和调试应用程序，以及访问各种诊断和性能分析工具。</p>
</blockquote>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># 切换root权限执行</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">adb root</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 切换非root权限执行</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">adb unroot</span><br></span></code></pre></div></div>
<p>如果提示<code>adbd cannot run as root in production builds</code>，那么下载adbd-Insecure.apk</p>
<p>下载地址：<a href="https://github.com/wuxianlin/android_tools/blob/master/adbd-Insecure-v2.00.apk" target="_blank" rel="noopener noreferrer">https://github.com/wuxianlin/android_tools/blob/master/adbd-Insecure-v2.00.apk</a></p>
<p>下载安装好后打开，勾选<code>Enable insecure adbd</code> 和<code>Enable at boot</code>即可。</p>
<blockquote>
<p>还是不能解决建议放弃，坑太多了，改debug配置文件改了也没用。</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="指定adb-server的网络端口">指定adb server的网络端口<a href="#指定adb-server的网络端口" class="hash-link" aria-label="指定adb server的网络端口的直接链接" title="指定adb server的网络端口的直接链接">​</a></h3>
<blockquote>
<p>默认端口为 5037。</p>
</blockquote>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">adb </span><span class="token parameter variable" style="color:#36acaa">-P</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">port</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> start-server</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="应用管理">应用管理<a href="#应用管理" class="hash-link" aria-label="应用管理的直接链接" title="应用管理的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="查看应用列表">查看应用列表<a href="#查看应用列表" class="hash-link" aria-label="查看应用列表的直接链接" title="查看应用列表的直接链接">​</a></h3>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">adb shell pm list packages</span><br></span></code></pre></div></div>
<blockquote>
<p><code>pm</code>是一个缩写词，代表“包管理器（package manager）”。包管理器是一个系统级服务，它负责管理应用程序的安装、卸载、更新、清除和查询等操作。</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">adb shell pm </span><span class="token builtin class-name">help</span><br></span></code></pre></div></div>
</blockquote>
<p>上面的结果返回所有的应用，可以通过特定参数添加一些过滤条件</p>
<table><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td><code>-f</code></td><td>显示应用程序的安装位置。</td></tr><tr><td><code>-d</code></td><td>只列出已禁用的应用程序。</td></tr><tr><td><code>-e</code></td><td>只列出已启用的应用程序。</td></tr><tr><td><code>-s</code></td><td>只列出系统应用程序。</td></tr><tr><td><code>-3</code></td><td>只列出第三方应用程序。</td></tr><tr><td><code>-i</code></td><td>显示应用的 installer。</td></tr><tr><td><code>-u</code></td><td>包含已卸载应用。</td></tr><tr><td><code>&lt;FILTER&gt;</code></td><td>包名包含 <code>&lt;FILTER&gt;</code> 字符串</td></tr></tbody></table>
<p>举例如下：</p>
<ul>
<li>
<p>查询设备上所有已启用的第三方应用程序的包名列表</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">adb shell pm list packages </span><span class="token parameter variable" style="color:#36acaa">-e</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-3</span><br></span></code></pre></div></div>
</li>
<li>
<p>查询带有<code>shadow</code>的包名</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">adb shell pm list packages shadow</span><br></span></code></pre></div></div>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="查看应用安装路径">查看应用安装路径<a href="#查看应用安装路径" class="hash-link" aria-label="查看应用安装路径的直接链接" title="查看应用安装路径的直接链接">​</a></h3>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">adb shell pm path </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">PACKAGE</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre></div></div>
<ul>
<li><code>&lt;PACKAGE&gt;</code>为包名</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="清除应用数据与缓存">清除应用数据与缓存<a href="#清除应用数据与缓存" class="hash-link" aria-label="清除应用数据与缓存的直接链接" title="清除应用数据与缓存的直接链接">​</a></h3>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">adb shell pm </span><span class="token function" style="color:#d73a49">clear</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">packagename</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre></div></div>
<p><code>&lt;packagename&gt;</code> 表示应用名包，这条命令的效果相当于在设置里的应用信息界面点击了「清除缓存」和「清除数据」。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="安装apk">安装APK<a href="#安装apk" class="hash-link" aria-label="安装APK的直接链接" title="安装APK的直接链接">​</a></h3>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">adb </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">-lrtsdg</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">--instant</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> PACKAGE</span><br></span></code></pre></div></div>
<p>也可以通过一些参数来控制安装 APK 的行为</p>
<table><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td><code>-l</code></td><td>将应用安装到保护目录 /mnt/asec</td></tr><tr><td><code>-r</code></td><td>重新安装已经安装的应用程序，保留其数据。（覆盖安装）</td></tr><tr><td><code>-t</code></td><td>允许安装 AndroidManifest.xml 里 application 指定 <code>android:testOnly=&quot;true&quot;</code> 的应用。（在安装应用程序时允许测试 APK）</td></tr><tr><td><code>-s</code></td><td>将应用程序安装到 SD 卡上（仅适用于 Android 2.2 及更高版本）。</td></tr><tr><td><code>-d</code></td><td>允许降级覆盖安装。</td></tr><tr><td><code>-g</code></td><td>授予所有运行时权限。</td></tr><tr><td><code>--instant</code></td><td>作为临时应用安装</td></tr></tbody></table>
<p>例如：</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">adb </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-r</span><span class="token plain"> xxx.apk</span><br></span></code></pre></div></div>
<p>安装的一些常见错误情况和说明如下：</p>
<table><thead><tr><th>输出</th><th>含义</th><th>解决办法</th></tr></thead><tbody><tr><td>INSTALL_FAILED_ALREADY_EXISTS</td><td>应用已经存在，或卸载了但没卸载干净</td><td><code>adb install</code> 时使用 <code>-r</code> 参数，或者先 <code>adb uninstall &lt;packagename&gt;</code> 再安装</td></tr><tr><td>INSTALL_FAILED_INVALID_APK</td><td>无效的 APK 文件</td><td></td></tr><tr><td>INSTALL_FAILED_INVALID_URI</td><td>无效的 APK 文件名</td><td>确保 APK 文件名里无中文</td></tr><tr><td>INSTALL_FAILED_INSUFFICIENT_STORAGE</td><td>空间不足</td><td>清理空间</td></tr><tr><td>INSTALL_FAILED_DUPLICATE_PACKAGE</td><td>已经存在同名程序</td><td></td></tr><tr><td>INSTALL_FAILED_NO_SHARED_USER</td><td>请求的共享用户不存在</td><td></td></tr><tr><td>INSTALL_FAILED_UPDATE_INCOMPATIBLE</td><td>以前安装过同名应用，但卸载时数据没有移除；或者已安装该应用，但签名不一致</td><td>先 <code>adb uninstall &lt;packagename&gt;</code> 再安装</td></tr><tr><td>INSTALL_FAILED_SHARED_USER_INCOMPATIBLE</td><td>请求的共享用户存在但签名不一致</td><td></td></tr><tr><td>INSTALL_FAILED_MISSING_SHARED_LIBRARY</td><td>安装包使用了设备上不可用的共享库</td><td></td></tr><tr><td>INSTALL_FAILED_REPLACE_COULDNT_DELETE</td><td>替换时无法删除</td><td></td></tr><tr><td>INSTALL_FAILED_DEXOPT</td><td>dex 优化验证失败或空间不足</td><td></td></tr><tr><td>INSTALL_FAILED_OLDER_SDK</td><td>设备系统版本低于应用要求</td><td></td></tr><tr><td>INSTALL_FAILED_CONFLICTING_PROVIDER</td><td>设备里已经存在与应用里同名的 content provider</td><td></td></tr><tr><td>INSTALL_FAILED_NEWER_SDK</td><td>设备系统版本高于应用要求</td><td></td></tr><tr><td>INSTALL_FAILED_TEST_ONLY</td><td>应用是 test-only 的，但安装时没有指定 <code>-t</code> 参数</td><td></td></tr><tr><td>INSTALL_FAILED_CPU_ABI_INCOMPATIBLE</td><td>包含不兼容设备 CPU 应用程序二进制接口的 native code</td><td></td></tr><tr><td>INSTALL_FAILED_MISSING_FEATURE</td><td>应用使用了设备不可用的功能</td><td></td></tr><tr><td>INSTALL_FAILED_CONTAINER_ERROR</td><td>1. sdcard 访问失败; 2. 应用签名与 ROM 签名一致，被当作内置应用。</td><td>1. 确认 sdcard 可用，或者安装到内置存储; 2. 打包时不与 ROM 使用相同签名。</td></tr><tr><td>INSTALL_FAILED_INVALID_INSTALL_LOCATION</td><td>1. 不能安装到指定位置; 2. 应用签名与 ROM 签名一致，被当作内置应用。</td><td>1. 切换安装位置，添加或删除 <code>-s</code> 参数; 2. 打包时不与 ROM 使用相同签名。</td></tr><tr><td>INSTALL_FAILED_MEDIA_UNAVAILABLE</td><td>安装位置不可用</td><td>一般为 sdcard，确认 sdcard 可用或安装到内置存储</td></tr><tr><td>INSTALL_FAILED_VERIFICATION_TIMEOUT</td><td>验证安装包超时</td><td></td></tr><tr><td>INSTALL_FAILED_VERIFICATION_FAILURE</td><td>验证安装包失败</td><td></td></tr><tr><td>INSTALL_FAILED_PACKAGE_CHANGED</td><td>应用与调用程序期望的不一致</td><td></td></tr><tr><td>INSTALL_FAILED_UID_CHANGED</td><td>以前安装过该应用，与本次分配的 UID 不一致</td><td>清除以前安装过的残留文件</td></tr><tr><td>INSTALL_FAILED_VERSION_DOWNGRADE</td><td>已经安装了该应用更高版本</td><td>使用 <code>-d</code> 参数</td></tr><tr><td>INSTALL_FAILED_PERMISSION_MODEL_DOWNGRADE</td><td>已安装 target SDK 支持运行时权限的同名应用，要安装的版本不支持运行时权限</td><td></td></tr><tr><td>INSTALL_PARSE_FAILED_NOT_APK</td><td>指定路径不是文件，或不是以 <code>.apk</code> 结尾</td><td></td></tr><tr><td>INSTALL_PARSE_FAILED_BAD_MANIFEST</td><td>无法解析的 AndroidManifest.xml 文件</td><td></td></tr><tr><td>INSTALL_PARSE_FAILED_UNEXPECTED_EXCEPTION</td><td>解析器遇到异常</td><td></td></tr><tr><td>INSTALL_PARSE_FAILED_NO_CERTIFICATES</td><td>安装包没有签名</td><td></td></tr><tr><td>INSTALL_PARSE_FAILED_INCONSISTENT_CERTIFICATES</td><td>已安装该应用，且签名与 APK 文件不一致</td><td>先卸载设备上的该应用，再安装</td></tr><tr><td>INSTALL_PARSE_FAILED_CERTIFICATE_ENCODING</td><td>解析 APK 文件时遇到 <code>CertificateEncodingException</code></td><td></td></tr><tr><td>INSTALL_PARSE_FAILED_BAD_PACKAGE_NAME</td><td>manifest 文件里没有或者使用了无效的包名</td><td></td></tr><tr><td>INSTALL_PARSE_FAILED_BAD_SHARED_USER_ID</td><td>manifest 文件里指定了无效的共享用户 ID</td><td></td></tr><tr><td>INSTALL_PARSE_FAILED_MANIFEST_MALFORMED</td><td>解析 manifest 文件时遇到结构性错误</td><td></td></tr><tr><td>INSTALL_PARSE_FAILED_MANIFEST_EMPTY</td><td>在 manifest 文件里找不到找可操作标签（instrumentation 或 application）</td><td></td></tr><tr><td>INSTALL_FAILED_INTERNAL_ERROR</td><td>因系统问题安装失败</td><td></td></tr><tr><td>INSTALL_FAILED_USER_RESTRICTED</td><td>用户被限制安装应用</td><td>在开发者选项里将「USB安装」打开，如果已经打开了，那先关闭再打开。</td></tr><tr><td>INSTALL_FAILED_DUPLICATE_PERMISSION</td><td>应用尝试定义一个已经存在的权限名称</td><td></td></tr><tr><td>INSTALL_FAILED_NO_MATCHING_ABIS</td><td>应用包含设备的应用程序二进制接口不支持的 native code</td><td></td></tr><tr><td>INSTALL_CANCELED_BY_USER</td><td>应用安装需要在设备上确认，但未操作设备或点了取消</td><td>在设备上同意安装</td></tr><tr><td>INSTALL_FAILED_ACWF_INCOMPATIBLE</td><td>应用程序与设备不兼容</td><td></td></tr><tr><td>INSTALL_FAILED_TEST_ONLY</td><td>APK 文件是使用 Android Studio 直接 RUN 编译出来的文件</td><td>通过 Gradle 的 assembleDebug 或 assembleRelease 重新编译，或者 Generate Signed APK</td></tr><tr><td>does not contain AndroidManifest.xml</td><td>无效的 APK 文件</td><td></td></tr><tr><td>is not a valid zip file</td><td>无效的 APK 文件</td><td></td></tr><tr><td>Offline</td><td>设备未连接成功</td><td>先将设备与 adb 连接成功</td></tr><tr><td>unauthorized</td><td>设备未授权允许调试</td><td></td></tr><tr><td>error: device not found</td><td>没有连接成功的设备</td><td>先将设备与 adb 连接成功</td></tr><tr><td>protocol failure</td><td>设备已断开连接</td><td>先将设备与 adb 连接成功</td></tr><tr><td>Unknown option: -s</td><td>Android 2.2 以下不支持安装到 sdcard</td><td>不使用 <code>-s</code> 参数</td></tr><tr><td>No space left on device</td><td>空间不足</td><td>清理空间</td></tr><tr><td>Permission denied ... sdcard ...</td><td>sdcard 不可用</td><td></td></tr><tr><td>signatures do not match the previously installed version; ignoring!</td><td>已安装该应用且签名不一致</td><td>先卸载设备上的该应用，再安装</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="卸载apk">卸载APK<a href="#卸载apk" class="hash-link" aria-label="卸载APK的直接链接" title="卸载APK的直接链接">​</a></h3>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">adb uninstall </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">-k</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> PACKAGE</span><br></span></code></pre></div></div>
<ul>
<li>
<p><code>PACKAGE</code> 表示应用的包名</p>
</li>
<li>
<p><code>-k</code> 参数可选，表示卸载应用但保留数据和缓存目录。</p>
</li>
</ul>
<p>例如：</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">adb uninstall com.chehejia.oc.m01</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="查看前台activity">查看前台Activity<a href="#查看前台activity" class="hash-link" aria-label="查看前台Activity的直接链接" title="查看前台Activity的直接链接">​</a></h3>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">adb shell dumpsys activity activities </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> mResumedActivity</span><br></span></code></pre></div></div>
<p>就是设备当前展示的用户界面，结果如</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># 微信启动页面</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mResumedActivity: ActivityRecord</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">1ce38af u0 com.tencent.mm/.plugin.account.ui.WelcomeActivity t349</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="查看正在运行的services">查看正在运行的Services<a href="#查看正在运行的services" class="hash-link" aria-label="查看正在运行的Services的直接链接" title="查看正在运行的Services的直接链接">​</a></h3>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">adb shell dumpsys activity services </span><span class="token punctuation" style="color:#393A34">[</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">packagename</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre></div></div>
<ul>
<li><code>[&lt;packagename&gt;]</code>为可选参数，主要用来过滤哪一个package的，不然默认是输出所有的services</li>
<li><code>[&lt;packagename&gt;]</code>写个关键词也可以匹配，比如<code>qihoo360</code></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="查看应用详细信息">查看应用详细信息<a href="#查看应用详细信息" class="hash-link" aria-label="查看应用详细信息的直接链接" title="查看应用详细信息的直接链接">​</a></h3>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">adb shell dumpsys package </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">packagename</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre></div></div>
<ul>
<li><code>&lt;packagename&gt;</code>表示应用包名</li>
<li>输出中包含很多信息，包括 Activity Resolver Table、Registered ContentProviders、包名、userId、安装后的文件资源代码等路径、版本信息、权限信息和授予状态、签名版本信息等。</li>
</ul>
<p><strong>获取包中的所有<code>activity</code></strong></p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">adb shell dumpsys package </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">packagename</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-E</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;Activity|filter&#x27;</span><br></span></code></pre></div></div>
<p><strong>获取包中的所有<code>service</code></strong></p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">adb shell dumpsys package </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">packagename</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-E</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;Service|filter&#x27;</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="应用交互">应用交互<a href="#应用交互" class="hash-link" aria-label="应用交互的直接链接" title="应用交互的直接链接">​</a></h2>
<p>主要是使用 <code>am &lt;command&gt;</code> 命令，参数很多，可以<code>am</code>查看</p>
<blockquote>
<p>Activity Manager (am)是Android系统的一个核心组件，用于管理Activity、Service、Broadcast  Receiver等组件的生命周期，以及进程间通信、权限管理等操作。通过adb shell am命令，可以向Activity  Manager发送各种命令，以控制Android应用的行为。</p>
</blockquote>
<p>常用的 <code>&lt;command&gt;</code> 如下：</p>
<table><thead><tr><th>command</th><th>用途</th></tr></thead><tbody><tr><td><code>start [options] &lt;INTENT&gt;</code></td><td>启动 <code>&lt;INTENT&gt;</code> 指定的 Activity</td></tr><tr><td><code>startservice [options] &lt;INTENT&gt;</code></td><td>启动 <code>&lt;INTENT&gt;</code> 指定的 Service</td></tr><tr><td><code>stopservice [options] &lt;INTENT&gt;</code></td><td>停止 <code>&lt;INTENT&gt;</code> 指定的 Service</td></tr><tr><td><code>broadcast [options] &lt;INTENT&gt;</code></td><td>发送 <code>&lt;INTENT&gt;</code> 指定的广播</td></tr><tr><td><code>force-stop &lt;packagename&gt;</code></td><td>停止 <code>&lt;packagename&gt;</code> 相关的进程</td></tr></tbody></table>
<p><code>&lt;INTENT&gt;</code> 参数很灵活，和写 Android 程序时代码里的 Intent 相对应。</p>
<blockquote>
<p>在Android中，Intent是一种消息传递机制，用于在应用程序组件之间传递数据、启动Activity、启动服务、发送广播等。Intent可以被用来完成应用程序内部的通信，也可以用于不同应用程序之间的通信。</p>
</blockquote>
<p>用于决定 intent 对象的选项如下：</p>
<table><thead><tr><th>参数</th><th>含义</th></tr></thead><tbody><tr><td><code>-a &lt;ACTION&gt;</code></td><td>指定 action，比如 <code>android.intent.action.VIEW</code></td></tr><tr><td><code>-c &lt;CATEGORY&gt;</code></td><td>指定 category，比如 <code>android.intent.category.APP_CONTACTS</code></td></tr><tr><td><code>-n &lt;COMPONENT&gt;</code></td><td>指定完整 component 名，用于明确指定启动哪个 Activity，如 <code>com.example.app/.ExampleActivity</code></td></tr></tbody></table>
<p><code>&lt;INTENT&gt;</code> 里还能带数据，就像写代码时的 Bundle 一样（类似传参给activity）：</p>
<table><thead><tr><th>参数</th><th>含义</th></tr></thead><tbody><tr><td><code>--esn &lt;EXTRA_KEY&gt;</code></td><td>null 值（只有 key 名）</td></tr><tr><td><code>-e｜--es &lt;EXTRA_KEY&gt; &lt;EXTRA_STRING_VALUE&gt;</code></td><td>string 值</td></tr><tr><td><code>--ez &lt;EXTRA_KEY&gt; &lt;EXTRA_BOOLEAN_VALUE&gt;</code></td><td>boolean 值</td></tr><tr><td><code>--ei &lt;EXTRA_KEY&gt; &lt;EXTRA_INT_VALUE&gt;</code></td><td>integer 值</td></tr><tr><td><code>--el &lt;EXTRA_KEY&gt; &lt;EXTRA_LONG_VALUE&gt;</code></td><td>long 值</td></tr><tr><td><code>--ef &lt;EXTRA_KEY&gt; &lt;EXTRA_FLOAT_VALUE&gt;</code></td><td>float 值</td></tr><tr><td><code>--eu &lt;EXTRA_KEY&gt; &lt;EXTRA_URI_VALUE&gt;</code></td><td>URI</td></tr><tr><td><code>--ecn &lt;EXTRA_KEY&gt; &lt;EXTRA_COMPONENT_NAME_VALUE&gt;</code></td><td>component name</td></tr><tr><td><code>--eia &lt;EXTRA_KEY&gt; &lt;EXTRA_INT_VALUE&gt;[,&lt;EXTRA_INT_VALUE...]</code></td><td>integer 数组</td></tr><tr><td><code>--ela &lt;EXTRA_KEY&gt; &lt;EXTRA_LONG_VALUE&gt;[,&lt;EXTRA_LONG_VALUE...]</code></td><td>long 数组</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="启动应用-调起-activity">启动应用/ 调起 Activity<a href="#启动应用-调起-activity" class="hash-link" aria-label="启动应用/ 调起 Activity的直接链接" title="启动应用/ 调起 Activity的直接链接">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="指定activity名称启动">指定Activity名称启动<a href="#指定activity名称启动" class="hash-link" aria-label="指定Activity名称启动的直接链接" title="指定Activity名称启动的直接链接">​</a></h4>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">adb shell am start </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">options</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">INTENT</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre></div></div>
<p>如：</p>
<blockquote>
<p>可以从<a href="#%E6%9F%A5%E7%9C%8B%E5%BA%94%E7%94%A8%E8%AF%A6%E7%BB%86%E4%BF%A1%E6%81%AF">此处</a>获取APK中的所有activity，也可以通过此处获取<a href="#%E6%9F%A5%E7%9C%8B%E5%89%8D%E5%8F%B0activity">前台activity</a>，还可以通过<code>logcat</code><a href="#%E6%8C%89%E7%BA%A7%E5%88%AB%E8%BF%87%E6%BB%A4%E6%97%A5%E5%BF%97">过滤日志</a>的方式来获取。</p>
</blockquote>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">adb shell am start </span><span class="token parameter variable" style="color:#36acaa">-n</span><span class="token plain"> com.tencent.mm/.plugin.account.ui.ContactsSyncUI</span><br></span></code></pre></div></div>
<p>传递数据</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">adb shell am start </span><span class="token parameter variable" style="color:#36acaa">-n</span><span class="token plain"> com.tencent.mm/.plugin.account.ui.ContactsSyncUI </span><span class="token parameter variable" style="color:#36acaa">--es</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;aaa&quot;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;12345&quot;</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="不指定activity名称启动">不指定Activity名称启动<a href="#不指定activity名称启动" class="hash-link" aria-label="不指定Activity名称启动的直接链接" title="不指定Activity名称启动的直接链接">​</a></h4>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">adb shell monkey </span><span class="token parameter variable" style="color:#36acaa">-p</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">packagename</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-c</span><span class="token plain"> android.intent.category.LAUNCHER </span><span class="token number" style="color:#36acaa">1</span><br></span></code></pre></div></div>
<p>如：</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">adb shell monkey </span><span class="token parameter variable" style="color:#36acaa">-p</span><span class="token plain"> com.tencent.mm </span><span class="token parameter variable" style="color:#36acaa">-c</span><span class="token plain"> android.intent.category.LAUNCHER </span><span class="token number" style="color:#36acaa">1</span><br></span></code></pre></div></div>
<ul>
<li><code>adb shell monkey</code>：使用adb shell启动monkey测试工具。</li>
<li><code>-p com.tencent.mm</code>：指定要测试的应用程序的包名，即微信的包名。</li>
<li><code>-c android.intent.category.LAUNCHER</code>：指定要启动的Activity组件的类别，即通过“启动器”（Launcher）启动应用程序。在Android系统中，Activity组件通常通过其Intent过滤器中的类别来标识自己，其中包括<code>android.intent.category.LAUNCHER</code>，用于表示该组件是应用程序的主入口点。</li>
<li><code>1</code>：指定要执行的随机事件数量，即在启动微信应用程序后，将模拟执行一个随机操作。</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="调用service">调用Service<a href="#调用service" class="hash-link" aria-label="调用Service的直接链接" title="调用Service的直接链接">​</a></h3>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">adb shell am startservice </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">options</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">INTENT</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre></div></div>
<p>如：</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">adb shell am startservice </span><span class="token parameter variable" style="color:#36acaa">-n</span><span class="token plain"> com.tencent.mm/.plugin.account.model.ContactsSyncService</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="停止-service">停止 Service<a href="#停止-service" class="hash-link" aria-label="停止 Service的直接链接" title="停止 Service的直接链接">​</a></h3>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">adb shell am stopservice </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">options</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">INTENT</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="发送广播">发送广播<a href="#发送广播" class="hash-link" aria-label="发送广播的直接链接" title="发送广播的直接链接">​</a></h3>
<div class="language-shel codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shel codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">adb shell am broadcast [options] &lt;INTENT&gt;</span><br></span></code></pre></div></div>
<p>可以向所有组件广播，也可以只向指定组件广播。</p>
<ul>
<li>
<p>向所有组件广播 <code>BOOT_COMPLETED</code></p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">adb shell am broadcast </span><span class="token parameter variable" style="color:#36acaa">-a</span><span class="token plain"> android.intent.action.BOOT_COMPLETED</span><br></span></code></pre></div></div>
</li>
<li>
<p>向指定组件广播 <code>BOOT_COMPLETED</code></p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">adb shell am broadcast </span><span class="token parameter variable" style="color:#36acaa">-a</span><span class="token plain"> android.intent.action.BOOT_COMPLETED </span><span class="token parameter variable" style="color:#36acaa">-n</span><span class="token plain"> com.tencent.mm/.booter.BluetoothReceiver</span><br></span></code></pre></div></div>
</li>
</ul>
<p>部分系统预定义广播及正常触发时机</p>
<table><thead><tr><th>action</th><th>触发时机</th></tr></thead><tbody><tr><td>android.net.conn.CONNECTIVITY_CHANGE</td><td>网络连接发生变化</td></tr><tr><td>android.intent.action.SCREEN_ON</td><td>屏幕点亮</td></tr><tr><td>android.intent.action.SCREEN_OFF</td><td>屏幕熄灭</td></tr><tr><td>android.intent.action.BATTERY_LOW</td><td>电量低，会弹出电量低提示框</td></tr><tr><td>android.intent.action.BATTERY_OKAY</td><td>电量恢复了</td></tr><tr><td>android.intent.action.BOOT_COMPLETED</td><td>设备启动完毕</td></tr><tr><td>android.intent.action.DEVICE_STORAGE_LOW</td><td>存储空间过低</td></tr><tr><td>android.intent.action.DEVICE_STORAGE_OK</td><td>存储空间恢复</td></tr><tr><td>android.intent.action.PACKAGE_ADDED</td><td>安装了新的应用</td></tr><tr><td>android.net.wifi.STATE_CHANGE</td><td>WiFi 连接状态发生变化</td></tr><tr><td>android.net.wifi.WIFI_STATE_CHANGED</td><td>WiFi 状态变为启用/关闭/正在启动/正在关闭/未知</td></tr><tr><td>android.intent.action.BATTERY_CHANGED</td><td>电池电量发生变化</td></tr><tr><td>android.intent.action.INPUT_METHOD_CHANGED</td><td>系统输入法发生变化</td></tr><tr><td>android.intent.action.ACTION_POWER_CONNECTED</td><td>外部电源连接</td></tr><tr><td>android.intent.action.ACTION_POWER_DISCONNECTED</td><td>外部电源断开连接</td></tr><tr><td>android.intent.action.DREAMING_STARTED</td><td>系统开始休眠</td></tr><tr><td>android.intent.action.DREAMING_STOPPED</td><td>系统停止休眠</td></tr><tr><td>android.intent.action.WALLPAPER_CHANGED</td><td>壁纸发生变化</td></tr><tr><td>android.intent.action.HEADSET_PLUG</td><td>插入耳机</td></tr><tr><td>android.intent.action.MEDIA_UNMOUNTED</td><td>卸载外部介质</td></tr><tr><td>android.intent.action.MEDIA_MOUNTED</td><td>挂载外部介质</td></tr><tr><td>android.os.action.POWER_SAVE_MODE_CHANGED</td><td>省电模式开启</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="强制停止应用">强制停止应用<a href="#强制停止应用" class="hash-link" aria-label="强制停止应用的直接链接" title="强制停止应用的直接链接">​</a></h3>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">adb shell am force-stop </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">packagename</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre></div></div>
<p>停止应用程序的所有进程和服务，以及任何正在运行的后台任务。具体来说，这个命令将执行以下操作：</p>
<ol>
<li>终止应用程序的所有进程。</li>
<li>停止应用程序的所有服务。</li>
<li>移除应用程序的所有通知。</li>
<li>中止应用程序的所有后台任务。</li>
<li>关闭应用程序的所有窗口。</li>
</ol>
<blockquote>
<p>可通过<code>adb shell ps</code>获取正在运行的进程</p>
</blockquote>
<p>如</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">adb shell am force-stop com.tencent.mm</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="收紧内存">收紧内存<a href="#收紧内存" class="hash-link" aria-label="收紧内存的直接链接" title="收紧内存的直接链接">​</a></h3>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">adb shell am send-trim-memory </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">pid</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">level</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre></div></div>
<ul>
<li>pid: 进程 ID</li>
<li>level: HIDDEN、RUNNING_MODERATE、BACKGROUND、 RUNNING_LOW、MODERATE、RUNNING_CRITICAL、COMPLETE<!-- -->
<ol>
<li><code>HIDDEN</code>：应用程序的所有 UI 组件都不可见，应用程序处于后台运行状态。这个级别表示系统内存非常紧张，可能需要释放大量的内存，以便为其他应用程序留出足够的空间。</li>
<li><code>RUNNING_MODERATE</code>：应用程序在后台运行，但是不会被立即杀死。这个级别表示系统内存紧张，但是还有一些空间可以分配给其他应用程序，因此应用程序可以继续运行，但是需要释放一些内存。</li>
<li><code>BACKGROUND</code>：应用程序在后台运行，但是可能会被立即杀死。这个级别表示系统内存非常紧张，需要立即释放大量内存以避免系统崩溃。</li>
<li><code>RUNNING_LOW</code>：应用程序在前台运行，但是系统内存非常紧张。这个级别表示应用程序需要释放一些内存以避免系统崩溃。</li>
<li><code>MODERATE</code>：应用程序在前台运行，但是可能会被立即杀死。这个级别表示系统内存紧张，需要立即释放内存以避免系统崩溃。</li>
<li><code>RUNNING_CRITICAL</code>：应用程序在前台运行，并且可能会影响到其他应用程序的运行。这个级别表示系统内存非常紧张，需要立即释放内存以避免系统崩溃。</li>
<li><code>COMPLETE</code>：应用程序即将被杀死。这个级别表示应用程序需要释放所有的内存，以便为其他应用程序留出空间。</li>
</ol>
</li>
</ul>
<p>如</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">adb shell am send-trim-memory </span><span class="token number" style="color:#36acaa">12345</span><span class="token plain"> RUNNING_LOW</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="文件管理">文件管理<a href="#文件管理" class="hash-link" aria-label="文件管理的直接链接" title="文件管理的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="设备---电脑">设备 -&gt; 电脑<a href="#设备---电脑" class="hash-link" aria-label="设备 -&gt; 电脑的直接链接" title="设备 -&gt; 电脑的直接链接">​</a></h3>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">adb pull </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">设备里的文件路径</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">电脑上的目录</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="电脑---设备">电脑 -&gt; 设备<a href="#电脑---设备" class="hash-link" aria-label="电脑 -&gt; 设备的直接链接" title="电脑 -&gt; 设备的直接链接">​</a></h3>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">adb push </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">电脑里的文件路径</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">设备上的目录</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="模拟按键输入">模拟按键/输入<a href="#模拟按键输入" class="hash-link" aria-label="模拟按键/输入的直接链接" title="模拟按键/输入的直接链接">​</a></h2>
<p>主要是用<code>input</code>命令</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Usage: input </span><span class="token punctuation" style="color:#393A34">[</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">source</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">command</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">arg</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The sources are:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      mouse</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      keyboard</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      joystick</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      touchnavigation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      touchpad</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      trackball</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      stylus</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      dpad</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      touchscreen</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      gamepad</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The commands and default sources are:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      text </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">string</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Default: touchscreen</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      keyevent </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">--longpress</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">key code number or name</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">. </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Default: keyboard</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      tap </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">x</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">y</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Default: touchscreen</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      swipe </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">x</span><span class="token operator file-descriptor important" style="color:#393A34">1</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">y</span><span class="token operator file-descriptor important" style="color:#393A34">1</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">x</span><span class="token operator file-descriptor important" style="color:#393A34">2</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">y</span><span class="token operator file-descriptor important" style="color:#393A34">2</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">duration</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ms</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Default: touchscreen</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      press </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Default: trackball</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      roll </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">dx</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">dy</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Default: trackball</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="模拟输入">模拟输入<a href="#模拟输入" class="hash-link" aria-label="模拟输入的直接链接" title="模拟输入的直接链接">​</a></h3>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">adb shell input text </span><span class="token string" style="color:#e3116c">&quot;hello\ world&quot;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="模拟按键">模拟按键<a href="#模拟按键" class="hash-link" aria-label="模拟按键的直接链接" title="模拟按键的直接链接">​</a></h3>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">adb shell input keyevent </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">keycode</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 如：按下HOME键</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">adb shell input keyevent </span><span class="token number" style="color:#36acaa">3</span><br></span></code></pre></div></div>
<p>完整的 keycode 列表详见 <a href="https://developer.android.com/reference/android/view/KeyEvent.html" target="_blank" rel="noopener noreferrer">KeyEvent</a>（各种按键都有），部分如下：</p>
<table><thead><tr><th>keycode</th><th>含义</th></tr></thead><tbody><tr><td>3</td><td>HOME 键</td></tr><tr><td>4</td><td>返回键</td></tr><tr><td>5</td><td>打开拨号应用</td></tr><tr><td>6</td><td>挂断电话</td></tr><tr><td>24</td><td>增加音量</td></tr><tr><td>25</td><td>降低音量</td></tr><tr><td>26</td><td>电源键</td></tr><tr><td>27</td><td>拍照（需要在相机应用里）</td></tr><tr><td>64</td><td>打开浏览器</td></tr><tr><td>82</td><td>菜单键</td></tr><tr><td>85</td><td>播放/暂停</td></tr><tr><td>86</td><td>停止播放</td></tr><tr><td>87</td><td>播放下一首</td></tr><tr><td>88</td><td>播放上一首</td></tr><tr><td>122</td><td>移动光标到行首或列表顶部</td></tr><tr><td>123</td><td>移动光标到行末或列表底部</td></tr><tr><td>126</td><td>恢复播放</td></tr><tr><td>127</td><td>暂停播放</td></tr><tr><td>164</td><td>静音</td></tr><tr><td>176</td><td>打开系统设置</td></tr><tr><td>187</td><td>切换应用</td></tr><tr><td>207</td><td>打开联系人</td></tr><tr><td>208</td><td>打开日历</td></tr><tr><td>209</td><td>打开音乐</td></tr><tr><td>210</td><td>打开计算器</td></tr><tr><td>220</td><td>降低屏幕亮度</td></tr><tr><td>221</td><td>提高屏幕亮度</td></tr><tr><td>223</td><td>系统休眠</td></tr><tr><td>224</td><td>点亮屏幕</td></tr><tr><td>231</td><td>打开语音助手</td></tr><tr><td>276</td><td>如果没有 wakelock 则让系统休眠</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="模拟点击">模拟点击<a href="#模拟点击" class="hash-link" aria-label="模拟点击的直接链接" title="模拟点击的直接链接">​</a></h3>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">adb shell input tap </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">x</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">y</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre></div></div>
<p>需要知道x、y坐标，可以用如下方法来定位坐标：</p>
<ol>
<li>
<p>查看当前正在运行的输入设备的事件流，包括触摸屏、按键和其他输入事件</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">adb shell getevent </span><span class="token parameter variable" style="color:#36acaa">-l</span><br></span></code></pre></div></div>
</li>
<li>
<p>在设备上点击，可以看到操作，结果如下：</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/dev/input/event5: EV_ABS       ABS_MT_TRACKING_ID   00000001</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/dev/input/event5: EV_KEY       BTN_TOUCH            DOWN</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/dev/input/event5: EV_ABS       ABS_MT_POSITION_X    00000064</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/dev/input/event5: EV_ABS       ABS_MT_POSITION_Y    00000184</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/dev/input/event5: EV_SYN       SYN_REPORT           00000000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/dev/input/event5: EV_ABS       ABS_MT_TRACKING_ID   ffffffff</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/dev/input/event5: EV_KEY       BTN_TOUCH            UP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/dev/input/event5: EV_SYN       SYN_REPORT           00000000</span><br></span></code></pre></div></div>
<p><code>ABS_MT_POSITION_X</code>表示X坐标值，<code>ABS_MT_POSITION_Y</code>表示Y坐标值，不过都是16进制，可以通过如下命令转换为十进制。</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$((</span><span class="token variable number" style="color:#36acaa">0xFF</span><span class="token variable" style="color:#36acaa">))</span><br></span></code></pre></div></div>
</li>
<li>
<p>模拟点击（**注意：**在模拟器上，当屏幕方向改变时，模拟器中的坐标系也会随之旋转。如果模拟器处于竖屏模式（默认为横屏），那么坐标系将会被旋转 90 度，因此需要交换 x 和 y 值）</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">adb shell input tap </span><span class="token number" style="color:#36acaa">388</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><br></span></code></pre></div></div>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="模拟拖动">模拟拖动<a href="#模拟拖动" class="hash-link" aria-label="模拟拖动的直接链接" title="模拟拖动的直接链接">​</a></h3>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">adb shell input swipe </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">起点x坐标</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">起点y坐标</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">终点x坐标</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">终点y坐标</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">滑动时间ms</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre></div></div>
<p>定位坐标方式参考<a href="#%E6%A8%A1%E6%8B%9F%E7%82%B9%E5%87%BB">模拟点击</a></p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">adb shell input swipe </span><span class="token number" style="color:#36acaa">510</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">636</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">556</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">343</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">adb shell input swipe </span><span class="token number" style="color:#36acaa">510</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">636</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">556</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">343</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2000</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="输入中文">输入中文<a href="#输入中文" class="hash-link" aria-label="输入中文的直接链接" title="输入中文的直接链接">​</a></h3>
<blockquote>
<p>上方直接输入会报错，需要安装<a href="/assets/files/ADBKeyboard-8ff295f0354e1743369b7f92379898f3.apk" target="_blank">ADBKeyboard</a></p>
</blockquote>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># 列举输入法</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">adb shell ime list </span><span class="token parameter variable" style="color:#36acaa">-s</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 切换键盘</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">adb shell ime </span><span class="token builtin class-name">set</span><span class="token plain"> com.android.adbkeyboard/.AdbIME</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 输入中文</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">adb shell am broadcast </span><span class="token parameter variable" style="color:#36acaa">-a</span><span class="token plain"> ADB_INPUT_TEXT </span><span class="token parameter variable" style="color:#36acaa">--es</span><span class="token plain"> msg </span><span class="token string" style="color:#e3116c">&#x27;中文测试&#x27;</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="日志">日志<a href="#日志" class="hash-link" aria-label="日志的直接链接" title="日志的直接链接">​</a></h2>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">adb logcat</span><br></span></code></pre></div></div>
<p>默认结果举例如下：</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">03-13 </span><span class="token number" style="color:#36acaa">13</span><span class="token plain">:08:53.217   </span><span class="token number" style="color:#36acaa">604</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">1081</span><span class="token plain"> I ActivityManager: Start proc </span><span class="token number" style="color:#36acaa">4307</span><span class="token plain">:com.tencent.mm/u0a50 </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> activity com.tencent.mm/.ui.LauncherUI</span><br></span></code></pre></div></div>
<p>日志格式解析：</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[时间戳] [进程ID] [线程ID] [日志级别] [标签]: 日志消息</span><br></span></code></pre></div></div>
<p>日志级别如下：</p>
<ul>
<li>V (Verbose)：最低级别，用于调试目的，记录大量详细信息。</li>
<li>D (Debug)：用于调试和开发目的。</li>
<li>I (Info)：用于记录设备信息、状态和事件。</li>
<li>W (Warning)：用于记录潜在的问题和错误。</li>
<li>E (Error)：用于记录错误和异常。</li>
<li>F (Fatal)：用于记录致命错误，这些错误可能导致应用程序崩溃。</li>
<li>S(Silent): 最高级别，抑制所有输出</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="按级别过滤日志">按级别过滤日志<a href="#按级别过滤日志" class="hash-link" aria-label="按级别过滤日志的直接链接" title="按级别过滤日志的直接链接">​</a></h3>
<ul>
<li>输出&gt;=W级别的日志（将 Warning、Error、Fatal 和 Silent 日志输出）</li>
</ul>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">adb logcat </span><span class="token string" style="color:#e3116c">&quot;*:W&quot;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="按照指定格式输出滤日志">按照指定格式输出滤日志<a href="#按照指定格式输出滤日志" class="hash-link" aria-label="按照指定格式输出滤日志的直接链接" title="按照指定格式输出滤日志的直接链接">​</a></h3>
<div class="language-shel codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shel codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">adb logcat -v &lt;format&gt;</span><br></span></code></pre></div></div>
<p><code>&lt;format&gt;</code>格式如下：</p>
<ol>
<li><strong>brief</strong>：简要格式，仅包含日志级别、标签和消息。</li>
</ol>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">I/MyTag: This is a brief message</span><br></span></code></pre></div></div>
<ol start="2">
<li><strong>process</strong>：进程ID和标签，用于进程级别的过滤。</li>
</ol>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">1234 MyTag: This is a message from process 1234</span><br></span></code></pre></div></div>
<ol start="3">
<li><strong>tag</strong>：标签和消息，用于标签级别的过滤。</li>
</ol>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">MyTag: This is a message with tag MyTag</span><br></span></code></pre></div></div>
<ol start="4">
<li><strong>thread</strong>：线程ID、日志级别、标签和消息，用于线程级别的过滤。</li>
</ol>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">1234 D MyTag: This is a message from thread 1234</span><br></span></code></pre></div></div>
<ol start="5">
<li><strong>raw</strong>：以原始文本形式输出日志消息，没有格式化。</li>
</ol>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">This is a raw message</span><br></span></code></pre></div></div>
<ol start="6">
<li><strong>time</strong>：时间戳、日志级别、标签和消息。</li>
</ol>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">04-28 13:30:00.000 I MyTag: This is a message with timestamp</span><br></span></code></pre></div></div>
<ol start="7">
<li><strong>threadtime</strong>：时间戳、线程ID、日志级别、标签和消息。</li>
</ol>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">04-28 13:30:00.000 1234 D MyTag: This is a message from thread 1234 with timestamp</span><br></span></code></pre></div></div>
<ol start="8">
<li><strong>long</strong>：包含时间戳、日志级别、标签和消息，以及可选的附加信息（如进程ID、线程ID、包名等）。</li>
</ol>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">04-28 13:30:00.000 1234 5678 I MyTag: This is a message with additional information</span><br></span></code></pre></div></div>
<p>如：</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">adb logcat </span><span class="token parameter variable" style="color:#36acaa">-v</span><span class="token plain"> long</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="按-tag-和级别过滤日志">按 tag 和级别过滤日志<a href="#按-tag-和级别过滤日志" class="hash-link" aria-label="按 tag 和级别过滤日志的直接链接" title="按 tag 和级别过滤日志的直接链接">​</a></h3>
<ul>
<li>输出<code>ActivityManager</code>标签的信息，且仅输出信息级别为Info或更高的日志记录。</li>
</ul>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">adb logcat &quot;ActivityManager:I&quot; &quot;*:S&quot;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="清空日志">清空日志<a href="#清空日志" class="hash-link" aria-label="清空日志的直接链接" title="清空日志的直接链接">​</a></h3>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">adb logcat </span><span class="token parameter variable" style="color:#36acaa">-c</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="设备信息">设备信息<a href="#设备信息" class="hash-link" aria-label="设备信息的直接链接" title="设备信息的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="型号">型号<a href="#型号" class="hash-link" aria-label="型号的直接链接" title="型号的直接链接">​</a></h3>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">adb shell getprop ro.product.model</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="屏幕分辨率">屏幕分辨率<a href="#屏幕分辨率" class="hash-link" aria-label="屏幕分辨率的直接链接" title="屏幕分辨率的直接链接">​</a></h3>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">adb shell wm size</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="安卓系统版本">安卓系统版本<a href="#安卓系统版本" class="hash-link" aria-label="安卓系统版本的直接链接" title="安卓系统版本的直接链接">​</a></h3>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">adb shell getprop ro.build.version.release</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ip地址">IP地址<a href="#ip地址" class="hash-link" aria-label="IP地址的直接链接" title="IP地址的直接链接">​</a></h3>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">adb shell </span><span class="token function" style="color:#d73a49">ifconfig</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> Mask</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="mac地址">MAC地址<a href="#mac地址" class="hash-link" aria-label="MAC地址的直接链接" title="MAC地址的直接链接">​</a></h3>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">adb shell </span><span class="token function" style="color:#d73a49">cat</span><span class="token plain"> /sys/class/net/wlan0/address</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="内存信息">内存信息<a href="#内存信息" class="hash-link" aria-label="内存信息的直接链接" title="内存信息的直接链接">​</a></h3>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">adb shell </span><span class="token function" style="color:#d73a49">cat</span><span class="token plain"> /proc/meminfo</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="设置信息">设置信息<a href="#设置信息" class="hash-link" aria-label="设置信息的直接链接" title="设置信息的直接链接">​</a></h3>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">adb shell settings list system</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">adb shell settings list secure</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">adb shell settings list global</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="实用功能">实用功能<a href="#实用功能" class="hash-link" aria-label="实用功能的直接链接" title="实用功能的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="截屏">截屏<a href="#截屏" class="hash-link" aria-label="截屏的直接链接" title="截屏的直接链接">​</a></h3>
<p><strong>截屏保存到电脑本地：</strong></p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">adb exec-out screencap </span><span class="token parameter variable" style="color:#36acaa">-p</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> sc.png</span><br></span></code></pre></div></div>
<blockquote>
<p><code>exec-out</code> 用于从设备中执行 shell 命令并将其输出作为二进制数据传输回计算机。它可以将设备上的输出流转换为本地文件，也可以将其直接输出到控制台。</p>
</blockquote>
<p><strong>截屏保存到设备本地：</strong></p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">adb shell screencap </span><span class="token parameter variable" style="color:#36acaa">-p</span><span class="token plain"> /sdcard/sc.png</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="录屏">录屏<a href="#录屏" class="hash-link" aria-label="录屏的直接链接" title="录屏的直接链接">​</a></h3>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">adb shell screenrecord /sdcard/filename.mp4</span><br></span></code></pre></div></div>
<p>通过<code>Ctrl + C</code> 手动停止，默认录制时间和最长录制时间都是 180 秒，可以通过<code>adb pull</code>传递到电脑上。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="查看wi-fi密码">查看WI-FI密码<a href="#查看wi-fi密码" class="hash-link" aria-label="查看WI-FI密码的直接链接" title="查看WI-FI密码的直接链接">​</a></h3>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># root权限</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">adb shell </span><span class="token function" style="color:#d73a49">cat</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;/data/misc/wifi/*.conf&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># or</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">adb shell </span><span class="token function" style="color:#d73a49">cat</span><span class="token plain"> /data/misc/wifi/WifiConfigStore.xml</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="开启关闭wi-fi">开启/关闭WI-FI<a href="#开启关闭wi-fi" class="hash-link" aria-label="开启/关闭WI-FI的直接链接" title="开启/关闭WI-FI的直接链接">​</a></h3>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># root权限</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">adb shell svc wifi </span><span class="token builtin class-name">enable</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">adb shell svc wifi disable</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="设置系统时间">设置系统时间<a href="#设置系统时间" class="hash-link" aria-label="设置系统时间的直接链接" title="设置系统时间的直接链接">​</a></h3>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># root权限</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">adb shell </span><span class="token function" style="color:#d73a49">date</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-s</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">20160823.131500</span><br></span></code></pre></div></div>
<p>有的可能会提示没有<code>-s</code>参数，可以使用如下方法：</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># 关闭自动时间更新</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">adb shell settings put global auto_time </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 修改时间 date $(date +%m%d%H%M%Y.%S)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">adb shell </span><span class="token function" style="color:#d73a49">date</span><span class="token plain"> 031313012023.13</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="重启">重启<a href="#重启" class="hash-link" aria-label="重启的直接链接" title="重启的直接链接">​</a></h3>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">adb </span><span class="token function" style="color:#d73a49">reboot</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="查看进程">查看进程<a href="#查看进程" class="hash-link" aria-label="查看进程的直接链接" title="查看进程的直接链接">​</a></h3>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">adb shell </span><span class="token function" style="color:#d73a49">ps</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="设置全局代理">设置全局代理<a href="#设置全局代理" class="hash-link" aria-label="设置全局代理的直接链接" title="设置全局代理的直接链接">​</a></h3>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># 设置代理</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">adb shell settings put global http_proxy </span><span class="token number" style="color:#36acaa">10.8</span><span class="token plain">.165.14:7890</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 去掉代理</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">adb shell settings delete global http_proxy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">adb shell settings delete global global_http_proxy_host</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">adb shell settings delete global global_http_proxy_port</span><br></span></code></pre></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"></div><div class="col lastUpdated_JAkA"><span class="theme-last-updated">最后<!-- -->由 <b>d4m1ts</b> <!-- -->于 <b><time datetime="2025-06-14T03:28:33.000Z" itemprop="dateModified">2025年6月14日</time></b> <!-- -->更新</span></div></div></footer></article><nav class="pagination-nav" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/移动安全/前置基础知识/HTTP单向验证+双向验证解释"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">HTTP单向验证+双向验证解释</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/移动安全/drozer测试四大组件/"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">Drozer测试四大组件</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#adb介绍" class="table-of-contents__link toc-highlight">ADB介绍</a></li><li><a href="#测试环境" class="table-of-contents__link toc-highlight">测试环境</a></li><li><a href="#基础使用" class="table-of-contents__link toc-highlight">基础使用</a><ul><li><a href="#基本语法" class="table-of-contents__link toc-highlight">基本语法</a></li><li><a href="#连接指定设备" class="table-of-contents__link toc-highlight">连接指定设备</a></li><li><a href="#启动停止" class="table-of-contents__link toc-highlight">启动/停止</a></li><li><a href="#版本" class="table-of-contents__link toc-highlight">版本</a></li><li><a href="#以root权限运行adbd" class="table-of-contents__link toc-highlight">以root权限运行adbd</a></li><li><a href="#指定adb-server的网络端口" class="table-of-contents__link toc-highlight">指定adb server的网络端口</a></li></ul></li><li><a href="#应用管理" class="table-of-contents__link toc-highlight">应用管理</a><ul><li><a href="#查看应用列表" class="table-of-contents__link toc-highlight">查看应用列表</a></li><li><a href="#查看应用安装路径" class="table-of-contents__link toc-highlight">查看应用安装路径</a></li><li><a href="#清除应用数据与缓存" class="table-of-contents__link toc-highlight">清除应用数据与缓存</a></li><li><a href="#安装apk" class="table-of-contents__link toc-highlight">安装APK</a></li><li><a href="#卸载apk" class="table-of-contents__link toc-highlight">卸载APK</a></li><li><a href="#查看前台activity" class="table-of-contents__link toc-highlight">查看前台Activity</a></li><li><a href="#查看正在运行的services" class="table-of-contents__link toc-highlight">查看正在运行的Services</a></li><li><a href="#查看应用详细信息" class="table-of-contents__link toc-highlight">查看应用详细信息</a></li></ul></li><li><a href="#应用交互" class="table-of-contents__link toc-highlight">应用交互</a><ul><li><a href="#启动应用-调起-activity" class="table-of-contents__link toc-highlight">启动应用/ 调起 Activity</a><ul><li><a href="#指定activity名称启动" class="table-of-contents__link toc-highlight">指定Activity名称启动</a></li><li><a href="#不指定activity名称启动" class="table-of-contents__link toc-highlight">不指定Activity名称启动</a></li></ul></li><li><a href="#调用service" class="table-of-contents__link toc-highlight">调用Service</a></li><li><a href="#停止-service" class="table-of-contents__link toc-highlight">停止 Service</a></li><li><a href="#发送广播" class="table-of-contents__link toc-highlight">发送广播</a></li><li><a href="#强制停止应用" class="table-of-contents__link toc-highlight">强制停止应用</a></li><li><a href="#收紧内存" class="table-of-contents__link toc-highlight">收紧内存</a></li></ul></li><li><a href="#文件管理" class="table-of-contents__link toc-highlight">文件管理</a><ul><li><a href="#设备---电脑" class="table-of-contents__link toc-highlight">设备 -&gt; 电脑</a></li><li><a href="#电脑---设备" class="table-of-contents__link toc-highlight">电脑 -&gt; 设备</a></li></ul></li><li><a href="#模拟按键输入" class="table-of-contents__link toc-highlight">模拟按键/输入</a><ul><li><a href="#模拟输入" class="table-of-contents__link toc-highlight">模拟输入</a></li><li><a href="#模拟按键" class="table-of-contents__link toc-highlight">模拟按键</a></li><li><a href="#模拟点击" class="table-of-contents__link toc-highlight">模拟点击</a></li><li><a href="#模拟拖动" class="table-of-contents__link toc-highlight">模拟拖动</a></li><li><a href="#输入中文" class="table-of-contents__link toc-highlight">输入中文</a></li></ul></li><li><a href="#日志" class="table-of-contents__link toc-highlight">日志</a><ul><li><a href="#按级别过滤日志" class="table-of-contents__link toc-highlight">按级别过滤日志</a></li><li><a href="#按照指定格式输出滤日志" class="table-of-contents__link toc-highlight">按照指定格式输出滤日志</a></li><li><a href="#按-tag-和级别过滤日志" class="table-of-contents__link toc-highlight">按 tag 和级别过滤日志</a></li><li><a href="#清空日志" class="table-of-contents__link toc-highlight">清空日志</a></li></ul></li><li><a href="#设备信息" class="table-of-contents__link toc-highlight">设备信息</a><ul><li><a href="#型号" class="table-of-contents__link toc-highlight">型号</a></li><li><a href="#屏幕分辨率" class="table-of-contents__link toc-highlight">屏幕分辨率</a></li><li><a href="#安卓系统版本" class="table-of-contents__link toc-highlight">安卓系统版本</a></li><li><a href="#ip地址" class="table-of-contents__link toc-highlight">IP地址</a></li><li><a href="#mac地址" class="table-of-contents__link toc-highlight">MAC地址</a></li><li><a href="#内存信息" class="table-of-contents__link toc-highlight">内存信息</a></li><li><a href="#设置信息" class="table-of-contents__link toc-highlight">设置信息</a></li></ul></li><li><a href="#实用功能" class="table-of-contents__link toc-highlight">实用功能</a><ul><li><a href="#截屏" class="table-of-contents__link toc-highlight">截屏</a></li><li><a href="#录屏" class="table-of-contents__link toc-highlight">录屏</a></li><li><a href="#查看wi-fi密码" class="table-of-contents__link toc-highlight">查看WI-FI密码</a></li><li><a href="#开启关闭wi-fi" class="table-of-contents__link toc-highlight">开启/关闭WI-FI</a></li><li><a href="#设置系统时间" class="table-of-contents__link toc-highlight">设置系统时间</a></li><li><a href="#重启" class="table-of-contents__link toc-highlight">重启</a></li><li><a href="#查看进程" class="table-of-contents__link toc-highlight">查看进程</a></li><li><a href="#设置全局代理" class="table-of-contents__link toc-highlight">设置全局代理</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">内容导航</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/friends">友情链接</a></li><li class="footer__item"><a class="footer__link-item" href="/promotions">我的推广</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">实用工具</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://markdown.gm7.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">在线Markdown<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://rshell.gm7.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Reverse Shell Generator<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://gtfobins.gm7.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">GTFOBins<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">关注我</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/damit5/damit5.github.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="mailto:admin@gm7.org" target="_blank" rel="noopener noreferrer" class="footer__link-item">联系我<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 d4m1ts 知识库</div></div></div></footer></div>
</body>
</html>